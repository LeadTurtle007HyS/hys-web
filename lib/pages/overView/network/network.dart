import 'dart:convert';
import 'dart:html';
import 'dart:typed_data';

import 'package:HyS/constants/style.dart';
import 'package:HyS/controllers/playVideo.dart';
import 'package:HyS/pages/overView/network/network_crud.dart';
import 'package:HyS/pages/overView/notification_crud.dart';
import 'package:cached_network_image/cached_network_image.dart';
import 'package:elegant_notification/elegant_notification.dart';
import 'package:expandable/expandable.dart';
import 'package:file_picker/file_picker.dart';
import 'package:firebase_auth/firebase_auth.dart';
import 'package:firebase_database/firebase_database.dart';
import 'package:firebase_storage/firebase_storage.dart';
import 'package:flutter/material.dart';
import 'package:flutter_html/flutter_html.dart';
import 'package:flutter_mentions/flutter_mentions.dart';
import 'package:flutter_placeholder_textlines/placeholder_lines.dart';
import 'package:flutter_reaction_button/flutter_reaction_button.dart';
import 'package:flutter_tex/flutter_tex.dart';
import 'package:fluttericon/entypo_icons.dart';
import 'package:fluttericon/font_awesome5_icons.dart';
import 'package:fluttericon/font_awesome_icons.dart';
import 'package:fluttericon/fontelico_icons.dart';
import 'package:fluttericon/mfg_labs_icons.dart';
import 'package:fluttericon/web_symbols_icons.dart';
import 'package:google_fonts/google_fonts.dart';
import 'package:group_radio_button/group_radio_button.dart';
import 'package:hive/hive.dart';
import 'package:modal_bottom_sheet/modal_bottom_sheet.dart';
import 'package:multiselect_formfield/multiselect_formfield.dart';
import 'package:oktoast/oktoast.dart';
import 'package:readmore/readmore.dart';
import 'package:intl/intl.dart';
import 'package:http/http.dart' as http;
import 'package:flutter_google_places/flutter_google_places.dart';
import 'package:google_maps_webservice/places.dart' as places;
import 'package:scrollable_positioned_list/scrollable_positioned_list.dart';
import 'package:url_launcher/url_launcher.dart';

import '../../../createblogcontent.dart';
import '../cropimage.dart';

class Network extends StatefulWidget {
  const Network({Key? key}) : super(key: key);

  @override
  _NetworkState createState() => _NetworkState();
}

const kGoogleApiKey = "AIzaSyC2oRAljHGZArBeQc5OXY0MI5BBoQproWY";
places.GoogleMapsPlaces _places =
    places.GoogleMapsPlaces(apiKey: kGoogleApiKey);

class _NetworkState extends State<Network> {
  String comparedate = DateFormat('yyyyMMddkkmm').format(DateTime.now());
  String _currentUserId = FirebaseAuth.instance.currentUser!.uid;

  List<Reaction<String>> reaction = [
    Reaction<String>(
        id: 1,
        previewIcon: Image.network(
            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flike.gif?alt=media&token=8e8235a2-317d-4d63-a944-a20fa38657cd",
            height: 50,
            width: 50),
        icon: Row(
          children: const [
            Icon(FontAwesome5.thumbs_up, color: Color(0xff0962ff), size: 14),
            Text(
              "  Like",
              style: TextStyle(
                  fontSize: 13,
                  fontWeight: FontWeight.w700,
                  color: Color(0xff0962ff)),
            )
          ],
        ),
        title: Text(
          "Like",
          style: TextStyle(fontSize: 15, fontWeight: FontWeight.bold),
        ),
        value: "Like"),
    Reaction<String>(
        id: 2,
        previewIcon: Image.network(
            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flove.gif?alt=media&token=ce69e872-7ec9-4bc6-8ab5-97883d44928e",
            height: 50,
            width: 50),
        icon: Row(
          children: [
            Image.network(
                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flove.png?alt=media&token=ad08fe40-a428-421b-92f9-d06bc486af8a",
                height: 20,
                width: 20),
            Text(
              "  Love",
              style: TextStyle(
                  fontSize: 13,
                  fontWeight: FontWeight.w700,
                  color: Color.fromRGBO(244, 8, 82, 1)),
            )
          ],
        ),
        title: Text(
          "Love",
          style: TextStyle(fontSize: 15, fontWeight: FontWeight.bold),
        ),
        value: "Love"),
    Reaction<String>(
        id: 3,
        previewIcon: Image.network(
            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flaugh.gif?alt=media&token=aed70222-a9b5-4d0b-834c-110e91a0afc6",
            height: 50,
            width: 50),
        icon: Row(
          children: [
            Image.network(
                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flaugh.png?alt=media&token=28061e76-ddc3-4a65-a4dd-e8c565f9dbd4",
                height: 20,
                width: 20),
            Text(
              "  Haha",
              style: TextStyle(
                  fontSize: 13,
                  fontWeight: FontWeight.w700,
                  color: Color.fromRGBO(242, 177, 76, 1)),
            )
          ],
        ),
        title: Text(
          "Haha",
          style: TextStyle(fontSize: 15, fontWeight: FontWeight.bold),
        ),
        value: "Haha"),
    Reaction<String>(
        id: 4,
        previewIcon: Column(
          children: [
            SizedBox(
              height: 5,
            ),
            Image.network(
                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fyay.gif?alt=media&token=00c592a0-b055-4d29-bc28-9e4f8922eadb",
                height: 45,
                width: 45),
          ],
        ),
        icon: Row(
          children: [
            Image.network(
                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fyay.png?alt=media&token=d45baeff-5694-481e-89f6-413fa3d1be7e",
                height: 20,
                width: 20),
            Text(
              "  Yay",
              style: TextStyle(
                  fontSize: 13,
                  fontWeight: FontWeight.w700,
                  color: Color.fromRGBO(242, 177, 76, 1)),
            )
          ],
        ),
        title: Text(
          "Yay",
          style: TextStyle(fontSize: 15, fontWeight: FontWeight.bold),
        ),
        value: "Yay"),
    Reaction<String>(
        id: 5,
        previewIcon: Image.network(
            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fwow.gif?alt=media&token=609ab63c-3dc1-4bc8-b8f7-27587a8f1599",
            height: 50,
            width: 50),
        icon: Row(
          children: [
            Image.network(
                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fwow.png?alt=media&token=753eae20-2ba2-4c77-ac54-24c520a4174e",
                height: 20,
                width: 20),
            Text(
              "  Wow",
              style: TextStyle(
                  fontSize: 13,
                  fontWeight: FontWeight.w700,
                  color: Color.fromRGBO(242, 177, 76, 1)),
            )
          ],
        ),
        title: Text(
          "Wow",
          style: TextStyle(fontSize: 15, fontWeight: FontWeight.bold),
        ),
        value: "Wow"),
    Reaction<String>(
        id: 6,
        previewIcon: Image.network(
            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fangry.gif?alt=media&token=dc9cea51-d3f9-4499-bfc0-de4e889f85a0",
            height: 50,
            width: 50),
        icon: Row(
          children: [
            Image.network(
                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fangry.png?alt=media&token=80d1dee3-f455-469c-b5d8-6ad0a7fc6d99",
                height: 20,
                width: 20),
            Text(
              "  Angry",
              style: TextStyle(
                  fontSize: 13,
                  fontWeight: FontWeight.w700,
                  color: Color.fromRGBO(222, 37, 35, 1)),
            )
          ],
        ),
        title: Text(
          "Angry",
          style: TextStyle(fontSize: 15, fontWeight: FontWeight.bold),
        ),
        value: "Angry"),
  ];

  Box<dynamic>? userDataDB;
  Box<dynamic>? allSocialPostLocalDB;

  List<dynamic> taggingData = [];
  List<dynamic> allPostData = [];
  List<dynamic> allPostLikeData = [];
  List<dynamic> allPostLikeDataLocal = [];
  List<dynamic> allImagesData = [];
  List<dynamic> allVideosData = [];
  List<dynamic> allTaggedUsersData = [];
  List<dynamic> allMoodPostData = [];
  List<dynamic> allBlogPostData = [];
  List<dynamic> allCausePostData = [];
  List<dynamic> allBIdeasPostData = [];
  List<dynamic> allProjectsPostData = [];
  List<dynamic> isBIdeasPostExpanded = [];
  List<dynamic> isProjectPostExpanded = [];
  List<dynamic> allCommentPostData = [];
  List<int> allPostLikeCount = [];
  List<int> allPostCommentCount = [];
  List<int> allPostViewCount = [];
  List<int> allPostImpressionCount = [];
  List<bool> isPostExpanded = [];
  List selectedUserflag = [];
  List selectedUserID = [];
  NetworkCRUD networkCRUD = NetworkCRUD();
  NotificationCRUD notifyCRUD = NotificationCRUD();
  final GlobalKey<State> _keyLoader = new GlobalKey<State>();
  ScrollController? _scrollController;

  List<dynamic> allPostwiseCmntData = [];
  List<dynamic> allPostCommentIDs = [];
  List<dynamic> isCommentExpanded = [];
  List<dynamic> commentLikeCount = [];
  List<dynamic> commentReplyeCount = [];
  List<dynamic> isShowAllComment = [];

  List<dynamic> allReplyPostData = [];
  List<dynamic> allPostwiseReplyData = [];
  List<dynamic> allCmntReplyIDs = [];
  List<dynamic> isReplyExpanded = [];
  List<dynamic> ReplyLikeCount = [];
  List<dynamic> isShowAllReply = [];
  String beforeTag = '';
  final databaseReference = FirebaseDatabase.instance.reference();
  DataSnapshot? countData;

  final _users = [
    {
      'id': 'OMjugi0iu8NEZd6MnKRKa7SkhGJ3',
      'display': 'Vivek Sharma',
      'full_name': 'DPS | Grade 7',
      'photo':
          'https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940'
    },
  ];

  final List<String> _scrollImg = [
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fmood.png?alt=media&token=7cecd31f-1b8a-4c51-8ae6-66720c6f3223",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fblog1.png?alt=media&token=4fdaa96a-a3b0-46dc-970f-7be77470ad05",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fcause1.png?alt=media&token=3d03c35f-a89b-435f-a6a2-abde049a43c8",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fhelpgroup.png?alt=media&token=9eb1efd4-5c26-4b7a-af8e-16378e9388b6",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fpodcast.png?alt=media&token=02b9cef8-9e10-4def-8a87-3228a39bb52d",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Frebel.png?alt=media&token=24a0f65a-192d-49ca-9d67-8006f0e42c6d",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fbooks.png?alt=media&token=4d376df0-e65f-4c5c-8b76-6b24aa351ad4",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fbusinessideas.png?alt=media&token=790eda76-6bc3-4a6f-92f4-44af03392322",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fexamq.png?alt=media&token=9e91ed6d-0f8a-4b53-86dd-7cd41fa83f6d",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fprojects1.png?alt=media&token=bf6da888-9d99-4ca0-8c2e-7a87cf6f579d",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fuploads.png?alt=media&token=d82428d3-fdf5-4631-8a1b-8632a80ed1e4",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Ftalents.png?alt=media&token=61e03383-49b4-47d0-a8f7-b01c13198d69",
    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fshortcuts%2Fpredictq.png?alt=media&token=3f7a6a1f-566b-4445-a5eb-c3f102294c07",
  ];

  final List<String> _scrollName = [
    "Feelings",
    "Blog",
    "Cause",
    "Help Group",
    "Podcast",
    "Rebel",
    "Discuss",
    "Ideas",
    "Discuss",
    "Projects",
    "Uploads",
    "Showcase",
    "Predict",
  ];

  final List<String> _scrollPostType = [
    "Mood",
    "blog",
    "EventUnderprivilegeByTeaching",
    "Helpgroup",
    "podcast",
    "rebel",
    "books",
    "businessideas",
    "examq",
    "projectdiscuss",
    "uploads",
    "talent",
    "predict"
  ];

  double? _width;

  final ItemScrollController itemScrollController = ItemScrollController();
  final ItemPositionsListener itemPositionsListener =
      ItemPositionsListener.create();

  Future<void> _get_all_users_data_for_tagging() async {
    final http.Response response = await http.get(
      Uri.parse('https://hys-api.herokuapp.com/web_get_all_users_data_for_tagging'),
    );

    print("get_all_users_data_for_taggigng: ${response.statusCode}");
    if ((response.statusCode == 200) || (response.statusCode == 201)) {
      setState(() {
        taggingData = json.decode(response.body);
        for (int i = 0; i < taggingData.length; i++) {
          if (taggingData[i]["user_id"].toString() !=
              userDataDB!.get("user_id")) {
            _users.add({
              'id': taggingData[i]["user_id"].toString(),
              'display': taggingData[i]["first_name"].toString() +
                  " " +
                  taggingData[i]["last_name"].toString(),
              'full_name': taggingData[i]["school_name"].toString() +
                  " | " +
                  taggingData[i]["grade"].toString(),
              'photo': taggingData[i]["profilepic"].toString()
            });
          }
          selectedUserflag.add(false);
        }
      });
    }
  }

  Future<void> _get_all_post_details() async {
    isShowAllComment = [];
    isPostExpanded = [];
    allPostLikeCount = [];
    allPostCommentCount = [];
    allPostViewCount = [];
    allPostImpressionCount = [];
    setState(() {
      allPostData = allSocialPostLocalDB!.get("allpost");
      for (int i = 0; i < allPostData.length; i++) {
        isPostExpanded.add(false);
        isShowAllComment.add(false);
        allPostLikeCount.add(0);
        allPostCommentCount.add(0);
        allPostViewCount.add(0);
        allPostImpressionCount.add(0);
        allPostLikeDataLocal.add("likeinit");
      }
      _get_all_post_like_details();
    });
  }

  Future<void> _get_all_post_like_details() async {
    final http.Response response = await http.get(
      Uri.parse(
          'https://hys-api.herokuapp.com/web_get_sm_like_post_details/${_currentUserId}'),
    );

    print("get_sm_like_post_details: ${response.statusCode}");
    if ((response.statusCode == 200) || (response.statusCode == 201)) {
      setState(() {
        allPostLikeData = json.decode(response.body);
        for (int i = 0; i < allPostData.length; i++) {
          for (int j = 0; j < allPostLikeData.length; j++) {
            if (allPostLikeData[j]["post_id"] == allPostData[i]["post_id"]) {
              allPostLikeDataLocal[i] = allPostLikeData[j]["like_type"];
            }
          }
        }
      });
    }
  }

  Future<void> _get_all_attached_images() async {
    final http.Response response = await http.get(
      Uri.parse('https://hys-api.herokuapp.com/web_get_all_sm_images'),
    );

    print("get_all_sm_images: ${response.statusCode}");
    if ((response.statusCode == 200) || (response.statusCode == 201)) {
      setState(() {
        allImagesData = json.decode(response.body);
      });
    }
  }

  Future<void> _get_all_attached_videos() async {
    final http.Response response = await http.get(
      Uri.parse('https://hys-api.herokuapp.com/web_get_all_sm_videos'),
    );

    print("get_all_sm_videos: ${response.statusCode}");
    if ((response.statusCode == 200) || (response.statusCode == 201)) {
      setState(() {
        allVideosData = json.decode(response.body);
      });
    }
  }

  Future<void> _get_all_tagged_users() async {
    final http.Response response = await http.get(
      Uri.parse('https://hys-api.herokuapp.com/web_get_all_sm_usertagged'),
    );

    print("get_all_sm_usertagged: ${response.statusCode}");
    if ((response.statusCode == 200) || (response.statusCode == 201)) {
      setState(() {
        allTaggedUsersData = json.decode(response.body);
      });
    }
  }

  Future<void> _get_all_mood_post_details() async {
    setState(() {
      allMoodPostData = allSocialPostLocalDB!.get("moodpost");
      for (int i = 0; i < allMoodPostData.length; i++) {
        for (int j = 0; j < allPostData.length; j++) {
          if (allPostData[j]["post_id"] == allMoodPostData[i]["post_id"]) {
            setState(() {
              allPostLikeCount[j] = allMoodPostData[i]["like_count"];
              allPostCommentCount[j] = allMoodPostData[i]["comment_count"];
              allPostViewCount[j] = allMoodPostData[i]["view_count"];
              allPostImpressionCount[j] =
                  allMoodPostData[i]["impression_count"];
            });
          }
        }
      }
    });
  }

  Future<void> _get_all_comment_post_details() async {
    comparedate = DateFormat('yyyyMMddkkmm').format(DateTime.now());
    allCommentPostData = [];
    allPostwiseCmntData = [];
    allPostCommentIDs = [];
    isCommentExpanded = [];
    commentLikeCount = [];
    commentReplyeCount = [];

    final http.Response response = await http.get(
      Uri.parse('https://hys-api.herokuapp.com/web_get_all_sm_comment_posts'),
    );

    print("get_all_sm_comment_posts: ${response.statusCode}");
    if ((response.statusCode == 200) || (response.statusCode == 201)) {
      setState(() {
        allCommentPostData = json.decode(response.body);
        for (int i = 0; i < allCommentPostData.length; i++) {
          if (allPostCommentIDs.isEmpty) {
            allPostCommentIDs.add(allCommentPostData[i]["post_id"]);
            allPostwiseCmntData.add([]);
            isCommentExpanded.add([]);
            commentLikeCount.add([]);
            commentReplyeCount.add([]);
          } else {
            int count = 0;
            for (int j = 0; j < allPostCommentIDs.length; j++) {
              if (allPostCommentIDs[j] == allCommentPostData[i]["post_id"]) {
                count++;
                break;
              }
            }
            if (count == 0) {
              allPostCommentIDs.add(allCommentPostData[i]["post_id"]);
              allPostwiseCmntData.add([]);
              isCommentExpanded.add([]);
              commentLikeCount.add([]);
              commentReplyeCount.add([]);
            }
          }
          for (int j = 0; j < allPostCommentIDs.length; j++) {
            if (allPostCommentIDs[j] == allCommentPostData[i]["post_id"]) {
              allPostwiseCmntData[j].add(allCommentPostData[i]);
              isCommentExpanded[j].add(false);
              commentLikeCount[j].add(allCommentPostData[i]["like_count"]);
              commentReplyeCount[j].add(allCommentPostData[i]["reply_count"]);
            }
          }
        }
      });
    }
  }

  Future<void> _get_all_reply_post_details() async {
    comparedate = DateFormat('yyyyMMddkkmm').format(DateTime.now());
    allReplyPostData = [];
    allPostwiseReplyData = [];
    allCmntReplyIDs = [];
    isReplyExpanded = [];
    ReplyLikeCount = [];
    isShowAllReply = [];

    final http.Response response = await http.get(
      Uri.parse('https://hys-api.herokuapp.com/web_get_all_sm_reply_posts'),
    );

    print("get_all_sm_reply_posts: ${response.statusCode}");
    if ((response.statusCode == 200) || (response.statusCode == 201)) {
      setState(() {
        allReplyPostData = json.decode(response.body);
        for (int i = 0; i < allReplyPostData.length; i++) {
          if (allCmntReplyIDs.isEmpty) {
            allCmntReplyIDs.add(allReplyPostData[i]["comment_id"]);
            allPostwiseReplyData.add([]);
            isReplyExpanded.add([]);
            ReplyLikeCount.add([]);
            isShowAllReply.add(false);
          } else {
            int count = 0;
            for (int j = 0; j < allCmntReplyIDs.length; j++) {
              if (allCmntReplyIDs[j] == allReplyPostData[i]["comment_id"]) {
                count++;
                break;
              }
            }
            if (count == 0) {
              allCmntReplyIDs.add(allReplyPostData[i]["comment_id"]);
              allPostwiseReplyData.add([]);
              isReplyExpanded.add([]);
              ReplyLikeCount.add([]);
              isShowAllReply.add(false);
            }
          }
          for (int j = 0; j < allCmntReplyIDs.length; j++) {
            if (allCmntReplyIDs[j] == allReplyPostData[i]["comment_id"]) {
              allPostwiseReplyData[j].add(allReplyPostData[i]);
              isReplyExpanded[j].add(false);
              ReplyLikeCount[j].add(allReplyPostData[i]["like_count"]);
            }
          }
        }
      });
    }
  }

  Future<void> _get_all_cause_post_details() async {
    setState(() {
      allCausePostData = allSocialPostLocalDB!.get("causepost");
      for (int i = 0; i < allCausePostData.length; i++) {
        for (int j = 0; j < allPostData.length; j++) {
          if (allPostData[j]["post_id"] == allCausePostData[i]["post_id"]) {
            setState(() {
              allPostLikeCount[j] = allCausePostData[i]["like_count"];
              allPostCommentCount[j] = allCausePostData[i]["comment_count"];
              allPostViewCount[j] = allCausePostData[i]["view_count"];
              allPostImpressionCount[j] =
                  allCausePostData[i]["impression_count"];
            });
          }
        }
      }
    });
  }

  Future<void> _get_all_bideas_post_details() async {
    setState(() {
      allBIdeasPostData = allSocialPostLocalDB!.get("businesspost");
      for (int i = 0; i < allBIdeasPostData.length; i++) {
        setState(() {
          isBIdeasPostExpanded.add(false);
        });
      }
      for (int i = 0; i < allBIdeasPostData.length; i++) {
        for (int j = 0; j < allPostData.length; j++) {
          if (allPostData[j]["post_id"] == allBIdeasPostData[i]["post_id"]) {
            setState(() {
              allPostLikeCount[j] = allBIdeasPostData[i]["like_count"];
              allPostCommentCount[j] = allBIdeasPostData[i]["comment_count"];
              allPostViewCount[j] = allBIdeasPostData[i]["view_count"];
              allPostImpressionCount[j] =
                  allBIdeasPostData[i]["impression_count"];
            });
          }
        }
      }
    });
  }

  Future<void> _get_all_project_post_details() async {
    setState(() {
      allProjectsPostData = allSocialPostLocalDB!.get("projectpost");
      for (int i = 0; i < allProjectsPostData.length; i++) {
        setState(() {
          isProjectPostExpanded.add(false);
        });
      }
      for (int i = 0; i < allProjectsPostData.length; i++) {
        for (int j = 0; j < allPostData.length; j++) {
          if (allPostData[j]["post_id"] == allProjectsPostData[i]["post_id"]) {
            setState(() {
              allPostLikeCount[j] = allProjectsPostData[i]["like_count"];
              allPostCommentCount[j] = allProjectsPostData[i]["comment_count"];
              allPostViewCount[j] = allProjectsPostData[i]["view_count"];
              allPostImpressionCount[j] =
                  allProjectsPostData[i]["impression_count"];
            });
          }
        }
      }
    });
  }

  Future<void> _get_all_blog_post_details() async {
    setState(() {
      allBlogPostData = allSocialPostLocalDB!.get("blogpost");
      for (int i = 0; i < allBlogPostData.length; i++) {
        for (int j = 0; j < allPostData.length; j++) {
          if (allPostData[j]["post_id"] == allBlogPostData[i]["post_id"]) {
            setState(() {
              allPostLikeCount[j] = allBlogPostData[i]["like_count"];
              allPostCommentCount[j] = allBlogPostData[i]["comment_count"];
              allPostViewCount[j] = allBlogPostData[i]["view_count"];
              allPostImpressionCount[j] =
                  allBlogPostData[i]["impression_count"];
            });
          }
        }
      }
    });
  }

  void _call_apis() {
    _get_all_users_data_for_tagging();
    _get_all_attached_images();
    _get_all_attached_videos();
    _get_all_tagged_users();
    _get_all_post_details();
    _get_all_blog_post_details();
    _get_all_mood_post_details();
    _get_all_comment_post_details();
    _get_all_reply_post_details();
    _get_all_cause_post_details();
    _get_all_bideas_post_details();
    _get_all_project_post_details();
  }

  void initState() {
    userDataDB = Hive.box<dynamic>('userdata');
    allSocialPostLocalDB = Hive.box<dynamic>('allsocialposts');
    _call_apis();
    _scrollController = ScrollController();
    super.initState();
  }

  void dispose() {
    databaseReference
        .child("hysweb")
        .child("social")
        .child("jump_to_listview_index")
        .update({"$_currentUserId": 0});
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    databaseReference.child("hysweb").once().then((DataSnapshot snapshot) {
      setState(() {
        if (mounted) {
          setState(() {
            countData = snapshot;
          });
        }
      });
    });
    _width = MediaQuery.of(context).size.width;
    comparedate = DateFormat('yyyyMMddkkmm').format(DateTime.now());
    if ((countData != null)) {
      return SingleChildScrollView(
        child: ScrollablePositionedList.builder(
            physics: BouncingScrollPhysics(),
            shrinkWrap: true,
            itemCount: allPostData.length,
            initialScrollIndex: countData!.value["social"]
                ["jump_to_listview_index"][_currentUserId],
            itemScrollController: itemScrollController,
            itemPositionsListener: itemPositionsListener,
            itemBuilder: (context, i) {
              String check = allPostData[i]["post_type"].toString().length > 7
                  ? allPostData[i]["post_type"].toString().substring(0, 6)
                  : "";

              return i == 0
                  ? _ifIisZero()
                  : check == "shared"
                      ? _smSharedPost(allPostData[i]["post_id"], i)
                      : allPostData[i]["post_type"] == "Mood"
                          ? _smMoodPost(allPostData[i]["post_id"], i)
                          : allPostData[i]["post_type"] ==
                                  "cause|teachunprevilagedKids"
                              ? _smEventPost(allPostData[i]["post_id"], i)
                              : allPostData[i]["post_type"] == "businessideas"
                                  ? _businessIdeas(allPostData[i]["post_id"], i)
                                  : allPostData[i]["post_type"] ==
                                          "projectdiscuss"
                                      ? _projectDiscuss(
                                          allPostData[i]["post_id"], i)
                                      : allPostData[i]["post_type"] == "blog"
                                          ? _smBlogPost(
                                              allPostData[i]["post_id"], i)
                                          : SizedBox();
            }),
      );
    } else {
      return _loading();
    }
  }

  _ifIisZero() {
    String check = allPostData[0]["post_type"].toString().length > 7
        ? allPostData[0]["post_type"].toString().substring(0, 6)
        : "";
    return Column(
      children: [
        SizedBox(height: 40),
        _width! > 600
            ? Container(
                width: 500,
                padding: EdgeInsets.fromLTRB(20, 10, 20, 10),
                decoration: BoxDecoration(
                  borderRadius: BorderRadius.circular(10),
                  color: light,
                ),
                child: Row(
                  mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                  children: [
                    InkWell(
                      onTap: () {
                        databaseReference
                            .child("hysweb")
                            .child("app_bar_navigation")
                            .child(FirebaseAuth.instance.currentUser!.uid)
                            .update({"$_currentUserId": 5});
                      },
                      child: CircleAvatar(
                        backgroundImage:
                            NetworkImage(userDataDB!.get("profilepic")),
                        radius: 25,
                      ),
                    ),
                    InkWell(
                      onTap: () {
                        _addSocialPostDialog();
                      },
                      child: Container(
                          width: 350,
                          padding: EdgeInsets.all(8),
                          decoration: BoxDecoration(
                              borderRadius: BorderRadius.circular(100),
                              color: background),
                          child: Text(
                              "How's your mood, ${userDataDB!.get("first_name")}?",
                              style: TextStyle(
                                  color: lightGrey,
                                  fontSize: 16,
                                  fontWeight: FontWeight.normal))),
                    ),
                  ],
                ),
              )
            : Container(
                width: _width! - 30,
                padding: EdgeInsets.fromLTRB(20, 10, 20, 10),
                decoration: BoxDecoration(
                  borderRadius: BorderRadius.circular(10),
                  color: light,
                ),
                child: Row(
                  mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                  children: [
                    CircleAvatar(
                      backgroundImage:
                          NetworkImage(userDataDB!.get("profilepic")),
                      radius: 25,
                    ),
                    InkWell(
                      onTap: () {
                        _addSocialPostDialog();
                      },
                      child: Container(
                          width: _width! - 150,
                          padding: EdgeInsets.all(8),
                          decoration: BoxDecoration(
                              borderRadius: BorderRadius.circular(100),
                              color: background),
                          child: Text(
                              "How's your mood, ${userDataDB!.get("first_name")}?",
                              style: TextStyle(
                                  color: lightGrey,
                                  fontSize: 14,
                                  fontWeight: FontWeight.normal))),
                    ),
                  ],
                ),
              ),
        SizedBox(height: 20),
        _width! > 600
            ? Container(
                height: 110,
                width: 500,
                padding: EdgeInsets.all(5),
                color: Color.fromRGBO(242, 246, 248, 1),
                child: ListView.builder(
                  itemCount: _scrollPostType.length,
                  scrollDirection: Axis.horizontal,
                  physics: BouncingScrollPhysics(),
                  itemBuilder: (context, index) {
                    return Container(
                      padding: EdgeInsets.all(5),
                      margin: EdgeInsets.only(left: 8, right: 8),
                      child: Column(
                        mainAxisAlignment: MainAxisAlignment.center,
                        crossAxisAlignment: CrossAxisAlignment.center,
                        children: [
                          Stack(
                            children: [
                              InkWell(
                                  onTap: () {
                                    // if ((_scrollPostType[index] ==
                                    //     "podcast")) {
                                    //   Navigator.push(
                                    //       context,
                                    //       MaterialPageRoute(
                                    //           builder: (context) =>
                                    //               SpecificSocialPost(
                                    //                   _scrollPostType[
                                    //                       index])));
                                    // } else if ((_scrollPostType[index] ==
                                    //     "blog")) {
                                    //   Navigator.push(
                                    //       context,
                                    //       MaterialPageRoute(
                                    //           builder: (context) =>
                                    //               SpecificSocialPost(
                                    //                   "blog")));
                                    // } else if ((_scrollPostType[index] ==
                                    //     "uploads")) {
                                    //   Navigator.push(
                                    //       context,
                                    //       MaterialPageRoute(
                                    //           builder: (context) =>
                                    //               AllUploadsView()));
                                    // } else {
                                    //   Navigator.push(
                                    //       context,
                                    //       MaterialPageRoute(
                                    //           builder: (context) =>
                                    //               SpecificSocialPost(
                                    //                   _scrollPostType[
                                    //                       index])));
                                    // }
                                  },
                                  child: Container(
                                    height: 50,
                                    width: 50,
                                    decoration: new BoxDecoration(
                                      shape: BoxShape.circle,
                                      border: Border.all(
                                          color: const Color(0xff0962ff)),
                                    ),
                                    child: ClipRRect(
                                        borderRadius:
                                            BorderRadius.circular(25.0),
                                        child: Image.network(
                                          _scrollImg[index],
                                          fit: BoxFit.contain,
                                        )),
                                  )),
                            ],
                          ),
                          SizedBox(height: 5),
                          Text(
                            (_scrollName[index]).toString(),
                            style:
                                TextStyle(fontSize: 12, color: Colors.black54),
                          ),
                        ],
                      ),
                    );
                  },
                ))
            : Container(
                height: 90,
                width: _width! - 30,
                padding: EdgeInsets.all(5),
                color: Color.fromRGBO(242, 246, 248, 1),
                child: ListView.builder(
                  shrinkWrap: true,
                  itemCount: _scrollPostType.length,
                  scrollDirection: Axis.horizontal,
                  physics: BouncingScrollPhysics(),
                  itemBuilder: (context, index) {
                    return Container(
                      padding: EdgeInsets.all(5),
                      margin: EdgeInsets.only(left: 8, right: 8),
                      child: Column(
                        mainAxisAlignment: MainAxisAlignment.center,
                        crossAxisAlignment: CrossAxisAlignment.center,
                        children: [
                          Stack(
                            children: [
                              InkWell(
                                  onTap: () {
                                    // if ((_scrollPostType[index] ==
                                    //     "podcast")) {
                                    //   Navigator.push(
                                    //       context,
                                    //       MaterialPageRoute(
                                    //           builder: (context) =>
                                    //               SpecificSocialPost(
                                    //                   _scrollPostType[
                                    //                       index])));
                                    // } else if ((_scrollPostType[index] ==
                                    //     "blog")) {
                                    //   Navigator.push(
                                    //       context,
                                    //       MaterialPageRoute(
                                    //           builder: (context) =>
                                    //               SpecificSocialPost(
                                    //                   "blog")));
                                    // } else if ((_scrollPostType[index] ==
                                    //     "uploads")) {
                                    //   Navigator.push(
                                    //       context,
                                    //       MaterialPageRoute(
                                    //           builder: (context) =>
                                    //               AllUploadsView()));
                                    // } else {
                                    //   Navigator.push(
                                    //       context,
                                    //       MaterialPageRoute(
                                    //           builder: (context) =>
                                    //               SpecificSocialPost(
                                    //                   _scrollPostType[
                                    //                       index])));
                                    // }
                                  },
                                  child: Container(
                                    height: 40,
                                    width: 40,
                                    decoration: new BoxDecoration(
                                      shape: BoxShape.circle,
                                      border: Border.all(
                                          color: const Color(0xff0962ff)),
                                    ),
                                    child: ClipRRect(
                                        borderRadius:
                                            BorderRadius.circular(25.0),
                                        child: Image.network(
                                          _scrollImg[index],
                                          fit: BoxFit.contain,
                                        )),
                                  )),
                            ],
                          ),
                          SizedBox(height: 5),
                          Text(
                            (_scrollName[index]).toString(),
                            style:
                                TextStyle(fontSize: 10, color: Colors.black54),
                          ),
                        ],
                      ),
                    );
                  },
                )),
        check == "shared"
            ? _smSharedPost(allPostData[0]["post_id"], 0)
            : allPostData[0]["post_type"] == "Mood"
                ? _smMoodPost(allPostData[0]["post_id"], 0)
                : allPostData[0]["post_type"] == "cause|teachunprevilagedKids"
                    ? _smEventPost(allPostData[0]["post_id"], 0)
                    : allPostData[0]["post_type"] == "businessideas"
                        ? _businessIdeas(allPostData[0]["post_id"], 0)
                        : allPostData[0]["post_type"] == "projectdiscuss"
                            ? _projectDiscuss(allPostData[0]["post_id"], 0)
                            : allPostData[0]["post_type"] == "blog"
                                ? _smBlogPost(allPostData[0]["post_id"], 0)
                                : SizedBox()
      ],
    );
  }

  // view post
  _smMoodPost(String postID, int allPostIndex) {
    List selectedImages = [];
    List selectedVideos = [];
    List selectedVideoThumbnails = [];
    List taggedUsers = [];
    int i = -1;
    for (int j = 0; j < allMoodPostData.length; j++) {
      if (allMoodPostData[j]["post_id"] == postID) {
        i = j;
        break;
      }
    }

    for (int j = 0; j < allImagesData.length; j++) {
      if (allImagesData[j]["imagelist_id"] ==
          allMoodPostData[i]["imagelist_id"]) {
        selectedImages.add(allImagesData[j]["image"]);
      }
    }
    for (int j = 0; j < allVideosData.length; j++) {
      if (allVideosData[j]["videolist_id"] ==
          allMoodPostData[i]["videolist_id"]) {
        selectedVideos.add(allVideosData[j]["video"]);
        selectedVideoThumbnails.add(allVideosData[j]["thumbnail"]);
      }
    }
    for (int j = 0; j < allTaggedUsersData.length; j++) {
      if (allTaggedUsersData[j]["usertaglist_id"] ==
          allMoodPostData[i]["usertaglist_id"]) {
        taggedUsers.add(allTaggedUsersData[j]["user_id"]);
      }
    }
    return i != -1
        ? Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Container(
                width: _width! > 550 ? 500 : _width! - 30,
                padding: EdgeInsets.all(10),
                margin: EdgeInsets.only(top: 20),
                decoration: BoxDecoration(
                    color: Color.fromRGBO(242, 246, 248, 1),
                    borderRadius: BorderRadius.circular(10)),
                child: Column(
                  children: [
                    Padding(
                      padding: const EdgeInsets.only(left: (15.0), right: 10),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Container(
                            child: Row(
                              children: [
                                InkWell(
                                  child: CircleAvatar(
                                    child: ClipOval(
                                      child: Container(
                                        child: CachedNetworkImage(
                                          imageUrl: allMoodPostData[i]
                                              ["profilepic"],
                                          width: 40,
                                          height: 40,
                                          fit: BoxFit.cover,
                                          placeholder: (context, url) =>
                                              Container(
                                                  width: 40,
                                                  height: 40,
                                                  color: Colors.white,
                                                  child: Image.network(
                                                    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                                  )),
                                          errorWidget: (context, url, error) =>
                                              Icon(Icons.error),
                                        ),
                                      ),
                                    ),
                                  ),
                                ),
                                SizedBox(
                                  width: 10,
                                ),
                                _chooseHeaderToViewSMPost(
                                    allMoodPostData[i]["user_mood"], i, [], []),
                              ],
                            ),
                          ),
                          IconButton(
                              icon: Icon(FontAwesome5.ellipsis_h,
                                  color: Color.fromRGBO(0, 0, 0, 0.8),
                                  size: 13),
                              onPressed: () {}),
                        ],
                      ),
                    ),
                    InkWell(
                      onTap: () {
                        setState(() {
                          isPostExpanded[allPostIndex] =
                              !isPostExpanded[allPostIndex];
                        });
                      },
                      child: Container(
                        width: MediaQuery.of(context).size.width - 30,
                        margin: EdgeInsets.fromLTRB(10, 10, 0, 2),
                        child: ReadMoreText(
                          isPostExpanded[allPostIndex] == false
                              ? allMoodPostData[i]["message"]
                                          .toString()
                                          .length <
                                      40
                                  ? allMoodPostData[i]["message"]
                                  : "${allMoodPostData[i]["message"].toString().substring(0, 40)}..."
                              : allMoodPostData[i]["message"],
                          textAlign: TextAlign.left,
                          trimLines: 4,
                          colorClickableText: Color(0xff0962ff),
                          trimMode: TrimMode.Line,
                          trimCollapsedText: 'read more',
                          trimExpandedText: 'Show less',
                          style: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 14,
                            color: Color.fromRGBO(0, 0, 0, 0.8),
                            fontWeight: FontWeight.w400,
                          ),
                          lessStyle: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 12,
                            color: Color(0xff0962ff),
                            fontWeight: FontWeight.w700,
                          ),
                          moreStyle: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 12,
                            color: Color(0xff0962ff),
                            fontWeight: FontWeight.w700,
                          ),
                        ),
                      ),
                    ),
                    selectedImages.length > 0
                        ? viewAllImages(selectedImages)
                        : SizedBox(),
                    // video.length > 0 ? showSelectedVideos(i) : SizedBox(),
                    Container(
                      padding: EdgeInsets.fromLTRB(10, 10, 10, 0),
                      child: Column(
                        mainAxisAlignment: MainAxisAlignment.center,
                        children: [
                          Padding(
                            padding:
                                const EdgeInsets.only(left: 8.0, right: 8.0),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.spaceBetween,
                              children: [
                                InkWell(
                                  onTap: () {},
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: [
                                        Text(
                                          allPostLikeCount[allPostIndex]
                                              .toString(),
                                          style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              color: Color.fromRGBO(
                                                  205, 61, 61, 1)),
                                        ),
                                        SizedBox(
                                          width: 4,
                                        ),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flike.png?alt=media&token=196c9359-8b79-4dbe-ad4f-650dd13a6d18",
                                            height: 15,
                                            width: 15),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flaugh.png?alt=media&token=28061e76-ddc3-4a65-a4dd-e8c565f9dbd4",
                                            height: 15,
                                            width: 15),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fwow.png?alt=media&token=753eae20-2ba2-4c77-ac54-24c520a4174e",
                                            height: 15,
                                            width: 15),
                                      ],
                                    ),
                                  ),
                                ),
                                InkWell(
                                  onTap: () {},
                                  child: Container(
                                    child: RichText(
                                      text: TextSpan(
                                          text:
                                              allPostCommentCount[allPostIndex]
                                                  .toString(),
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            color:
                                                Color.fromRGBO(205, 61, 61, 1),
                                          ),
                                          children: const <TextSpan>[
                                            TextSpan(
                                              text: ' Comments',
                                              style: TextStyle(
                                                fontFamily: 'Nunito Sans',
                                                fontSize: 12,
                                                color: Color.fromRGBO(
                                                    0, 0, 0, 0.8),
                                                fontWeight: FontWeight.w500,
                                              ),
                                            )
                                          ]),
                                    ),
                                  ),
                                ),
                                Container(
                                  child: Row(
                                    children: [
                                      SizedBox(
                                        width: 30,
                                      ),
                                      Text(
                                        (allPostViewCount[allPostIndex] +
                                                allPostImpressionCount[
                                                    allPostIndex])
                                            .toString(),
                                        style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            color:
                                                Color.fromRGBO(205, 61, 61, 1)),
                                      ),
                                      SizedBox(
                                        width: 4,
                                      ),
                                      Icon(FontAwesome5.eye,
                                          color: Color.fromRGBO(0, 0, 0, 0.8),
                                          size: 12),
                                    ],
                                  ),
                                )
                              ],
                            ),
                          ),
                          Container(
                              margin:
                                  EdgeInsets.only(left: 2, right: 2, top: 5),
                              color: Colors.black.withOpacity(0.2),
                              height: 0.5,
                              width: MediaQuery.of(context).size.width),
                          Padding(
                            padding:
                                const EdgeInsets.only(left: 8.0, right: 8.0),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.spaceBetween,
                              children: [
                                Container(
                                  padding: EdgeInsets.only(top: 15, bottom: 15),
                                  child: Row(
                                    children: [
                                      Builder(builder: (ctx) {
                                        return ReactionButton<String>(
                                            onReactionChanged: (String? value) {
                                              print(value);
                                              setState(() {
                                                if (allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    'likeinit') {
                                                  allPostLikeCount[
                                                          allPostIndex] =
                                                      allPostLikeCount[
                                                              allPostIndex] +
                                                          1;
                                                  networkCRUD
                                                      .addSmPostLikeDetailsAdvancedLogic([
                                                    "TRUE",
                                                    allMoodPostData[i]
                                                        ["post_id"],
                                                    _currentUserId,
                                                    "Mood",
                                                    value,
                                                    allPostLikeCount[
                                                        allPostIndex],
                                                    allPostCommentCount[
                                                        allPostIndex],
                                                    allPostViewCount[
                                                        allPostIndex],
                                                    allPostImpressionCount[
                                                        allPostIndex],
                                                    0
                                                  ]);
                                                  ////////////////////////////notification//////////////////////////////////////
                                                  String notify_id =
                                                      "ntf${allMoodPostData[i]["post_id"]}$comparedate";
                                                  notifyCRUD.sendNotification([
                                                    notify_id,
                                                    "reaction",
                                                    "social",
                                                    _currentUserId,
                                                    allMoodPostData[i]
                                                        ["user_id"],
                                                    countData!.value[
                                                                "usertoken"][
                                                            allMoodPostData[i]
                                                                ["user_id"]]
                                                        ["tokenid"],
                                                    "You got one reaction!",
                                                    "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} reacted on your post.",
                                                    allMoodPostData[i]
                                                        ["user_id"],
                                                    "Mood",
                                                    "false",
                                                    comparedate,
                                                    "add"
                                                  ]);
                                                  //////////////////////////////////////////////////////////////////////////

                                                  allPostLikeDataLocal[
                                                      allPostIndex] = value;
                                                } else if (allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    value) {
                                                  allPostLikeDataLocal[
                                                          allPostIndex] =
                                                      "likeinit";
                                                } else {
                                                  allPostLikeDataLocal[
                                                      allPostIndex] = value;
                                                }
                                              });
                                            },
                                            reactions: reaction,
                                            initialReaction: allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    "Like"
                                                ? reaction[0]
                                                : allPostLikeDataLocal[
                                                            allPostIndex] ==
                                                        "Love"
                                                    ? reaction[1]
                                                    : allPostLikeDataLocal[
                                                                allPostIndex] ==
                                                            "Haha"
                                                        ? reaction[2]
                                                        : allPostLikeDataLocal[
                                                                    allPostIndex] ==
                                                                "Yay"
                                                            ? reaction[3]
                                                            : allPostLikeDataLocal[
                                                                        allPostIndex] ==
                                                                    "Wow"
                                                                ? reaction[4]
                                                                : allPostLikeDataLocal[
                                                                            allPostIndex] ==
                                                                        "Angry"
                                                                    ? reaction[
                                                                        5]
                                                                    : Reaction(
                                                                        value:
                                                                            null,
                                                                        icon:
                                                                            Row(
                                                                          children: const [
                                                                            Icon(FontAwesome5.thumbs_up,
                                                                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                                                                size: 14),
                                                                            Text(
                                                                              "  Like",
                                                                              style: TextStyle(fontSize: 13, fontWeight: FontWeight.w700, color: Colors.black45),
                                                                            )
                                                                          ],
                                                                        ),
                                                                      ));
                                      }),
                                    ],
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    setState(() {
                                      selectedPostIndexToComment = allPostIndex;
                                    });
                                    _addCommentDialogBox();
                                  },
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: const [
                                        Icon(FontAwesome5.comment,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 14),
                                        Text(
                                          "  Comment",
                                          style: TextStyle(
                                              fontSize: 13,
                                              fontWeight: FontWeight.w700,
                                              color: Colors.black45),
                                        )
                                      ],
                                    ),
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    _shareSocialPostDialog(i, allPostIndex);
                                  },
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: const [
                                        Icon(FontAwesome5.share,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 14),
                                        Text(
                                          "  Share",
                                          style: TextStyle(
                                              fontSize: 13,
                                              fontWeight: FontWeight.w700,
                                              color: Colors.black45),
                                        )
                                      ],
                                    ),
                                  ),
                                ),
                              ],
                            ),
                          ),
                          Container(
                              margin:
                                  EdgeInsets.only(left: 2, right: 2, top: 5),
                              color: Colors.black.withOpacity(0.2),
                              height: 0.5,
                              width: MediaQuery.of(context).size.width),
                          SizedBox(height: 10),
                          _commentView(allPostIndex)
                        ],
                      ),
                    ),
                  ],
                ),
              ),
            ],
          )
        : SizedBox();
  }

  _smEventPost(String postID, int allPostIndex) {
    List selectedImages = [];
    List selectedVideos = [];
    List selectedVideoThumbnails = [];
    List taggedUsers = [];
    int i = -1;
    for (int j = 0; j < allCausePostData.length; j++) {
      if (allCausePostData[j]["post_id"] == postID) {
        i = j;
        break;
      }
    }
    for (int j = 0; j < allImagesData.length; j++) {
      if (allImagesData[j]["imagelist_id"] ==
          allCausePostData[i]["imagelist_id"]) {
        selectedImages.add(allImagesData[j]["image"]);
      }
    }
    for (int j = 0; j < allVideosData.length; j++) {
      if (allVideosData[j]["videolist_id"] ==
          allCausePostData[i]["videolist_id"]) {
        selectedVideos.add(allVideosData[j]["video"]);
        selectedVideoThumbnails.add(allVideosData[j]["thumbnail"]);
      }
    }
    for (int j = 0; j < allTaggedUsersData.length; j++) {
      if (allTaggedUsersData[j]["usertaglist_id"] ==
          allCausePostData[i]["usertaglist_id"]) {
        taggedUsers.add(allTaggedUsersData[j]["user_id"]);
      }
    }
    bool whiteflag = false;
    if (allCausePostData[i]["themeindex"] == 0 ||
        allCausePostData[i]["themeindex"] == 2 ||
        allCausePostData[i]["themeindex"] == 4 ||
        allCausePostData[i]["themeindex"] == 5) {
      whiteflag = true;
    }
    return i != -1
        ? Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Container(
                  width: _width! > 550 ? 500 : _width! - 30,
                  padding: EdgeInsets.all(10),
                  margin: EdgeInsets.only(top: 20),
                  decoration: BoxDecoration(
                      color: Color.fromRGBO(242, 246, 248, 1),
                      borderRadius: BorderRadius.circular(10)),
                  child: Column(children: [
                    Padding(
                      padding: const EdgeInsets.only(left: (5.0), right: 2),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Container(
                            child: Row(
                              children: [
                                InkWell(
                                  child: CircleAvatar(
                                    child: ClipOval(
                                      child: Container(
                                        child: CachedNetworkImage(
                                          imageUrl: allCausePostData[i]
                                              ["profilepic"],
                                          width: 40,
                                          height: 40,
                                          fit: BoxFit.cover,
                                          placeholder: (context, url) =>
                                              Container(
                                                  width: 40,
                                                  height: 40,
                                                  color: Colors.white,
                                                  child: Image.network(
                                                    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                                  )),
                                          errorWidget: (context, url, error) =>
                                              Icon(Icons.error),
                                        ),
                                      ),
                                    ),
                                  ),
                                ),
                                SizedBox(
                                  width: 10,
                                ),
                                Container(
                                  child: Column(
                                    crossAxisAlignment:
                                        CrossAxisAlignment.start,
                                    children: [
                                      Row(children: [
                                        Text(
                                          allCausePostData[i]["first_name"] +
                                              " " +
                                              allCausePostData[i]["last_name"],
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 15,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            fontWeight: FontWeight.bold,
                                          ),
                                        ),
                                        Text('   has Created a Cause ',
                                            style: TextStyle(
                                                fontSize: 13,
                                                color: Colors.black87,
                                                fontWeight: FontWeight.w600)),
                                        Container(
                                            height: 20,
                                            width: 20,
                                            child: Image.network(
                                                'https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2FcauseEmoji.png?alt=media&token=e088aaec-3089-4773-8fb2-fc5e54e3c731')),
                                      ]),
                                      Row(
                                        children: [
                                          Text(
                                              'to Educate UnderPrivileged Childrens.',
                                              style: TextStyle(
                                                fontSize: 15,
                                                color: Color.fromRGBO(
                                                    0, 0, 0, 0.75),
                                                fontWeight: FontWeight.bold,
                                              ))
                                        ],
                                      ),
                                    ],
                                  ),
                                ),
                              ],
                            ),
                          ),
                          IconButton(
                              icon: Icon(FontAwesome5.ellipsis_h,
                                  color: Color.fromRGBO(0, 0, 0, 0.8),
                                  size: 10),
                              onPressed: () {}),
                        ],
                      ),
                    ),
                    InkWell(
                      onTap: () {},
                      child: Container(
                        width: MediaQuery.of(context).size.width - 30,
                        margin: EdgeInsets.fromLTRB(10, 10, 0, 2),
                        child: ReadMoreText(
                          allCausePostData[i]["message"],
                          textAlign: TextAlign.left,
                          trimLines: 4,
                          colorClickableText: Color(0xff0962ff),
                          trimMode: TrimMode.Line,
                          trimCollapsedText: 'read more',
                          trimExpandedText: 'Show less',
                          style: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 14,
                            color: Color.fromRGBO(0, 0, 0, 0.8),
                            fontWeight: FontWeight.w400,
                          ),
                          lessStyle: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 12,
                            color: Color(0xff0962ff),
                            fontWeight: FontWeight.w700,
                          ),
                          moreStyle: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 12,
                            color: Color(0xff0962ff),
                            fontWeight: FontWeight.w700,
                          ),
                        ),
                      ),
                    ),
                    SizedBox(height: 10),
                    (selectedImages.isNotEmpty)
                        ? Container(
                            height: 250,
                            width: MediaQuery.of(context).size.width,
                            child: Image.network(selectedImages[0],
                                fit: BoxFit.contain))
                        : SizedBox(),
                    Container(
                      decoration: BoxDecoration(
                          image: DecorationImage(
                              colorFilter: new ColorFilter.mode(
                                  Colors.black.withOpacity(0.8),
                                  BlendMode.dstATop),
                              image: AssetImage(allCausePostData[i]["theme"]),
                              fit: BoxFit.fill)),
                      child: Padding(
                        padding: const EdgeInsets.all(8.0),
                        child: Row(children: [
                          Column(
                              mainAxisAlignment: MainAxisAlignment.start,
                              crossAxisAlignment: CrossAxisAlignment.start,
                              children: [
                                Container(
                                  height: 20,
                                  child: Text('Class :',
                                      style: TextStyle(
                                          fontSize: 13,
                                          fontWeight: FontWeight.w700,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87)),
                                ),
                                SizedBox(
                                  height: 5,
                                ),
                                Container(
                                  height: 20,
                                  child: Text('Subject :',
                                      style: TextStyle(
                                          fontSize: 13,
                                          fontWeight: FontWeight.w700,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87)),
                                ),
                                SizedBox(
                                  height: 5,
                                ),
                                Container(
                                  height: 20,
                                  child: Text('Frequency :',
                                      style: TextStyle(
                                          fontSize: 13,
                                          fontWeight: FontWeight.w700,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87)),
                                ),
                                SizedBox(
                                  height: 5,
                                ),
                                Container(
                                  height: 20,
                                  child: Text('Date :',
                                      style: TextStyle(
                                          fontSize: 13,
                                          fontWeight: FontWeight.w700,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87)),
                                ),
                                SizedBox(
                                  height: 5,
                                ),
                                Container(
                                  height: 20,
                                  child: Text('Time :',
                                      style: TextStyle(
                                          fontSize: 13,
                                          fontWeight: FontWeight.w700,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87)),
                                ),
                                SizedBox(
                                  height: 5,
                                ),
                                Container(
                                  height: 20,
                                  child: Text('Venue :',
                                      style: TextStyle(
                                          fontSize: 13,
                                          fontWeight: FontWeight.w700,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87)),
                                ),
                                SizedBox(
                                  height: 5,
                                ),
                              ]),
                          SizedBox(width: 4),
                          Column(
                              crossAxisAlignment: CrossAxisAlignment.start,
                              children: [
                                SizedBox(height: 5),
                                Container(
                                    width: 100,
                                    height: 20,
                                    child: Text(
                                      allCausePostData[i]["grade"].toString(),
                                      textAlign: TextAlign.start,
                                      style: TextStyle(
                                          fontWeight: FontWeight.w600,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87),
                                    )),
                                SizedBox(
                                  height: 5,
                                ),
                                Container(
                                    height: 20,
                                    width: 100,
                                    child: Text(
                                      allCausePostData[i]["subject"],
                                      style: TextStyle(
                                          fontWeight: FontWeight.w600,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87),
                                      textAlign: TextAlign.start,
                                    )),
                                SizedBox(
                                  height: 5,
                                ),
                                Container(
                                    height: 20,
                                    width: 100,
                                    child: Text(
                                      allCausePostData[i]["frequency"],
                                      style: TextStyle(
                                          fontWeight: FontWeight.w600,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87),
                                      textAlign: TextAlign.start,
                                    )),
                                SizedBox(
                                  height: 5,
                                ),
                                Container(
                                    height: 20,
                                    width: 100,
                                    child: Text(
                                      allCausePostData[i]["date"],
                                      style: TextStyle(
                                          fontWeight: FontWeight.w600,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87),
                                      textAlign: TextAlign.start,
                                    )),
                                SizedBox(
                                  height: 5,
                                ),
                                Container(
                                    width: 150,
                                    child: Text(
                                      allCausePostData[i]["from_"] +
                                          ' to ' +
                                          allCausePostData[i]["to_"],
                                      style: TextStyle(
                                          fontWeight: FontWeight.w600,
                                          color: whiteflag == true
                                              ? Colors.white
                                              : Colors.black87),
                                      textAlign: TextAlign.start,
                                    )),
                                SizedBox(
                                  height: 5,
                                ),
                                Row(children: [
                                  allCausePostData[i]["eventtype"] == "offline"
                                      ? Container(
                                          width: 150,
                                          child: Text(
                                            allCausePostData[i]["address"],
                                            style: TextStyle(
                                                fontWeight: FontWeight.w600,
                                                color: whiteflag == true
                                                    ? Colors.white
                                                    : Colors.black87),
                                            textAlign: TextAlign.start,
                                          ))
                                      : Container(
                                          width: 150,
                                          child: Text(
                                            "HyS Online Meet",
                                            style: TextStyle(
                                                fontWeight: FontWeight.w600,
                                                color: whiteflag == true
                                                    ? Colors.white
                                                    : Colors.black87),
                                            textAlign: TextAlign.start,
                                          )),
                                  allCausePostData[i]["eventtype"] == "offline"
                                      ? InkWell(
                                          onTap: () {},
                                          child: Text(
                                            '(Map to Venue)',
                                            style: TextStyle(
                                                fontWeight: FontWeight.w600,
                                                color: Colors.blue),
                                          ))
                                      : SizedBox(),
                                ]),
                                SizedBox(height: 10),
                              ]),
                        ]),
                      ),
                    ),
                    SizedBox(
                      height: 10,
                    ),
                    Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Text(allCausePostData[i]["eventname"],
                              style: TextStyle(
                                  fontWeight: FontWeight.w700,
                                  fontSize: 15,
                                  color: Color.fromRGBO(88, 165, 196, 1))),
                          Container(
                              child: Row(children: [
                            Text(
                                allCausePostData[i]["date"].toString() +
                                    ' ' +
                                    allCausePostData[i]["from_"].toString() +
                                    ' to ' +
                                    allCausePostData[i]["to_"].toString(),
                                style: TextStyle(
                                    fontWeight: FontWeight.w700,
                                    fontSize: 14,
                                    color: Color.fromRGBO(88, 165, 196, 1))),
                          ]))
                        ]),
                    SizedBox(
                      height: 10,
                    ),
                    Container(
                        padding: EdgeInsets.fromLTRB(10, 10, 10, 0),
                        child: Column(
                            mainAxisAlignment: MainAxisAlignment.center,
                            children: [
                              Padding(
                                  padding: const EdgeInsets.only(
                                      left: 8.0, right: 8.0),
                                  child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.spaceBetween,
                                      children: [
                                        InkWell(
                                          onTap: () {},
                                          child: Container(
                                            child: Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              children: [
                                                Text(
                                                  allPostLikeCount[allPostIndex]
                                                      .toString(),
                                                  style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      color: Color.fromRGBO(
                                                          205, 61, 61, 1)),
                                                ),
                                                SizedBox(
                                                  width: 4,
                                                ),
                                                Image.network(
                                                    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flike.png?alt=media&token=196c9359-8b79-4dbe-ad4f-650dd13a6d18",
                                                    height: 15,
                                                    width: 15),
                                                Image.network(
                                                    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flaugh.png?alt=media&token=28061e76-ddc3-4a65-a4dd-e8c565f9dbd4",
                                                    height: 15,
                                                    width: 15),
                                                Image.network(
                                                    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fwow.png?alt=media&token=753eae20-2ba2-4c77-ac54-24c520a4174e",
                                                    height: 15,
                                                    width: 15),
                                              ],
                                            ),
                                          ),
                                        ),
                                        InkWell(
                                          onTap: () {},
                                          child: Container(
                                            child: RichText(
                                              text: TextSpan(
                                                  text: allPostCommentCount[
                                                          allPostIndex]
                                                      .toString(),
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    color: Color.fromRGBO(
                                                        205, 61, 61, 1),
                                                  ),
                                                  children: <TextSpan>[
                                                    TextSpan(
                                                      text: ' Comments',
                                                      style: TextStyle(
                                                        fontFamily:
                                                            'Nunito Sans',
                                                        fontSize: 12,
                                                        color: Color.fromRGBO(
                                                            0, 0, 0, 0.8),
                                                        fontWeight:
                                                            FontWeight.w500,
                                                      ),
                                                    )
                                                  ]),
                                            ),
                                          ),
                                        ),
                                        Container(
                                          child: Row(
                                            children: [
                                              SizedBox(
                                                width: 30,
                                              ),
                                              Text(
                                                (allPostViewCount[
                                                            allPostIndex] +
                                                        allPostImpressionCount[
                                                            allPostIndex])
                                                    .toString(),
                                                style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    color: Color.fromRGBO(
                                                        205, 61, 61, 1)),
                                              ),
                                              SizedBox(
                                                width: 4,
                                              ),
                                              Icon(FontAwesome5.eye,
                                                  color: Color.fromRGBO(
                                                      0, 0, 0, 0.8),
                                                  size: 12),
                                            ],
                                          ),
                                        )
                                      ]))
                            ])),
                    Container(
                        margin: EdgeInsets.only(left: 2, right: 2, top: 5),
                        color: Colors.black.withOpacity(0.2),
                        height: 0.5,
                        width: MediaQuery.of(context).size.width),
                    Padding(
                      padding: const EdgeInsets.only(left: 8.0, right: 8.0),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Container(
                            padding: EdgeInsets.only(top: 15, bottom: 15),
                            child: Row(
                              children: [
                                Builder(builder: (ctx) {
                                  return ReactionButton<String>(
                                      onReactionChanged: (String? value) {
                                        print(value);
                                        setState(() {
                                          if (allPostLikeDataLocal[
                                                  allPostIndex] ==
                                              'likeinit') {
                                            allPostLikeCount[allPostIndex] =
                                                allPostLikeCount[allPostIndex] +
                                                    1;
                                            networkCRUD
                                                .addSmPostLikeDetailsAdvancedLogic([
                                              "TRUE",
                                              allCausePostData[i]["post_id"],
                                              _currentUserId,
                                              "cause|teachunprevilagedKids",
                                              value,
                                              allPostLikeCount[allPostIndex],
                                              allPostCommentCount[allPostIndex],
                                              allPostViewCount[allPostIndex],
                                              allPostImpressionCount[
                                                  allPostIndex],
                                              0
                                            ]);
                                            ////////////////////////////notification//////////////////////////////////////
                                            String notify_id =
                                                "ntf${allCausePostData[i]["post_id"]}$comparedate";
                                            notifyCRUD.sendNotification([
                                              notify_id,
                                              "reaction",
                                              "social",
                                              _currentUserId,
                                              allCausePostData[i]["user_id"],
                                              countData!.value["usertoken"][
                                                  allCausePostData[i]
                                                      ["user_id"]]["tokenid"],
                                              "You got one reaction!",
                                              "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} reacted on your post.",
                                              allCausePostData[i]["user_id"],
                                              "cause",
                                              "false",
                                              comparedate,
                                              "add"
                                            ]);
                                            //////////////////////////////////////////////////////////////////////////

                                            allPostLikeDataLocal[allPostIndex] =
                                                value;
                                          } else if (allPostLikeDataLocal[
                                                  allPostIndex] ==
                                              value) {
                                            allPostLikeDataLocal[allPostIndex] =
                                                "likeinit";
                                          } else {
                                            allPostLikeDataLocal[allPostIndex] =
                                                value;
                                          }
                                        });
                                      },
                                      reactions: reaction,
                                      initialReaction: allPostLikeDataLocal[
                                                  allPostIndex] ==
                                              "Like"
                                          ? reaction[0]
                                          : allPostLikeDataLocal[
                                                      allPostIndex] ==
                                                  "Love"
                                              ? reaction[1]
                                              : allPostLikeDataLocal[
                                                          allPostIndex] ==
                                                      "Haha"
                                                  ? reaction[2]
                                                  : allPostLikeDataLocal[
                                                              allPostIndex] ==
                                                          "Yay"
                                                      ? reaction[3]
                                                      : allPostLikeDataLocal[
                                                                  allPostIndex] ==
                                                              "Wow"
                                                          ? reaction[4]
                                                          : allPostLikeDataLocal[
                                                                      allPostIndex] ==
                                                                  "Angry"
                                                              ? reaction[5]
                                                              : Reaction(
                                                                  value: null,
                                                                  icon: Row(
                                                                    children: const [
                                                                      Icon(
                                                                          FontAwesome5
                                                                              .thumbs_up,
                                                                          color: Color.fromRGBO(
                                                                              0,
                                                                              0,
                                                                              0,
                                                                              0.8),
                                                                          size:
                                                                              14),
                                                                      Text(
                                                                        "  Like",
                                                                        style: TextStyle(
                                                                            fontSize:
                                                                                13,
                                                                            fontWeight:
                                                                                FontWeight.w700,
                                                                            color: Colors.black45),
                                                                      )
                                                                    ],
                                                                  ),
                                                                ));
                                }),
                              ],
                            ),
                          ),
                          InkWell(
                            child: Container(
                              child: Row(
                                mainAxisAlignment: MainAxisAlignment.start,
                                children: [
                                  Icon(FontAwesome5.user_friends,
                                      color: Color.fromRGBO(0, 0, 0, 0.8),
                                      size: 14),
                                  Text(
                                    "   Join",
                                    style: TextStyle(
                                        fontSize: 13,
                                        fontWeight: FontWeight.w700,
                                        color: Colors.black45),
                                  )
                                ],
                              ),
                            ),
                          ),
                          InkWell(
                            onTap: () {
                              setState(() {
                                selectedPostIndexToComment = allPostIndex;
                              });
                              _addCommentDialogBox();
                            },
                            child: Container(
                              child: Row(
                                mainAxisAlignment: MainAxisAlignment.start,
                                children: const [
                                  Icon(FontAwesome5.comment,
                                      color: Color.fromRGBO(0, 0, 0, 0.8),
                                      size: 14),
                                  Text(
                                    "  Comment",
                                    style: TextStyle(
                                        fontSize: 13,
                                        fontWeight: FontWeight.w700,
                                        color: Colors.black45),
                                  )
                                ],
                              ),
                            ),
                          ),
                          InkWell(
                            onTap: () {
                              _shareSocialPostDialog(i, allPostIndex);
                            },
                            child: Container(
                              child: Row(
                                mainAxisAlignment: MainAxisAlignment.start,
                                children: const [
                                  Icon(FontAwesome5.share,
                                      color: Color.fromRGBO(0, 0, 0, 0.8),
                                      size: 14),
                                  Text(
                                    "  Share",
                                    style: TextStyle(
                                        fontSize: 13,
                                        fontWeight: FontWeight.w700,
                                        color: Colors.black45),
                                  )
                                ],
                              ),
                            ),
                          ),
                        ],
                      ),
                    ),
                    Container(
                        margin: EdgeInsets.only(left: 2, right: 2, top: 5),
                        color: Colors.black.withOpacity(0.2),
                        height: 0.5,
                        width: MediaQuery.of(context).size.width),
                    SizedBox(height: 10),
                    InkWell(
                        onTap: () {
                          //handlePressButton(context);
                        },
                        child: Row(
                          children: [
                            Icon(Icons.person_add),
                            Text(' Invite Friends To Join')
                          ],
                        )),
                    SizedBox(
                      height: 7,
                    ),
                    _commentView(allPostIndex)
                  ])),
            ],
          )
        : SizedBox();
  }

  _businessIdeas(String postID, int allPostIndex) {
    List selectedImages = [];
    List selectedVideos = [];
    List selectedVideoThumbnails = [];
    List taggedUsers = [];
    String allMembers = '';
    int i = -1;
    for (int j = 0; j < allBIdeasPostData.length; j++) {
      if (allBIdeasPostData[j]["post_id"] == postID) {
        i = j;
        break;
      }
    }

    for (int j = 0; j < allImagesData.length; j++) {
      if (allImagesData[j]["imagelist_id"] ==
          allBIdeasPostData[i]["documentlist_id"]) {
        selectedImages.add(allImagesData[j]["image"]);
      }
    }
    for (int j = 0; j < allVideosData.length; j++) {
      if (allVideosData[j]["videolist_id"] ==
          allBIdeasPostData[i]["videolist_id"]) {
        selectedVideos.add(allVideosData[j]["video"]);
        selectedVideoThumbnails.add(allVideosData[j]["thumbnail"]);
      }
    }
    for (int j = 0; j < allTaggedUsersData.length; j++) {
      if (allTaggedUsersData[j]["usertaglist_id"] ==
          allBIdeasPostData[i]["memberlist_id"]) {
        for (int k = 0; k < taggingData.length; k++) {
          if (allTaggedUsersData[j]["user_id"] == taggingData[k]["user_id"]) {
            taggedUsers.add(taggingData[k]["first_name"] +
                " " +
                taggingData[k]["last_name"] +
                " , ");
            allMembers = allMembers +
                taggingData[k]["first_name"] +
                " " +
                taggingData[k]["last_name"] +
                " , ";
          }
        }
      }
    }

    return i != -1
        ? Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Container(
                width: _width! > 550 ? 500 : _width! - 30,
                padding: EdgeInsets.all(10),
                margin: EdgeInsets.only(top: 20),
                decoration: BoxDecoration(
                    color: Color.fromRGBO(242, 246, 248, 1),
                    borderRadius: BorderRadius.circular(10)),
                child: Column(
                  children: [
                    Padding(
                      padding: const EdgeInsets.only(left: (5.0), right: 5),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Container(
                            child: Row(
                              children: [
                                InkWell(
                                  child: CircleAvatar(
                                    child: ClipOval(
                                      child: Container(
                                        child: CachedNetworkImage(
                                          imageUrl: allBIdeasPostData[i]
                                              ["profilepic"],
                                          width: 40,
                                          height: 40,
                                          fit: BoxFit.cover,
                                          placeholder: (context, url) =>
                                              Container(
                                                  width: 40,
                                                  height: 40,
                                                  color: Colors.white,
                                                  child: Image.network(
                                                    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                                  )),
                                          errorWidget: (context, url, error) =>
                                              Icon(Icons.error),
                                        ),
                                      ),
                                    ),
                                  ),
                                ),
                                SizedBox(
                                  width: 10,
                                ),
                                Container(
                                  child: Column(
                                    crossAxisAlignment:
                                        CrossAxisAlignment.start,
                                    children: [
                                      RichText(
                                        text: TextSpan(
                                            text: allBIdeasPostData[i]
                                                    ["first_name"] +
                                                " " +
                                                allBIdeasPostData[i]
                                                    ["last_name"],
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 15,
                                              color:
                                                  Color.fromRGBO(0, 0, 0, 0.8),
                                              fontWeight: FontWeight.bold,
                                            ),
                                            children: const <TextSpan>[
                                              TextSpan(
                                                text:
                                                    ' has Discussed a Business Idea',
                                                style: TextStyle(
                                                  fontFamily: 'Nunito Sans',
                                                  fontSize: 12,
                                                  color: Color.fromRGBO(
                                                      0, 0, 0, 0.7),
                                                  fontWeight: FontWeight.w500,
                                                ),
                                              )
                                            ]),
                                      ),
                                    ],
                                  ),
                                )
                              ],
                            ),
                          ),
                          IconButton(
                              icon: Icon(FontAwesome5.ellipsis_h,
                                  color: Color.fromRGBO(0, 0, 0, 0.8),
                                  size: 13),
                              onPressed: () {
                                //  moreOptionsSMPostViewer(context, i);
                              }),
                        ],
                      ),
                    ),
                    Container(
                        decoration: BoxDecoration(
                          borderRadius: BorderRadius.all(Radius.circular(10)),
                          image: DecorationImage(
                              colorFilter: new ColorFilter.mode(
                                  Colors.black.withOpacity(0.3),
                                  BlendMode.dstATop),
                              image: AssetImage(allBIdeasPostData[i]["theme"]),
                              fit: BoxFit.cover),
                        ),
                        width: _width! > 550 ? 460 : _width! - 60,
                        margin: EdgeInsets.fromLTRB(10, 10, 0, 2),
                        child: Padding(
                          padding: const EdgeInsets.all(10.0),
                          child: Column(
                            children: [
                              SizedBox(
                                height: 3,
                              ),
                              Container(
                                margin: EdgeInsets.only(bottom: 17),
                                width: _width! > 550 ? 400 : _width! - 100,
                                child: Row(
                                  mainAxisAlignment: MainAxisAlignment.start,
                                  children: [
                                    Text(
                                      "Title : ",
                                      style: TextStyle(
                                        fontFamily: 'Nunito Sans',
                                        fontSize: 14,
                                        fontWeight: FontWeight.w700,
                                      ),
                                    ),
                                    Text(
                                      allBIdeasPostData[i]["title"],
                                      style: TextStyle(
                                        fontFamily: 'Nunito Sans',
                                        fontSize: 14,
                                        fontWeight: FontWeight.w500,
                                      ),
                                    ),
                                  ],
                                ),
                              ),
                              SizedBox(
                                height: 17,
                              ),
                              Container(
                                margin: EdgeInsets.only(bottom: 17),
                                width: _width! > 550 ? 400 : _width! - 100,
                                child: Row(
                                    mainAxisAlignment: MainAxisAlignment.end,
                                    children: [
                                      InkWell(
                                        onTap: () {
                                          setState(() {
                                            isBIdeasPostExpanded[i] =
                                                !isBIdeasPostExpanded[i];
                                          });
                                        },
                                        child: Container(
                                          child: Text(
                                              isBIdeasPostExpanded[i] == false
                                                  ? "....See more"
                                                  : "Hide",
                                              style: TextStyle(
                                                  fontFamily: 'Nunito Sans',
                                                  fontSize: 14,
                                                  fontWeight: FontWeight.w600,
                                                  color: Colors.blue)),
                                        ),
                                      )
                                    ]),
                              ),
                              isBIdeasPostExpanded[i] == true
                                  ? Container(
                                      child: Column(children: [
                                      (allBIdeasPostData[i]["identification"] !=
                                              "")
                                          ? Container(
                                              margin:
                                                  EdgeInsets.only(bottom: 17),
                                              width: _width! > 550
                                                  ? 400
                                                  : _width! - 100,
                                              child: Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Text(
                                                    "Identifiction of problem : ",
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.w700,
                                                    ),
                                                  ),
                                                  Container(
                                                    width: 170,
                                                    child: Text(
                                                      allBIdeasPostData[i]
                                                          ["identification"],
                                                      style: TextStyle(
                                                        fontFamily:
                                                            'Nunito Sans',
                                                        fontSize: 14,
                                                        fontWeight:
                                                            FontWeight.w500,
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                            )
                                          : SizedBox(),
                                      (allBIdeasPostData[i]["solution"] != "")
                                          ? Container(
                                              margin:
                                                  EdgeInsets.only(bottom: 17),
                                              child: Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Text(
                                                    "Solution to identified Problem : ",
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.w700,
                                                    ),
                                                  ),
                                                  Container(
                                                    width: 170,
                                                    child: Text(
                                                      allBIdeasPostData[i]
                                                          ["solution"],
                                                      style: TextStyle(
                                                        fontFamily:
                                                            'Nunito Sans',
                                                        fontSize: 14,
                                                        fontWeight:
                                                            FontWeight.w500,
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                            )
                                          : SizedBox(),
                                      (allBIdeasPostData[i]["target"] != "")
                                          ? Container(
                                              width: _width! > 550
                                                  ? 400
                                                  : _width! - 100,
                                              margin:
                                                  EdgeInsets.only(bottom: 17),
                                              child: Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Text(
                                                    "Target market : ",
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.w700,
                                                    ),
                                                  ),
                                                  Container(
                                                    width: 250,
                                                    child: Text(
                                                      allBIdeasPostData[i]
                                                          ["target"],
                                                      style: TextStyle(
                                                        fontFamily:
                                                            'Nunito Sans',
                                                        fontSize: 14,
                                                        fontWeight:
                                                            FontWeight.w500,
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                            )
                                          : SizedBox(),
                                      (allBIdeasPostData[i]["competitors"] !=
                                              "")
                                          ? Container(
                                              width: _width! > 550
                                                  ? 400
                                                  : _width! - 100,
                                              margin:
                                                  EdgeInsets.only(bottom: 17),
                                              child: Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Text(
                                                    "Competitors : ",
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.w700,
                                                    ),
                                                  ),
                                                  Container(
                                                    width: 250,
                                                    child: Text(
                                                      allBIdeasPostData[i]
                                                          ["competitors"],
                                                      style: TextStyle(
                                                        fontFamily:
                                                            'Nunito Sans',
                                                        fontSize: 14,
                                                        fontWeight:
                                                            FontWeight.w500,
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                            )
                                          : SizedBox(),
                                      (allBIdeasPostData[i]["swot"] != "")
                                          ? Container(
                                              width: _width! > 550
                                                  ? 400
                                                  : _width! - 100,
                                              margin:
                                                  EdgeInsets.only(bottom: 17),
                                              child: Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Text(
                                                    "SWOT Analysis : ",
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.w700,
                                                    ),
                                                  ),
                                                  Container(
                                                    width: 250,
                                                    child: Text(
                                                      allBIdeasPostData[i]
                                                          ["swot"],
                                                      style: TextStyle(
                                                        fontFamily:
                                                            'Nunito Sans',
                                                        fontSize: 14,
                                                        fontWeight:
                                                            FontWeight.w500,
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                            )
                                          : SizedBox(),
                                      (allBIdeasPostData[i]["funds"] != "")
                                          ? Container(
                                              width: _width! > 550
                                                  ? 400
                                                  : _width! - 100,
                                              margin:
                                                  EdgeInsets.only(bottom: 17),
                                              child: Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Text(
                                                    "Funds required : ",
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.w700,
                                                    ),
                                                  ),
                                                  Container(
                                                    width: 250,
                                                    child: Text(
                                                      allBIdeasPostData[i]
                                                          ["funds"],
                                                      style: TextStyle(
                                                        fontFamily:
                                                            'Nunito Sans',
                                                        fontSize: 14,
                                                        fontWeight:
                                                            FontWeight.w500,
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                            )
                                          : SizedBox(),
                                      (allMembers != "")
                                          ? Container(
                                              width: _width! > 550
                                                  ? 400
                                                  : _width! - 100,
                                              margin:
                                                  EdgeInsets.only(bottom: 17),
                                              child: Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                mainAxisSize: MainAxisSize.min,
                                                children: [
                                                  Text(
                                                    "Team members : ",
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.w700,
                                                    ),
                                                  ),
                                                  Container(
                                                    width: 250,
                                                    child: Text(
                                                      allMembers,
                                                      style: TextStyle(
                                                        fontFamily:
                                                            'Nunito Sans',
                                                        fontSize: 14,
                                                        fontWeight:
                                                            FontWeight.w500,
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                            )
                                          : SizedBox(),
                                      (allBIdeasPostData[i]
                                                  ["documentlist_id"] !=
                                              "")
                                          ? Row(
                                              children: [
                                                Text(
                                                  "Attachments :    ",
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    fontSize: 14,
                                                    fontWeight: FontWeight.w700,
                                                  ),
                                                ),
                                                IconButton(
                                                    onPressed: () {
                                                      _launchInBrowser(
                                                          selectedImages[0]);
                                                    },
                                                    icon: Icon(
                                                        Icons.file_download)),
                                              ],
                                            )
                                          : SizedBox()
                                    ]))
                                  : SizedBox()
                            ],
                          ),
                        )),
                    Container(
                      padding: EdgeInsets.fromLTRB(10, 10, 10, 0),
                      child: Column(
                        mainAxisAlignment: MainAxisAlignment.center,
                        children: [
                          Padding(
                            padding:
                                const EdgeInsets.only(left: 8.0, right: 8.0),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.spaceBetween,
                              children: [
                                InkWell(
                                  onTap: () {},
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: [
                                        Text(
                                          allPostLikeCount[allPostIndex]
                                              .toString(),
                                          style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              color: Color.fromRGBO(
                                                  205, 61, 61, 1)),
                                        ),
                                        SizedBox(
                                          width: 4,
                                        ),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flike.png?alt=media&token=196c9359-8b79-4dbe-ad4f-650dd13a6d18",
                                            height: 15,
                                            width: 15),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flaugh.png?alt=media&token=28061e76-ddc3-4a65-a4dd-e8c565f9dbd4",
                                            height: 15,
                                            width: 15),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fwow.png?alt=media&token=753eae20-2ba2-4c77-ac54-24c520a4174e",
                                            height: 15,
                                            width: 15),
                                      ],
                                    ),
                                  ),
                                ),
                                InkWell(
                                  onTap: () {},
                                  child: Container(
                                    child: RichText(
                                      text: TextSpan(
                                          text:
                                              allPostCommentCount[allPostIndex]
                                                  .toString(),
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            color:
                                                Color.fromRGBO(205, 61, 61, 1),
                                          ),
                                          children: const <TextSpan>[
                                            TextSpan(
                                              text: ' Comments',
                                              style: TextStyle(
                                                fontFamily: 'Nunito Sans',
                                                fontSize: 12,
                                                color: Color.fromRGBO(
                                                    0, 0, 0, 0.8),
                                                fontWeight: FontWeight.w500,
                                              ),
                                            )
                                          ]),
                                    ),
                                  ),
                                ),
                                Container(
                                  child: Row(
                                    children: [
                                      SizedBox(
                                        width: 30,
                                      ),
                                      Text(
                                        (allPostViewCount[allPostIndex] +
                                                allPostImpressionCount[
                                                    allPostIndex])
                                            .toString(),
                                        style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            color:
                                                Color.fromRGBO(205, 61, 61, 1)),
                                      ),
                                      SizedBox(
                                        width: 4,
                                      ),
                                      Icon(FontAwesome5.eye,
                                          color: Color.fromRGBO(0, 0, 0, 0.8),
                                          size: 12),
                                    ],
                                  ),
                                )
                              ],
                            ),
                          ),
                          Container(
                              margin:
                                  EdgeInsets.only(left: 2, right: 2, top: 5),
                              color: Colors.black.withOpacity(0.2),
                              height: 0.5,
                              width: MediaQuery.of(context).size.width),
                          Padding(
                            padding:
                                const EdgeInsets.only(left: 8.0, right: 8.0),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.spaceBetween,
                              children: [
                                Container(
                                  padding: EdgeInsets.only(top: 15, bottom: 15),
                                  child: Row(
                                    children: [
                                      Builder(builder: (ctx) {
                                        return ReactionButton<String>(
                                            onReactionChanged: (String? value) {
                                              print(value);
                                              setState(() {
                                                if (allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    'likeinit') {
                                                  allPostLikeCount[
                                                          allPostIndex] =
                                                      allPostLikeCount[
                                                              allPostIndex] +
                                                          1;
                                                  networkCRUD
                                                      .addSmPostLikeDetailsAdvancedLogic([
                                                    "TRUE",
                                                    allBIdeasPostData[i]
                                                        ["post_id"],
                                                    _currentUserId,
                                                    "businessideas",
                                                    value,
                                                    allPostLikeCount[
                                                        allPostIndex],
                                                    allPostCommentCount[
                                                        allPostIndex],
                                                    allPostViewCount[
                                                        allPostIndex],
                                                    allPostImpressionCount[
                                                        allPostIndex],
                                                    0
                                                  ]);
                                                  ////////////////////////////notification//////////////////////////////////////
                                                  String notify_id =
                                                      "ntf${allBIdeasPostData[i]["post_id"]}$comparedate";
                                                  notifyCRUD.sendNotification([
                                                    notify_id,
                                                    "reaction",
                                                    "social",
                                                    _currentUserId,
                                                    allBIdeasPostData[i]
                                                        ["user_id"],
                                                    countData!.value[
                                                                "usertoken"][
                                                            allBIdeasPostData[i]
                                                                ["user_id"]]
                                                        ["tokenid"],
                                                    "You got one reaction!",
                                                    "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} reacted on your post.",
                                                    allBIdeasPostData[i]
                                                        ["user_id"],
                                                    "businessideas",
                                                    "false",
                                                    comparedate,
                                                    "add"
                                                  ]);
                                                  //////////////////////////////////////////////////////////////////////////
                                                  allPostLikeDataLocal[
                                                      allPostIndex] = value;
                                                } else if (allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    value) {
                                                  allPostLikeDataLocal[
                                                          allPostIndex] =
                                                      "likeinit";
                                                } else {
                                                  allPostLikeDataLocal[
                                                      allPostIndex] = value;
                                                }
                                              });
                                            },
                                            reactions: reaction,
                                            initialReaction: allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    "Like"
                                                ? reaction[0]
                                                : allPostLikeDataLocal[
                                                            allPostIndex] ==
                                                        "Love"
                                                    ? reaction[1]
                                                    : allPostLikeDataLocal[
                                                                allPostIndex] ==
                                                            "Haha"
                                                        ? reaction[2]
                                                        : allPostLikeDataLocal[
                                                                    allPostIndex] ==
                                                                "Yay"
                                                            ? reaction[3]
                                                            : allPostLikeDataLocal[
                                                                        allPostIndex] ==
                                                                    "Wow"
                                                                ? reaction[4]
                                                                : allPostLikeDataLocal[
                                                                            allPostIndex] ==
                                                                        "Angry"
                                                                    ? reaction[
                                                                        5]
                                                                    : Reaction(
                                                                        value:
                                                                            null,
                                                                        icon:
                                                                            Row(
                                                                          children: const [
                                                                            Icon(FontAwesome5.thumbs_up,
                                                                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                                                                size: 14),
                                                                            Text(
                                                                              "  Like",
                                                                              style: TextStyle(fontSize: 13, fontWeight: FontWeight.w700, color: Colors.black45),
                                                                            )
                                                                          ],
                                                                        ),
                                                                      ));
                                      }),
                                    ],
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    setState(() {
                                      selectedPostIndexToComment = allPostIndex;
                                    });
                                    _addCommentDialogBox();
                                  },
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: const [
                                        Icon(FontAwesome5.comment,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 14),
                                        Text(
                                          "  Comment",
                                          style: TextStyle(
                                              fontSize: 13,
                                              fontWeight: FontWeight.w700,
                                              color: Colors.black45),
                                        )
                                      ],
                                    ),
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    _shareSocialPostDialog(i, allPostIndex);
                                  },
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: const [
                                        Icon(FontAwesome5.share,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 14),
                                        Text(
                                          "  Share",
                                          style: TextStyle(
                                              fontSize: 13,
                                              fontWeight: FontWeight.w700,
                                              color: Colors.black45),
                                        )
                                      ],
                                    ),
                                  ),
                                ),
                              ],
                            ),
                          ),
                          Container(
                              margin:
                                  EdgeInsets.only(left: 2, right: 2, top: 5),
                              color: Colors.black.withOpacity(0.2),
                              height: 0.5,
                              width: MediaQuery.of(context).size.width),
                          SizedBox(height: 10),
                          _commentView(allPostIndex)
                        ],
                      ),
                    ),
                  ],
                ),
              ),
            ],
          )
        : SizedBox();
  }

  _projectDiscuss(String postID, int allPostIndex) {
    List taggedUsers = [];
    String allMembers = '';
    int i = -1;
    for (int j = 0; j < allProjectsPostData.length; j++) {
      if (allProjectsPostData[j]["post_id"] == postID) {
        i = j;
        break;
      }
    }
    for (int j = 0; j < allTaggedUsersData.length; j++) {
      if (allTaggedUsersData[j]["usertaglist_id"] ==
          allProjectsPostData[i]["memberlist_id"]) {
        for (int k = 0; k < taggingData.length; k++) {
          if (allTaggedUsersData[j]["user_id"] == taggingData[k]["user_id"]) {
            taggedUsers.add(taggingData[k]["first_name"] +
                " " +
                taggingData[k]["last_name"] +
                " , ");
            allMembers = allMembers +
                taggingData[k]["first_name"] +
                " " +
                taggingData[k]["last_name"] +
                " , ";
          }
        }
      }
    }
    DateTime tempDate = DateTime.parse(
        allProjectsPostData[i]["compare_date"].toString().substring(0, 8));
    String current_date = DateFormat.yMMMMd('en_US').format(tempDate);
    return i != -1
        ? Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Container(
                  width: _width! > 550 ? 500 : _width! - 30,
                  padding: EdgeInsets.all(10),
                  margin: EdgeInsets.only(top: 20),
                  decoration: BoxDecoration(
                      color: Color.fromRGBO(242, 246, 248, 1),
                      borderRadius: BorderRadius.circular(10)),
                  child: Column(children: [
                    Padding(
                      padding: const EdgeInsets.only(left: (5.0), right: 2),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Container(
                            child: Row(
                              children: [
                                InkWell(
                                  child: CircleAvatar(
                                    child: ClipOval(
                                      child: Container(
                                        child: CachedNetworkImage(
                                          imageUrl: allProjectsPostData[i]
                                              ["profilepic"],
                                          width: 40,
                                          height: 40,
                                          fit: BoxFit.cover,
                                          placeholder: (context, url) =>
                                              Container(
                                                  width: 40,
                                                  height: 40,
                                                  color: Colors.white,
                                                  child: Image.network(
                                                    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                                  )),
                                          errorWidget: (context, url, error) =>
                                              Icon(Icons.error),
                                        ),
                                      ),
                                    ),
                                  ),
                                ),
                                SizedBox(
                                  width: 10,
                                ),
                                Container(
                                  child: Column(
                                    crossAxisAlignment:
                                        CrossAxisAlignment.start,
                                    children: [
                                      RichText(
                                        text: TextSpan(
                                            text: allProjectsPostData[i]
                                                    ["first_name"] +
                                                " " +
                                                allProjectsPostData[i]
                                                    ["last_name"],
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 15,
                                              color:
                                                  Color.fromRGBO(0, 0, 0, 0.8),
                                              fontWeight: FontWeight.bold,
                                            ),
                                            children: const <TextSpan>[
                                              TextSpan(
                                                text:
                                                    ' has discussed a project on',
                                                style: TextStyle(
                                                  fontFamily: 'Nunito Sans',
                                                  fontSize: 12,
                                                  color: Color.fromRGBO(
                                                      0, 0, 0, 0.7),
                                                  fontWeight: FontWeight.w500,
                                                ),
                                              )
                                            ]),
                                      ),
                                      Text(
                                        "Posted on " + "$current_date",
                                        style: const TextStyle(
                                          fontSize: 11,
                                          fontWeight: FontWeight.normal,
                                          color: Color.fromRGBO(0, 0, 0, 0.5),
                                        ),
                                      ),
                                    ],
                                  ),
                                )
                              ],
                            ),
                          ),
                        ],
                      ),
                    ),
                    SizedBox(
                      height: 20,
                    ),
                    Container(
                        width: _width! > 550 ? 400 : _width! - 70,
                        child: Text(allProjectsPostData[i]["content"])),
                    SizedBox(
                      height: 5,
                    ),
                    Container(
                        decoration: BoxDecoration(
                          borderRadius: BorderRadius.all(Radius.circular(10)),
                          image: DecorationImage(
                              colorFilter: new ColorFilter.mode(
                                  Colors.black.withOpacity(0.3),
                                  BlendMode.dstATop),
                              image:
                                  AssetImage(allProjectsPostData[i]["theme"]),
                              fit: BoxFit.cover),
                        ),
                        width: _width! > 550 ? 450 : _width! - 50,
                        margin: EdgeInsets.fromLTRB(10, 10, 0, 2),
                        child: Padding(
                          padding: const EdgeInsets.all(10.0),
                          child: Column(
                            children: [
                              SizedBox(
                                height: 3,
                              ),
                              Row(
                                mainAxisAlignment: MainAxisAlignment.start,
                                children: [
                                  Text(
                                    "Title : ",
                                    style: TextStyle(
                                      fontFamily: 'Nunito Sans',
                                      fontSize: 14,
                                      fontWeight: FontWeight.w700,
                                    ),
                                  ),
                                  Text(
                                    allProjectsPostData[i]["title"],
                                    style: TextStyle(
                                      fontFamily: 'Nunito Sans',
                                      fontSize: 14,
                                      fontWeight: FontWeight.w500,
                                    ),
                                  ),
                                ],
                              ),
                              SizedBox(
                                height: 4,
                              ),
                              Row(
                                mainAxisAlignment: MainAxisAlignment.start,
                                children: [
                                  Text(
                                    "Class : ",
                                    style: TextStyle(
                                      fontFamily: 'Nunito Sans',
                                      fontSize: 14,
                                      fontWeight: FontWeight.w700,
                                    ),
                                  ),
                                  Text(
                                    allProjectsPostData[i]["grade"],
                                    style: TextStyle(
                                      fontFamily: 'Nunito Sans',
                                      fontSize: 14,
                                      fontWeight: FontWeight.w500,
                                    ),
                                  ),
                                ],
                              ),
                              SizedBox(
                                height: 4,
                              ),
                              Row(
                                mainAxisAlignment: MainAxisAlignment.start,
                                children: [
                                  Text(
                                    "Subject : ",
                                    style: TextStyle(
                                      fontFamily: 'Nunito Sans',
                                      fontSize: 14,
                                      fontWeight: FontWeight.w700,
                                    ),
                                  ),
                                  Text(
                                    allProjectsPostData[i]["subject"],
                                    style: TextStyle(
                                      fontFamily: 'Nunito Sans',
                                      fontSize: 14,
                                      fontWeight: FontWeight.w500,
                                    ),
                                  ),
                                ],
                              ),
                              SizedBox(
                                height: 4,
                              ),
                              allProjectsPostData[i]["topic"] != ""
                                  ? Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: [
                                        Text(
                                          "Topic : ",
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 14,
                                            fontWeight: FontWeight.w700,
                                          ),
                                        ),
                                        Text(
                                          allProjectsPostData[i]["topic"],
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 14,
                                            fontWeight: FontWeight.w500,
                                          ),
                                        ),
                                      ],
                                    )
                                  : SizedBox(),
                              isProjectPostExpanded[i] == true
                                  ? Container(
                                      child: Column(children: [
                                      SizedBox(
                                        height: 10,
                                      ),
                                      Row(
                                        mainAxisAlignment:
                                            MainAxisAlignment.start,
                                        crossAxisAlignment:
                                            CrossAxisAlignment.start,
                                        children: [
                                          Text(
                                            "Content : ",
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 14,
                                              fontWeight: FontWeight.w700,
                                            ),
                                          ),
                                          Container(
                                            width: _width! > 550
                                                ? 300
                                                : _width! - 100,
                                            child: Text(
                                              allProjectsPostData[i]["content"],
                                              style: TextStyle(
                                                fontFamily: 'Nunito Sans',
                                                fontSize: 14,
                                                fontWeight: FontWeight.w500,
                                              ),
                                            ),
                                          ),
                                        ],
                                      ),
                                      SizedBox(
                                        height: 10,
                                      ),
                                      allProjectsPostData[i]["requirements"]
                                                  .toString() !=
                                              ""
                                          ? Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                Text(
                                                  "requirements : ",
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    fontSize: 14,
                                                    fontWeight: FontWeight.w700,
                                                  ),
                                                ),
                                                allProjectsPostData[i]
                                                                ["requirements"]
                                                            .toString()
                                                            .length >
                                                        5
                                                    ? allProjectsPostData[i][
                                                                    "requirements"]
                                                                .toString()
                                                                .substring(
                                                                    0, 5) !=
                                                            "latex"
                                                        ? Container(
                                                            width: 300,
                                                            child: Text(
                                                              allProjectsPostData[
                                                                      i][
                                                                  "requirements"],
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 14,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          )
                                                        : Container(
                                                            height: 110,
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: TeXView(
                                                              child:
                                                                  TeXViewColumn(
                                                                      children: [
                                                                    TeXViewDocument(
                                                                        allProjectsPostData[i]["requirements"]
                                                                            .toString()
                                                                            .substring(
                                                                                6),
                                                                        style:
                                                                            TeXViewStyle(
                                                                          fontStyle: TeXViewFontStyle(
                                                                              fontSize: 10,
                                                                              sizeUnit: TeXViewSizeUnit.pt),
                                                                          padding:
                                                                              TeXViewPadding.all(10),
                                                                        )),
                                                                  ]),
                                                              style:
                                                                  TeXViewStyle(
                                                                elevation: 10,
                                                                backgroundColor:
                                                                    Colors
                                                                        .transparent,
                                                              ),
                                                            ),
                                                          )
                                                    : Container(
                                                        width: _width! > 550
                                                            ? 300
                                                            : _width! - 100,
                                                        child: Text(
                                                          allProjectsPostData[i]
                                                              ["requirements"],
                                                          style: TextStyle(
                                                            fontFamily:
                                                                'Nunito Sans',
                                                            fontSize: 14,
                                                            fontWeight:
                                                                FontWeight.w500,
                                                          ),
                                                        ),
                                                      ),
                                              ],
                                            )
                                          : SizedBox(),
                                      SizedBox(
                                        height: 10,
                                      ),
                                      allProjectsPostData[i]["purchasedfrom"]
                                                  .toString() !=
                                              ""
                                          ? Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                Text(
                                                  "Purchaed from : ",
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    fontSize: 14,
                                                    fontWeight: FontWeight.w700,
                                                  ),
                                                ),
                                                allProjectsPostData[i][
                                                                "purchasedfrom"]
                                                            .toString()
                                                            .length >
                                                        5
                                                    ? allProjectsPostData[i][
                                                                    "purchasedfrom"]
                                                                .toString()
                                                                .substring(
                                                                    0, 5) !=
                                                            "latex"
                                                        ? Container(
                                                            width: 300,
                                                            child: Text(
                                                              allProjectsPostData[
                                                                      i][
                                                                  "purchasedfrom"],
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 14,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          )
                                                        : Container(
                                                            height: 110,
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: TeXView(
                                                              child:
                                                                  TeXViewColumn(
                                                                      children: [
                                                                    TeXViewDocument(
                                                                        allProjectsPostData[i]["purchasedfrom"]
                                                                            .toString()
                                                                            .substring(
                                                                                6),
                                                                        style:
                                                                            TeXViewStyle(
                                                                          fontStyle: TeXViewFontStyle(
                                                                              fontSize: 10,
                                                                              sizeUnit: TeXViewSizeUnit.pt),
                                                                          padding:
                                                                              TeXViewPadding.all(10),
                                                                        )),
                                                                  ]),
                                                              style:
                                                                  TeXViewStyle(
                                                                elevation: 10,
                                                                backgroundColor:
                                                                    Colors
                                                                        .transparent,
                                                              ),
                                                            ),
                                                          )
                                                    : Container(
                                                        width: _width! > 550
                                                            ? 300
                                                            : _width! - 100,
                                                        child: Text(
                                                          allProjectsPostData[i]
                                                              ["purchasedfrom"],
                                                          style: TextStyle(
                                                            fontFamily:
                                                                'Nunito Sans',
                                                            fontSize: 14,
                                                            fontWeight:
                                                                FontWeight.w500,
                                                          ),
                                                        ),
                                                      ),
                                              ],
                                            )
                                          : SizedBox(),
                                      SizedBox(
                                        height: 10,
                                      ),
                                      allProjectsPostData[i]["procedure_"]
                                                  .toString() !=
                                              ""
                                          ? Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                Text(
                                                  "Procedure : ",
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    fontSize: 14,
                                                    fontWeight: FontWeight.w700,
                                                  ),
                                                ),
                                                allProjectsPostData[i]
                                                                ["procedure_"]
                                                            .toString()
                                                            .length >
                                                        5
                                                    ? allProjectsPostData[i][
                                                                    "procedure_"]
                                                                .toString()
                                                                .substring(
                                                                    0, 5) !=
                                                            "latex"
                                                        ? Container(
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: Text(
                                                              allProjectsPostData[
                                                                      i][
                                                                  "procedure_"],
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 14,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          )
                                                        : Container(
                                                            height: 110,
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: TeXView(
                                                              child:
                                                                  TeXViewColumn(
                                                                      children: [
                                                                    TeXViewDocument(
                                                                        allProjectsPostData[i]["procedure_"]
                                                                            .toString()
                                                                            .substring(
                                                                                6),
                                                                        style:
                                                                            TeXViewStyle(
                                                                          fontStyle: TeXViewFontStyle(
                                                                              fontSize: 10,
                                                                              sizeUnit: TeXViewSizeUnit.pt),
                                                                          padding:
                                                                              TeXViewPadding.all(10),
                                                                        )),
                                                                  ]),
                                                              style:
                                                                  TeXViewStyle(
                                                                elevation: 10,
                                                                backgroundColor:
                                                                    Colors
                                                                        .transparent,
                                                              ),
                                                            ),
                                                          )
                                                    : Container(
                                                        width: _width! > 550
                                                            ? 300
                                                            : _width! - 100,
                                                        child: Text(
                                                          allProjectsPostData[i]
                                                              ["procedure_"],
                                                          style: TextStyle(
                                                            fontFamily:
                                                                'Nunito Sans',
                                                            fontSize: 14,
                                                            fontWeight:
                                                                FontWeight.w500,
                                                          ),
                                                        ),
                                                      ),
                                              ],
                                            )
                                          : SizedBox(),
                                      SizedBox(
                                        height: 10,
                                      ),
                                      allProjectsPostData[i]["theory"]
                                                  .toString() !=
                                              ""
                                          ? Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                Text(
                                                  "Theory : ",
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    fontSize: 14,
                                                    fontWeight: FontWeight.w700,
                                                  ),
                                                ),
                                                allProjectsPostData[i]["theory"]
                                                            .toString()
                                                            .length >
                                                        5
                                                    ? allProjectsPostData[i]
                                                                    ["theory"]
                                                                .toString()
                                                                .substring(
                                                                    0, 5) !=
                                                            "latex"
                                                        ? Container(
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: Text(
                                                              allProjectsPostData[
                                                                  i]["theory"],
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 14,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          )
                                                        : Container(
                                                            height: 110,
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: TeXView(
                                                              child:
                                                                  TeXViewColumn(
                                                                      children: [
                                                                    TeXViewDocument(
                                                                        allProjectsPostData[i]["theory"]
                                                                            .toString()
                                                                            .substring(
                                                                                6),
                                                                        style:
                                                                            TeXViewStyle(
                                                                          fontStyle: TeXViewFontStyle(
                                                                              fontSize: 10,
                                                                              sizeUnit: TeXViewSizeUnit.pt),
                                                                          padding:
                                                                              TeXViewPadding.all(10),
                                                                        )),
                                                                  ]),
                                                              style:
                                                                  TeXViewStyle(
                                                                elevation: 10,
                                                                backgroundColor:
                                                                    Colors
                                                                        .transparent,
                                                              ),
                                                            ),
                                                          )
                                                    : Container(
                                                        width: _width! > 550
                                                            ? 300
                                                            : _width! - 100,
                                                        child: Text(
                                                          allProjectsPostData[i]
                                                              ["theory"],
                                                          style: TextStyle(
                                                            fontFamily:
                                                                'Nunito Sans',
                                                            fontSize: 14,
                                                            fontWeight:
                                                                FontWeight.w500,
                                                          ),
                                                        ),
                                                      ),
                                              ],
                                            )
                                          : SizedBox(),
                                      SizedBox(
                                        height: 10,
                                      ),
                                      allProjectsPostData[i]["findings"]
                                                  .toString() !=
                                              ""
                                          ? Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                Text(
                                                  "Findings : ",
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    fontSize: 14,
                                                    fontWeight: FontWeight.w700,
                                                  ),
                                                ),
                                                allProjectsPostData[i]
                                                                ["findings"]
                                                            .toString()
                                                            .length >
                                                        5
                                                    ? allProjectsPostData[i]
                                                                    ["findings"]
                                                                .toString()
                                                                .substring(
                                                                    0, 5) !=
                                                            "latex"
                                                        ? Container(
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: Text(
                                                              allProjectsPostData[
                                                                      i]
                                                                  ["findings"],
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 14,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          )
                                                        : Container(
                                                            height: 110,
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: TeXView(
                                                              child:
                                                                  TeXViewColumn(
                                                                      children: [
                                                                    TeXViewDocument(
                                                                        allProjectsPostData[i]["findings"]
                                                                            .toString()
                                                                            .substring(
                                                                                6),
                                                                        style:
                                                                            TeXViewStyle(
                                                                          fontStyle: TeXViewFontStyle(
                                                                              fontSize: 10,
                                                                              sizeUnit: TeXViewSizeUnit.pt),
                                                                          padding:
                                                                              TeXViewPadding.all(10),
                                                                        )),
                                                                  ]),
                                                              style:
                                                                  TeXViewStyle(
                                                                elevation: 10,
                                                                backgroundColor:
                                                                    Colors
                                                                        .transparent,
                                                              ),
                                                            ),
                                                          )
                                                    : Container(
                                                        width: _width! > 550
                                                            ? 300
                                                            : _width! - 100,
                                                        child: Text(
                                                          allProjectsPostData[i]
                                                              ["findings"],
                                                          style: TextStyle(
                                                            fontFamily:
                                                                'Nunito Sans',
                                                            fontSize: 14,
                                                            fontWeight:
                                                                FontWeight.w500,
                                                          ),
                                                        ),
                                                      ),
                                              ],
                                            )
                                          : SizedBox(),
                                      SizedBox(
                                        height: 10,
                                      ),
                                      allProjectsPostData[i]["similartheory"]
                                                  .toString() !=
                                              ""
                                          ? Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                Text(
                                                  "Similar Projects : ",
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    fontSize: 14,
                                                    fontWeight: FontWeight.w700,
                                                  ),
                                                ),
                                                allProjectsPostData[i][
                                                                "similartheory"]
                                                            .toString()
                                                            .length >
                                                        5
                                                    ? allProjectsPostData[i][
                                                                    "similartheory"]
                                                                .toString()
                                                                .substring(
                                                                    0, 5) !=
                                                            "latex"
                                                        ? Container(
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: Text(
                                                              allProjectsPostData[
                                                                      i][
                                                                  "similartheory"],
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 14,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          )
                                                        : Container(
                                                            height: 110,
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: TeXView(
                                                              child:
                                                                  TeXViewColumn(
                                                                      children: [
                                                                    TeXViewDocument(
                                                                        allProjectsPostData[i]["similartheory"]
                                                                            .toString()
                                                                            .substring(
                                                                                6),
                                                                        style:
                                                                            TeXViewStyle(
                                                                          fontStyle: TeXViewFontStyle(
                                                                              fontSize: 10,
                                                                              sizeUnit: TeXViewSizeUnit.pt),
                                                                          padding:
                                                                              TeXViewPadding.all(10),
                                                                        )),
                                                                  ]),
                                                              style:
                                                                  TeXViewStyle(
                                                                elevation: 10,
                                                                backgroundColor:
                                                                    Colors
                                                                        .transparent,
                                                              ),
                                                            ),
                                                          )
                                                    : Container(
                                                        width: _width! > 550
                                                            ? 300
                                                            : _width! - 100,
                                                        child: Text(
                                                          allProjectsPostData[i]
                                                              ["similartheory"],
                                                          style: TextStyle(
                                                            fontFamily:
                                                                'Nunito Sans',
                                                            fontSize: 14,
                                                            fontWeight:
                                                                FontWeight.w500,
                                                          ),
                                                        ),
                                                      ),
                                              ],
                                            )
                                          : SizedBox(),
                                      SizedBox(
                                        height: 10,
                                      ),
                                      allProjectsPostData[i]["summarydoc"]
                                                  .toString() !=
                                              ""
                                          ? Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                Text(
                                                  "Briefs and insights : ",
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    fontSize: 14,
                                                    fontWeight: FontWeight.w700,
                                                  ),
                                                ),
                                                allProjectsPostData[i]
                                                                ["summarydoc"]
                                                            .toString()
                                                            .length >
                                                        5
                                                    ? allProjectsPostData[i][
                                                                    "summarydoc"]
                                                                .toString()
                                                                .substring(
                                                                    0, 5) !=
                                                            "latex"
                                                        ? Container(
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: Text(
                                                              allProjectsPostData[
                                                                      i][
                                                                  "summarydoc"],
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 14,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          )
                                                        : Container(
                                                            height: 110,
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: TeXView(
                                                              child:
                                                                  TeXViewColumn(
                                                                      children: [
                                                                    TeXViewDocument(
                                                                        allProjectsPostData[i]["summarydoc"]
                                                                            .toString()
                                                                            .substring(
                                                                                6),
                                                                        style:
                                                                            TeXViewStyle(
                                                                          fontStyle: TeXViewFontStyle(
                                                                              fontSize: 10,
                                                                              sizeUnit: TeXViewSizeUnit.pt),
                                                                          padding:
                                                                              TeXViewPadding.all(10),
                                                                        )),
                                                                  ]),
                                                              style:
                                                                  TeXViewStyle(
                                                                elevation: 10,
                                                                backgroundColor:
                                                                    Colors
                                                                        .transparent,
                                                              ),
                                                            ),
                                                          )
                                                    : Container(
                                                        width: _width! > 550
                                                            ? 300
                                                            : _width! - 100,
                                                        child: Text(
                                                          allProjectsPostData[i]
                                                              ["summarydoc"],
                                                          style: TextStyle(
                                                            fontFamily:
                                                                'Nunito Sans',
                                                            fontSize: 14,
                                                            fontWeight:
                                                                FontWeight.w500,
                                                          ),
                                                        ),
                                                      ),
                                              ],
                                            )
                                          : SizedBox(),
                                      SizedBox(
                                        height: 10,
                                      ),
                                      allProjectsPostData[i]["otherdoc"]
                                                  .toString() !=
                                              ""
                                          ? Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                Text(
                                                  "References : ",
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    fontSize: 14,
                                                    fontWeight: FontWeight.w700,
                                                  ),
                                                ),
                                                allProjectsPostData[i]
                                                                ["otherdoc"]
                                                            .toString()
                                                            .length >
                                                        5
                                                    ? allProjectsPostData[i]
                                                                    ["otherdoc"]
                                                                .toString()
                                                                .substring(
                                                                    0, 5) !=
                                                            "latex"
                                                        ? Container(
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: Text(
                                                              allProjectsPostData[
                                                                      i]
                                                                  ["otherdoc"],
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 14,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          )
                                                        : Container(
                                                            height: 110,
                                                            width: _width! > 550
                                                                ? 300
                                                                : _width! - 100,
                                                            child: TeXView(
                                                              child:
                                                                  TeXViewColumn(
                                                                      children: [
                                                                    TeXViewDocument(
                                                                        allProjectsPostData[i]["otherdoc"]
                                                                            .toString()
                                                                            .substring(
                                                                                6),
                                                                        style:
                                                                            TeXViewStyle(
                                                                          fontStyle: TeXViewFontStyle(
                                                                              fontSize: 10,
                                                                              sizeUnit: TeXViewSizeUnit.pt),
                                                                          padding:
                                                                              TeXViewPadding.all(10),
                                                                        )),
                                                                  ]),
                                                              style:
                                                                  TeXViewStyle(
                                                                elevation: 10,
                                                                backgroundColor:
                                                                    Colors
                                                                        .transparent,
                                                              ),
                                                            ),
                                                          )
                                                    : Container(
                                                        width: _width! > 550
                                                            ? 300
                                                            : _width! - 100,
                                                        child: Text(
                                                          allProjectsPostData[i]
                                                              ["otherdoc"],
                                                          style: TextStyle(
                                                            fontFamily:
                                                                'Nunito Sans',
                                                            fontSize: 14,
                                                            fontWeight:
                                                                FontWeight.w500,
                                                          ),
                                                        ),
                                                      ),
                                              ],
                                            )
                                          : SizedBox(),
                                    ]))
                                  : SizedBox(),
                              SizedBox(
                                height: 17,
                              ),
                              Row(
                                  mainAxisAlignment:
                                      MainAxisAlignment.spaceBetween,
                                  children: [
                                    Container(
                                        child: Row(children: [
                                      (allProjectsPostData[i]
                                                  ["projectvideourl"] !=
                                              null)
                                          ? InkWell(
                                              onTap: () {
                                                playVideo(
                                                    'http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_30fps_normal.mp4');
                                              },
                                              child: Material(
                                                elevation: 1,
                                                borderRadius:
                                                    BorderRadius.circular(5),
                                                child: Container(
                                                    padding: EdgeInsets.all(4),
                                                    decoration: BoxDecoration(
                                                        borderRadius:
                                                            BorderRadius
                                                                .circular(5),
                                                        color:
                                                            Color(0xFFE9A81D)),
                                                    child: Center(
                                                        child: Icon(
                                                            Icons.play_arrow,
                                                            color: Colors.white,
                                                            size: 15))),
                                              ),
                                            )
                                          : SizedBox(),
                                      SizedBox(width: 5),
                                      (allProjectsPostData[i]["reqvideourl"] !=
                                              null)
                                          ? InkWell(
                                              onTap: () {
                                                playVideo(
                                                    'http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_30fps_normal.mp4');
                                              },
                                              child: Material(
                                                elevation: 1,
                                                borderRadius:
                                                    BorderRadius.circular(5),
                                                child: Container(
                                                    padding: EdgeInsets.all(4),
                                                    decoration: BoxDecoration(
                                                        borderRadius:
                                                            BorderRadius
                                                                .circular(5),
                                                        color:
                                                            Color(0xFFE9A81D)),
                                                    child: Center(
                                                        child: Icon(
                                                            Icons.play_arrow,
                                                            color: Colors.white,
                                                            size: 15))),
                                              ),
                                            )
                                          : SizedBox(),
                                      SizedBox(width: 5),
                                      (allProjectsPostData[i]["otherdoc"] !=
                                              null)
                                          ? InkWell(
                                              onTap: () {
                                                playVideo(
                                                    'http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_30fps_normal.mp4');
                                              },
                                              child: Material(
                                                elevation: 1,
                                                borderRadius:
                                                    BorderRadius.circular(5),
                                                child: Container(
                                                    padding: EdgeInsets.all(4),
                                                    decoration: BoxDecoration(
                                                      borderRadius:
                                                          BorderRadius.circular(
                                                              5),
                                                      // color: Color(0xFFE9A81D)
                                                    ),
                                                    child: Center(
                                                        child: Icon(
                                                            Icons
                                                                .picture_as_pdf,
                                                            color: Colors.red,
                                                            size: 15))),
                                              ),
                                            )
                                          : SizedBox()
                                    ])),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          isProjectPostExpanded[i] =
                                              !isProjectPostExpanded[i];
                                        });
                                      },
                                      child: Container(
                                        child: Text(
                                            isProjectPostExpanded[i] == false
                                                ? "....See More"
                                                : "....hide",
                                            style: TextStyle(
                                                fontFamily: 'Nunito Sans',
                                                fontSize: 14,
                                                fontWeight: FontWeight.w600,
                                                color: Colors.blue)),
                                      ),
                                    )
                                  ])
                            ],
                          ),
                        )),
                    SizedBox(
                      height: 10,
                    ),
                    Container(
                      padding: EdgeInsets.fromLTRB(10, 10, 10, 0),
                      child: Column(
                        mainAxisAlignment: MainAxisAlignment.center,
                        children: [
                          Padding(
                            padding:
                                const EdgeInsets.only(left: 8.0, right: 8.0),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.spaceBetween,
                              children: [
                                InkWell(
                                  onTap: () {},
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: [
                                        Text(
                                          allPostLikeCount[allPostIndex]
                                              .toString(),
                                          style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              color: Color.fromRGBO(
                                                  205, 61, 61, 1)),
                                        ),
                                        SizedBox(
                                          width: 4,
                                        ),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flike.png?alt=media&token=196c9359-8b79-4dbe-ad4f-650dd13a6d18",
                                            height: 15,
                                            width: 15),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flaugh.png?alt=media&token=28061e76-ddc3-4a65-a4dd-e8c565f9dbd4",
                                            height: 15,
                                            width: 15),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fwow.png?alt=media&token=753eae20-2ba2-4c77-ac54-24c520a4174e",
                                            height: 15,
                                            width: 15),
                                      ],
                                    ),
                                  ),
                                ),
                                InkWell(
                                  onTap: () {},
                                  child: Container(
                                    child: RichText(
                                      text: TextSpan(
                                          text:
                                              allPostCommentCount[allPostIndex]
                                                  .toString(),
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            color:
                                                Color.fromRGBO(205, 61, 61, 1),
                                          ),
                                          children: const <TextSpan>[
                                            TextSpan(
                                              text: ' Comments',
                                              style: TextStyle(
                                                fontFamily: 'Nunito Sans',
                                                fontSize: 12,
                                                color: Color.fromRGBO(
                                                    0, 0, 0, 0.8),
                                                fontWeight: FontWeight.w500,
                                              ),
                                            )
                                          ]),
                                    ),
                                  ),
                                ),
                                Container(
                                  child: Row(
                                    children: [
                                      SizedBox(
                                        width: 30,
                                      ),
                                      Text(
                                        (allPostViewCount[allPostIndex] +
                                                allPostImpressionCount[
                                                    allPostIndex])
                                            .toString(),
                                        style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            color:
                                                Color.fromRGBO(205, 61, 61, 1)),
                                      ),
                                      SizedBox(
                                        width: 4,
                                      ),
                                      Icon(FontAwesome5.eye,
                                          color: Color.fromRGBO(0, 0, 0, 0.8),
                                          size: 12),
                                    ],
                                  ),
                                )
                              ],
                            ),
                          ),
                          Container(
                              margin:
                                  EdgeInsets.only(left: 2, right: 2, top: 5),
                              color: Colors.black.withOpacity(0.2),
                              height: 0.5,
                              width: MediaQuery.of(context).size.width),
                          Padding(
                            padding:
                                const EdgeInsets.only(left: 8.0, right: 8.0),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.spaceBetween,
                              children: [
                                Container(
                                  padding: EdgeInsets.only(top: 15, bottom: 15),
                                  child: Row(
                                    children: [
                                      Builder(builder: (ctx) {
                                        return ReactionButton<String>(
                                            onReactionChanged: (String? value) {
                                              print(value);
                                              setState(() {
                                                if (allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    'likeinit') {
                                                  allPostLikeCount[
                                                          allPostIndex] =
                                                      allPostLikeCount[
                                                              allPostIndex] +
                                                          1;
                                                  networkCRUD
                                                      .addSmPostLikeDetailsAdvancedLogic([
                                                    "TRUE",
                                                    allProjectsPostData[i]
                                                        ["post_id"],
                                                    _currentUserId,
                                                    "projectdiscuss",
                                                    value,
                                                    allPostLikeCount[
                                                        allPostIndex],
                                                    allPostCommentCount[
                                                        allPostIndex],
                                                    allPostViewCount[
                                                        allPostIndex],
                                                    allPostImpressionCount[
                                                        allPostIndex],
                                                    0
                                                  ]);
                                                  ////////////////////////////notification//////////////////////////////////////
                                                  String notify_id =
                                                      "ntf${allProjectsPostData[i]["post_id"]}$comparedate";
                                                  notifyCRUD.sendNotification([
                                                    notify_id,
                                                    "reaction",
                                                    "social",
                                                    _currentUserId,
                                                    allProjectsPostData[i]
                                                        ["user_id"],
                                                    countData!.value[
                                                                "usertoken"][
                                                            allProjectsPostData[
                                                                i]["user_id"]]
                                                        ["tokenid"],
                                                    "You got one reaction!",
                                                    "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} reacted on your post.",
                                                    allProjectsPostData[i]
                                                        ["user_id"],
                                                    "project",
                                                    "false",
                                                    comparedate,
                                                    "add"
                                                  ]);
                                                  //////////////////////////////////////////////////////////////////////////
                                                  allPostLikeDataLocal[
                                                      allPostIndex] = value;
                                                } else if (allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    value) {
                                                  allPostLikeDataLocal[
                                                          allPostIndex] =
                                                      "likeinit";
                                                } else {
                                                  allPostLikeDataLocal[
                                                      allPostIndex] = value;
                                                }
                                              });
                                            },
                                            reactions: reaction,
                                            initialReaction: allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    "Like"
                                                ? reaction[0]
                                                : allPostLikeDataLocal[
                                                            allPostIndex] ==
                                                        "Love"
                                                    ? reaction[1]
                                                    : allPostLikeDataLocal[
                                                                allPostIndex] ==
                                                            "Haha"
                                                        ? reaction[2]
                                                        : allPostLikeDataLocal[
                                                                    allPostIndex] ==
                                                                "Yay"
                                                            ? reaction[3]
                                                            : allPostLikeDataLocal[
                                                                        allPostIndex] ==
                                                                    "Wow"
                                                                ? reaction[4]
                                                                : allPostLikeDataLocal[
                                                                            allPostIndex] ==
                                                                        "Angry"
                                                                    ? reaction[
                                                                        5]
                                                                    : Reaction(
                                                                        value:
                                                                            null,
                                                                        icon:
                                                                            Row(
                                                                          children: const [
                                                                            Icon(FontAwesome5.thumbs_up,
                                                                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                                                                size: 14),
                                                                            Text(
                                                                              "  Like",
                                                                              style: TextStyle(fontSize: 13, fontWeight: FontWeight.w700, color: Colors.black45),
                                                                            )
                                                                          ],
                                                                        ),
                                                                      ));
                                      }),
                                    ],
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    setState(() {
                                      selectedPostIndexToComment = allPostIndex;
                                    });
                                    _addCommentDialogBox();
                                  },
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: const [
                                        Icon(FontAwesome5.comment,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 14),
                                        Text(
                                          "  Comment",
                                          style: TextStyle(
                                              fontSize: 13,
                                              fontWeight: FontWeight.w700,
                                              color: Colors.black45),
                                        )
                                      ],
                                    ),
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    _shareSocialPostDialog(i, allPostIndex);
                                  },
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: const [
                                        Icon(FontAwesome5.share,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 14),
                                        Text(
                                          "  Share",
                                          style: TextStyle(
                                              fontSize: 13,
                                              fontWeight: FontWeight.w700,
                                              color: Colors.black45),
                                        )
                                      ],
                                    ),
                                  ),
                                ),
                              ],
                            ),
                          ),
                          Container(
                              margin:
                                  EdgeInsets.only(left: 2, right: 2, top: 5),
                              color: Colors.black.withOpacity(0.2),
                              height: 0.5,
                              width: MediaQuery.of(context).size.width),
                          SizedBox(height: 10),
                          _commentView(allPostIndex)
                        ],
                      ),
                    ),
                  ])),
            ],
          )
        : SizedBox();
  }

  _smBlogPost(String postID, int allPostIndex) {
    int i = -1;
    for (int j = 0; j < allBlogPostData.length; j++) {
      if (allBlogPostData[j]["post_id"] == postID) {
        i = j;
        break;
      }
    }
    String time = DateFormat.yMMMMd('en_US').format(DateTime.parse(
        allBlogPostData[i]["compare_date"].toString().substring(0, 8)));
    return i != -1
        ? Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Container(
                width: _width! > 550 ? 500 : _width! - 30,
                padding: EdgeInsets.all(10),
                margin: EdgeInsets.only(top: 20),
                decoration: BoxDecoration(
                    color: Color.fromRGBO(242, 246, 248, 1),
                    borderRadius: BorderRadius.circular(10)),
                child: Column(
                  children: [
                    Padding(
                      padding: const EdgeInsets.only(left: (15.0), right: 10),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Container(
                            child: Row(
                              children: [
                                InkWell(
                                  child: CircleAvatar(
                                    child: ClipOval(
                                      child: Container(
                                        child: CachedNetworkImage(
                                          imageUrl: allBlogPostData[i]
                                              ["profilepic"],
                                          width: 40,
                                          height: 40,
                                          fit: BoxFit.cover,
                                          placeholder: (context, url) =>
                                              Container(
                                                  width: 40,
                                                  height: 40,
                                                  color: Colors.white,
                                                  child: Image.network(
                                                    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                                  )),
                                          errorWidget: (context, url, error) =>
                                              Icon(Icons.error),
                                        ),
                                      ),
                                    ),
                                  ),
                                ),
                                SizedBox(
                                  width: 10,
                                ),
                                RichText(
                                  text: TextSpan(
                                      text: allBlogPostData[i]["first_name"] +
                                          allBlogPostData[i]["last_name"],
                                      style: TextStyle(
                                        fontFamily: 'Nunito Sans',
                                        fontSize: 15,
                                        color: Color.fromRGBO(0, 0, 0, 0.8),
                                        fontWeight: FontWeight.bold,
                                      ),
                                      children: const <TextSpan>[
                                        TextSpan(
                                          text: ' has created a Blog.',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 12,
                                            color: Color.fromRGBO(0, 0, 0, 0.7),
                                            fontWeight: FontWeight.w500,
                                          ),
                                        )
                                      ]),
                                ),
                              ],
                            ),
                          ),
                          IconButton(
                              icon: Icon(FontAwesome5.ellipsis_h,
                                  color: Color.fromRGBO(0, 0, 0, 0.8),
                                  size: 13),
                              onPressed: () {}),
                        ],
                      ),
                    ),
                    InkWell(
                      onTap: () {
                        setState(() {
                          isPostExpanded[allPostIndex] =
                              !isPostExpanded[allPostIndex];
                        });
                      },
                      child: Container(
                        width: MediaQuery.of(context).size.width - 50,
                        margin: EdgeInsets.fromLTRB(10, 10, 0, 2),
                        child: ReadMoreText(
                          isPostExpanded[allPostIndex] == false
                              ? allBlogPostData[i]["blog_title"]
                                          .toString()
                                          .length <
                                      40
                                  ? allBlogPostData[i]["blog_title"]
                                  : "${allBlogPostData[i]["blog_title"].toString().substring(0, 40)}..."
                              : allBlogPostData[i]["blog_title"],
                          textAlign: TextAlign.left,
                          trimLines: 4,
                          colorClickableText: Color(0xff0962ff),
                          trimMode: TrimMode.Line,
                          trimCollapsedText: 'read more',
                          trimExpandedText: 'Show less',
                          style: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 14,
                            color: Color.fromRGBO(0, 0, 0, 0.8),
                            fontWeight: FontWeight.w400,
                          ),
                          lessStyle: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 12,
                            color: Color(0xff0962ff),
                            fontWeight: FontWeight.w700,
                          ),
                          moreStyle: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 12,
                            color: Color(0xff0962ff),
                            fontWeight: FontWeight.w700,
                          ),
                        ),
                      ),
                    ),
                    InkWell(
                      onTap: () {
                        _viewFullBlogDialog(i, allPostIndex);
                      },
                      child: Container(
                          margin: EdgeInsets.all(5),
                          decoration: BoxDecoration(
                              borderRadius: BorderRadius.circular(10),
                              border: Border.all(color: Colors.black38)),
                          child: Column(
                            children: [
                              Container(
                                  padding: const EdgeInsets.only(
                                      left: (10.0),
                                      right: 5,
                                      top: 10,
                                      bottom: 5),
                                  margin: EdgeInsets.all(5),
                                  decoration: BoxDecoration(
                                      color: Color.fromRGBO(242, 246, 248, 1),
                                      borderRadius: BorderRadius.all(
                                          Radius.circular(20))),
                                  child: Column(
                                    children: [
                                      SizedBox(
                                        width: 10,
                                      ),
                                      Column(
                                        children: [
                                          Row(
                                            mainAxisAlignment:
                                                MainAxisAlignment.start,
                                            children: [
                                              InkWell(
                                                onTap: () {},
                                                child: Container(
                                                  child: Text("$time",
                                                      style: TextStyle(
                                                          color:
                                                              Color(0xFF3B3B3B),
                                                          fontSize: 15,
                                                          fontWeight:
                                                              FontWeight.w400)),
                                                ),
                                              )
                                            ],
                                          ),
                                          SizedBox(
                                            height: 15,
                                          ),
                                          Row(
                                            mainAxisAlignment:
                                                MainAxisAlignment.spaceBetween,
                                            children: [
                                              Column(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                crossAxisAlignment:
                                                    CrossAxisAlignment.start,
                                                children: [
                                                  Row(
                                                    crossAxisAlignment:
                                                        CrossAxisAlignment
                                                            .start,
                                                    children: [
                                                      Container(
                                                        width: _width! > 550
                                                            ? 430
                                                            : _width! - 90,
                                                        child: Text(
                                                            allBlogPostData[i]
                                                                ["blog_title"],
                                                            style: TextStyle(
                                                                color: Color(
                                                                    0xFFFA6F40),
                                                                fontSize: 20,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w400)),
                                                      ),
                                                    ],
                                                  ),
                                                  SizedBox(
                                                    height: 15,
                                                  ),
                                                  Row(
                                                    mainAxisAlignment:
                                                        MainAxisAlignment
                                                            .spaceBetween,
                                                    crossAxisAlignment:
                                                        CrossAxisAlignment
                                                            .start,
                                                    children: [
                                                      Material(
                                                        elevation: 3,
                                                        shadowColor:
                                                            Color(0xFFF0F0F0),
                                                        child: Container(
                                                          padding:
                                                              EdgeInsets.all(3),
                                                          width: 70,
                                                          height: 70,
                                                          child:
                                                              CachedNetworkImage(
                                                            imageUrl:
                                                                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/userEventPoster%2FaYMLfB94crdCLh0wVwwg27m0BJB3%2FaYMLfB94crdCLh0wVwwg27m0BJB3image_cropper_1638162879764.jpg?alt=media&token=eeb42b82-4e2a-4d10-b3fe-469a15dfa9b9",
                                                            fit: BoxFit.cover,
                                                            placeholder: (context,
                                                                    url) =>
                                                                Container(
                                                                    height: 70,
                                                                    width: 70,
                                                                    child: Image
                                                                        .asset(
                                                                      "assets/loadingimg.gif",
                                                                    )),
                                                            errorWidget:
                                                                (context, url,
                                                                        error) =>
                                                                    Icon(Icons
                                                                        .error),
                                                          ),
                                                        ),
                                                      ),
                                                      SizedBox(
                                                        width: 10,
                                                      ),
                                                      Container(
                                                        width: _width! > 550
                                                            ? 300
                                                            : _width! - 180,
                                                        child: Text(
                                                            allBlogPostData[i]
                                                                ["blog_intro"],
                                                            style: TextStyle(
                                                                color: Color(
                                                                    0xFF3B3B3B),
                                                                fontSize: 15,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w400)),
                                                      ),
                                                    ],
                                                  ),
                                                ],
                                              ),
                                            ],
                                          ),
                                          Container(
                                            margin: EdgeInsets.only(
                                                top: 15, bottom: 15),
                                            height: 1,
                                            width: MediaQuery.of(context)
                                                .size
                                                .width,
                                            color: Color(0xFFF0F0F0),
                                          ),
                                        ],
                                      ),
                                      SizedBox(
                                        width: 10,
                                      ),
                                    ],
                                  )),
                            ],
                          )),
                    ),
                    Container(
                      padding: EdgeInsets.fromLTRB(10, 10, 10, 0),
                      child: Column(
                        mainAxisAlignment: MainAxisAlignment.center,
                        children: [
                          Padding(
                            padding:
                                const EdgeInsets.only(left: 8.0, right: 8.0),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.spaceBetween,
                              children: [
                                InkWell(
                                  onTap: () {},
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: [
                                        Text(
                                          allPostLikeCount[allPostIndex]
                                              .toString(),
                                          style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              color: Color.fromRGBO(
                                                  205, 61, 61, 1)),
                                        ),
                                        SizedBox(
                                          width: 4,
                                        ),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flike.png?alt=media&token=196c9359-8b79-4dbe-ad4f-650dd13a6d18",
                                            height: 15,
                                            width: 15),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flaugh.png?alt=media&token=28061e76-ddc3-4a65-a4dd-e8c565f9dbd4",
                                            height: 15,
                                            width: 15),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fwow.png?alt=media&token=753eae20-2ba2-4c77-ac54-24c520a4174e",
                                            height: 15,
                                            width: 15),
                                      ],
                                    ),
                                  ),
                                ),
                                InkWell(
                                  onTap: () {},
                                  child: Container(
                                    child: RichText(
                                      text: TextSpan(
                                          text:
                                              allPostCommentCount[allPostIndex]
                                                  .toString(),
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            color:
                                                Color.fromRGBO(205, 61, 61, 1),
                                          ),
                                          children: const <TextSpan>[
                                            TextSpan(
                                              text: ' Comments',
                                              style: TextStyle(
                                                fontFamily: 'Nunito Sans',
                                                fontSize: 12,
                                                color: Color.fromRGBO(
                                                    0, 0, 0, 0.8),
                                                fontWeight: FontWeight.w500,
                                              ),
                                            )
                                          ]),
                                    ),
                                  ),
                                ),
                                Container(
                                  child: Row(
                                    children: [
                                      SizedBox(
                                        width: 30,
                                      ),
                                      Text(
                                        (allPostViewCount[allPostIndex] +
                                                allPostImpressionCount[
                                                    allPostIndex])
                                            .toString(),
                                        style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            color:
                                                Color.fromRGBO(205, 61, 61, 1)),
                                      ),
                                      SizedBox(
                                        width: 4,
                                      ),
                                      Icon(FontAwesome5.eye,
                                          color: Color.fromRGBO(0, 0, 0, 0.8),
                                          size: 12),
                                    ],
                                  ),
                                )
                              ],
                            ),
                          ),
                          Container(
                              margin:
                                  EdgeInsets.only(left: 2, right: 2, top: 5),
                              color: Colors.black.withOpacity(0.2),
                              height: 0.5,
                              width: MediaQuery.of(context).size.width),
                          Padding(
                            padding:
                                const EdgeInsets.only(left: 8.0, right: 8.0),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.spaceBetween,
                              children: [
                                Container(
                                  padding: EdgeInsets.only(top: 15, bottom: 15),
                                  child: Row(
                                    children: [
                                      Builder(builder: (ctx) {
                                        return ReactionButton<String>(
                                            onReactionChanged: (String? value) {
                                              print(value);
                                              setState(() {
                                                if (allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    'likeinit') {
                                                  allPostLikeCount[
                                                          allPostIndex] =
                                                      allPostLikeCount[
                                                              allPostIndex] +
                                                          1;
                                                  networkCRUD
                                                      .addSmPostLikeDetailsAdvancedLogic([
                                                    "TRUE",
                                                    allBlogPostData[i]
                                                        ["post_id"],
                                                    _currentUserId,
                                                    "blog",
                                                    value,
                                                    allPostLikeCount[
                                                        allPostIndex],
                                                    allPostCommentCount[
                                                        allPostIndex],
                                                    allPostViewCount[
                                                        allPostIndex],
                                                    allPostImpressionCount[
                                                        allPostIndex],
                                                    0
                                                  ]);
                                                  ////////////////////////////notification//////////////////////////////////////
                                                  String notify_id =
                                                      "ntf${allBlogPostData[i]["post_id"]}$comparedate";
                                                  notifyCRUD.sendNotification([
                                                    notify_id,
                                                    "reaction",
                                                    "social",
                                                    _currentUserId,
                                                    allBlogPostData[i]
                                                        ["user_id"],
                                                    countData!.value[
                                                                "usertoken"][
                                                            allBlogPostData[i]
                                                                ["user_id"]]
                                                        ["tokenid"],
                                                    "You got one reaction!",
                                                    "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} reacted on your blog.",
                                                    allBlogPostData[i]
                                                        ["user_id"],
                                                    "blog",
                                                    "false",
                                                    comparedate,
                                                    "add"
                                                  ]);
                                                  //////////////////////////////////////////////////////////////////////////
                                                  allPostLikeDataLocal[
                                                      allPostIndex] = value;
                                                } else if (allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    value) {
                                                  allPostLikeDataLocal[
                                                          allPostIndex] =
                                                      "likeinit";
                                                } else {
                                                  allPostLikeDataLocal[
                                                      allPostIndex] = value;
                                                }
                                              });
                                            },
                                            reactions: reaction,
                                            initialReaction: allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    "Like"
                                                ? reaction[0]
                                                : allPostLikeDataLocal[
                                                            allPostIndex] ==
                                                        "Love"
                                                    ? reaction[1]
                                                    : allPostLikeDataLocal[
                                                                allPostIndex] ==
                                                            "Haha"
                                                        ? reaction[2]
                                                        : allPostLikeDataLocal[
                                                                    allPostIndex] ==
                                                                "Yay"
                                                            ? reaction[3]
                                                            : allPostLikeDataLocal[
                                                                        allPostIndex] ==
                                                                    "Wow"
                                                                ? reaction[4]
                                                                : allPostLikeDataLocal[
                                                                            allPostIndex] ==
                                                                        "Angry"
                                                                    ? reaction[
                                                                        5]
                                                                    : Reaction(
                                                                        value:
                                                                            null,
                                                                        icon:
                                                                            Row(
                                                                          children: const [
                                                                            Icon(FontAwesome5.thumbs_up,
                                                                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                                                                size: 14),
                                                                            Text(
                                                                              "  Like",
                                                                              style: TextStyle(fontSize: 13, fontWeight: FontWeight.w700, color: Colors.black45),
                                                                            )
                                                                          ],
                                                                        ),
                                                                      ));
                                      }),
                                    ],
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    setState(() {
                                      selectedPostIndexToComment = allPostIndex;
                                    });
                                    _addCommentDialogBox();
                                  },
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: const [
                                        Icon(FontAwesome5.comment,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 14),
                                        Text(
                                          "  Comment",
                                          style: TextStyle(
                                              fontSize: 13,
                                              fontWeight: FontWeight.w700,
                                              color: Colors.black45),
                                        )
                                      ],
                                    ),
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    _shareSocialPostDialog(i, allPostIndex);
                                  },
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: const [
                                        Icon(FontAwesome5.share,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 14),
                                        Text(
                                          "  Share",
                                          style: TextStyle(
                                              fontSize: 13,
                                              fontWeight: FontWeight.w700,
                                              color: Colors.black45),
                                        )
                                      ],
                                    ),
                                  ),
                                ),
                              ],
                            ),
                          ),
                          Container(
                              margin:
                                  EdgeInsets.only(left: 2, right: 2, top: 5),
                              color: Colors.black.withOpacity(0.2),
                              height: 0.5,
                              width: MediaQuery.of(context).size.width),
                          SizedBox(height: 10),
                          _commentView(allPostIndex)
                        ],
                      ),
                    ),
                  ],
                ),
              ),
            ],
          )
        : SizedBox();
  }

  _smSharedPost(String postID, int allPostIndex) {
    int i = -1;
    String id = allPostData[allPostIndex]["post_type"].toString().substring(7);
    String post_type = "";
    for (int j = 0; j < allPostData.length; j++) {
      if (allPostData[j]["post_id"] == id) {
        post_type = allPostData[j]["post_type"];
      }
    }
    if (post_type != "") {
      if (post_type == "Mood") {
        for (int j = 0; j < allMoodPostData.length; j++) {
          if (allMoodPostData[j]["post_id"] == id) {
            i = j;
            break;
          }
        }
      } else if (post_type == "cause|teachunprevilagedKids") {
        for (int j = 0; j < allCausePostData.length; j++) {
          if (allCausePostData[j]["post_id"] == id) {
            i = j;
            break;
          }
        }
      } else if (post_type == "businessideas") {
        for (int j = 0; j < allBIdeasPostData.length; j++) {
          if (allBIdeasPostData[j]["post_id"] == id) {
            i = j;
            break;
          }
        }
      } else if (post_type == "projectdiscuss") {
        for (int j = 0; j < allProjectsPostData.length; j++) {
          if (allProjectsPostData[j]["post_id"] == id) {
            i = j;
            break;
          }
        }
      }
    }
    return i != -1 && post_type != ""
        ? Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Container(
                width: _width! > 550 ? 500 : _width! - 30,
                padding: EdgeInsets.all(10),
                margin: EdgeInsets.only(top: 20),
                decoration: BoxDecoration(
                    color: Color.fromRGBO(242, 246, 248, 1),
                    borderRadius: BorderRadius.circular(10)),
                child: Column(
                  children: [
                    Padding(
                      padding: const EdgeInsets.only(left: (15.0), right: 10),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
                        children: [
                          Container(
                            child: Row(
                              children: [
                                InkWell(
                                  child: CircleAvatar(
                                    child: ClipOval(
                                      child: Container(
                                        child: CachedNetworkImage(
                                          imageUrl: allPostData[allPostIndex]
                                              ["profilepic"],
                                          width: 40,
                                          height: 40,
                                          fit: BoxFit.cover,
                                          placeholder: (context, url) =>
                                              Container(
                                                  width: 40,
                                                  height: 40,
                                                  color: Colors.white,
                                                  child: Image.network(
                                                    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                                  )),
                                          errorWidget: (context, url, error) =>
                                              Icon(Icons.error),
                                        ),
                                      ),
                                    ),
                                  ),
                                ),
                                SizedBox(
                                  width: 10,
                                ),
                                Column(
                                  crossAxisAlignment: CrossAxisAlignment.start,
                                  children: [
                                    RichText(
                                      text: TextSpan(
                                          text: allPostData[allPostIndex]
                                                  ["first_name"] +
                                              " " +
                                              allPostData[allPostIndex]
                                                  ["last_name"],
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 15,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            fontWeight: FontWeight.bold,
                                          ),
                                          children: <TextSpan>[
                                            TextSpan(
                                              text: ', ' +
                                                  allPostData[allPostIndex]
                                                      ["city"],
                                              style: TextStyle(
                                                fontFamily: 'Nunito Sans',
                                                fontSize: 12,
                                                color: Color.fromRGBO(
                                                    0, 0, 0, 0.7),
                                                fontWeight: FontWeight.w500,
                                              ),
                                            )
                                          ]),
                                    ),
                                    Text(
                                      "${allPostData[allPostIndex]["school_name"]}" +
                                          ", " +
                                          "Grade " +
                                          allPostData[allPostIndex]["grade"]
                                              .toString(),
                                      style: TextStyle(
                                        fontFamily: 'Nunito Sans',
                                        fontSize: 12,
                                        color: Color.fromRGBO(0, 0, 0, 0.7),
                                        fontWeight: FontWeight.normal,
                                      ),
                                    ),
                                  ],
                                ),
                              ],
                            ),
                          ),
                          IconButton(
                              icon: Icon(FontAwesome5.ellipsis_h,
                                  color: Color.fromRGBO(0, 0, 0, 0.8),
                                  size: 13),
                              onPressed: () {}),
                        ],
                      ),
                    ),
                    InkWell(
                      onTap: () {},
                      child: Container(
                        width: MediaQuery.of(context).size.width - 60,
                        margin: EdgeInsets.fromLTRB(10, 10, 0, 2),
                        child: ReadMoreText(
                          allPostData[allPostIndex]["comment"] == null
                              ? ""
                              : allPostData[allPostIndex]["comment"],
                          textAlign: TextAlign.left,
                          trimLines: 4,
                          colorClickableText: Color(0xff0962ff),
                          trimMode: TrimMode.Line,
                          trimCollapsedText: 'read more',
                          trimExpandedText: 'Show less',
                          style: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 16,
                            color: Color.fromRGBO(0, 0, 0, 0.8),
                            fontWeight: FontWeight.w400,
                          ),
                          lessStyle: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 12,
                            color: Color(0xff0962ff),
                            fontWeight: FontWeight.w700,
                          ),
                          moreStyle: TextStyle(
                            fontFamily: 'Nunito Sans',
                            fontSize: 12,
                            color: Color(0xff0962ff),
                            fontWeight: FontWeight.w700,
                          ),
                        ),
                      ),
                    ),
                    post_type == "Mood"
                        ? Container(
                            width: _width! > 550 ? 450 : _width! - 70,
                            padding: EdgeInsets.all(10),
                            margin: EdgeInsets.only(top: 20),
                            decoration: BoxDecoration(
                                color: Color.fromRGBO(242, 246, 248, 1),
                                border:
                                    Border.all(color: Colors.white, width: 2),
                                borderRadius: BorderRadius.circular(10)),
                            child: Column(children: [
                              Padding(
                                padding: const EdgeInsets.only(
                                    left: (15.0), right: 10),
                                child: Row(
                                  mainAxisAlignment:
                                      MainAxisAlignment.spaceBetween,
                                  children: [
                                    Container(
                                      child: Row(
                                        children: [
                                          InkWell(
                                            child: CircleAvatar(
                                              child: ClipOval(
                                                child: Container(
                                                  child: CachedNetworkImage(
                                                    imageUrl: allMoodPostData[i]
                                                        ["profilepic"],
                                                    width: 40,
                                                    height: 40,
                                                    fit: BoxFit.cover,
                                                    placeholder: (context,
                                                            url) =>
                                                        Container(
                                                            width: 40,
                                                            height: 40,
                                                            color: Colors.white,
                                                            child:
                                                                Image.network(
                                                              "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                                            )),
                                                    errorWidget:
                                                        (context, url, error) =>
                                                            Icon(Icons.error),
                                                  ),
                                                ),
                                              ),
                                            ),
                                          ),
                                          SizedBox(
                                            width: 10,
                                          ),
                                          _chooseHeaderToViewSMPost(
                                              allMoodPostData[i]["user_mood"],
                                              i, [], []),
                                        ],
                                      ),
                                    ),
                                    IconButton(
                                        icon: Icon(FontAwesome5.ellipsis_h,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 13),
                                        onPressed: () {}),
                                  ],
                                ),
                              ),
                              InkWell(
                                onTap: () {
                                  setState(() {
                                    isPostExpanded[allPostIndex] =
                                        !isPostExpanded[allPostIndex];
                                  });
                                },
                                child: Container(
                                  width:
                                      MediaQuery.of(context).size.width - 100,
                                  margin: EdgeInsets.fromLTRB(10, 10, 0, 2),
                                  child: ReadMoreText(
                                    isPostExpanded[allPostIndex] == false
                                        ? allMoodPostData[i]["message"]
                                                    .toString()
                                                    .length <
                                                40
                                            ? allMoodPostData[i]["message"]
                                            : "${allMoodPostData[i]["message"].toString().substring(0, 40)}..."
                                        : allMoodPostData[i]["message"],
                                    textAlign: TextAlign.left,
                                    trimLines: 4,
                                    colorClickableText: Color(0xff0962ff),
                                    trimMode: TrimMode.Line,
                                    trimCollapsedText: 'read more',
                                    trimExpandedText: 'Show less',
                                    style: TextStyle(
                                      fontFamily: 'Nunito Sans',
                                      fontSize: 14,
                                      color: Color.fromRGBO(0, 0, 0, 0.8),
                                      fontWeight: FontWeight.w400,
                                    ),
                                    lessStyle: TextStyle(
                                      fontFamily: 'Nunito Sans',
                                      fontSize: 12,
                                      color: Color(0xff0962ff),
                                      fontWeight: FontWeight.w700,
                                    ),
                                    moreStyle: TextStyle(
                                      fontFamily: 'Nunito Sans',
                                      fontSize: 12,
                                      color: Color(0xff0962ff),
                                      fontWeight: FontWeight.w700,
                                    ),
                                  ),
                                ),
                              ),
                            ]))
                        : post_type == "cause|teachunprevilagedKids"
                            ? Container(
                                width: _width! > 550 ? 450 : _width! - 70,
                                padding: EdgeInsets.all(10),
                                margin: EdgeInsets.only(top: 20),
                                decoration: BoxDecoration(
                                    color: Color.fromRGBO(242, 246, 248, 1),
                                    border: Border.all(
                                        color: Colors.white, width: 2),
                                    borderRadius: BorderRadius.circular(10)),
                                child: Column(children: [
                                  Padding(
                                    padding: const EdgeInsets.only(
                                        left: (5.0), right: 2),
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.spaceBetween,
                                      children: [
                                        Container(
                                          child: Row(
                                            children: [
                                              InkWell(
                                                child: CircleAvatar(
                                                  child: ClipOval(
                                                    child: Container(
                                                      child: CachedNetworkImage(
                                                        imageUrl:
                                                            allCausePostData[i]
                                                                ["profilepic"],
                                                        width: 40,
                                                        height: 40,
                                                        fit: BoxFit.cover,
                                                        placeholder: (context,
                                                                url) =>
                                                            Container(
                                                                width: 40,
                                                                height: 40,
                                                                color: Colors
                                                                    .white,
                                                                child: Image
                                                                    .network(
                                                                  "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                                                )),
                                                        errorWidget: (context,
                                                                url, error) =>
                                                            Icon(Icons.error),
                                                      ),
                                                    ),
                                                  ),
                                                ),
                                              ),
                                              SizedBox(
                                                width: 10,
                                              ),
                                              Container(
                                                child: Column(
                                                  crossAxisAlignment:
                                                      CrossAxisAlignment.start,
                                                  children: [
                                                    Row(children: [
                                                      Text(
                                                        allCausePostData[i]
                                                                ["first_name"] +
                                                            " " +
                                                            allCausePostData[i]
                                                                ["last_name"],
                                                        style: TextStyle(
                                                          fontFamily:
                                                              'Nunito Sans',
                                                          fontSize: 15,
                                                          color: Color.fromRGBO(
                                                              0, 0, 0, 0.8),
                                                          fontWeight:
                                                              FontWeight.bold,
                                                        ),
                                                      ),
                                                      Text(
                                                          '   has Created a Cause ',
                                                          style: TextStyle(
                                                              fontSize: 13,
                                                              color: Colors
                                                                  .black87,
                                                              fontWeight:
                                                                  FontWeight
                                                                      .w600)),
                                                      Container(
                                                          height: 20,
                                                          width: 20,
                                                          child: Image.network(
                                                              'https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2FcauseEmoji.png?alt=media&token=e088aaec-3089-4773-8fb2-fc5e54e3c731')),
                                                    ]),
                                                    Row(
                                                      children: [
                                                        Text(
                                                            'to Educate UnderPrivileged Childrens.',
                                                            style: TextStyle(
                                                              fontSize: 15,
                                                              color: Color
                                                                  .fromRGBO(
                                                                      0,
                                                                      0,
                                                                      0,
                                                                      0.75),
                                                              fontWeight:
                                                                  FontWeight
                                                                      .bold,
                                                            ))
                                                      ],
                                                    ),
                                                  ],
                                                ),
                                              ),
                                            ],
                                          ),
                                        ),
                                        IconButton(
                                            icon: Icon(FontAwesome5.ellipsis_h,
                                                color: Color.fromRGBO(
                                                    0, 0, 0, 0.8),
                                                size: 10),
                                            onPressed: () {}),
                                      ],
                                    ),
                                  ),
                                  InkWell(
                                    onTap: () {},
                                    child: Container(
                                      width: MediaQuery.of(context).size.width -
                                          100,
                                      margin: EdgeInsets.fromLTRB(10, 10, 0, 2),
                                      child: ReadMoreText(
                                        allCausePostData[i]["message"],
                                        textAlign: TextAlign.left,
                                        trimLines: 4,
                                        colorClickableText: Color(0xff0962ff),
                                        trimMode: TrimMode.Line,
                                        trimCollapsedText: 'read more',
                                        trimExpandedText: 'Show less',
                                        style: TextStyle(
                                          fontFamily: 'Nunito Sans',
                                          fontSize: 14,
                                          color: Color.fromRGBO(0, 0, 0, 0.8),
                                          fontWeight: FontWeight.w400,
                                        ),
                                        lessStyle: TextStyle(
                                          fontFamily: 'Nunito Sans',
                                          fontSize: 12,
                                          color: Color(0xff0962ff),
                                          fontWeight: FontWeight.w700,
                                        ),
                                        moreStyle: TextStyle(
                                          fontFamily: 'Nunito Sans',
                                          fontSize: 12,
                                          color: Color(0xff0962ff),
                                          fontWeight: FontWeight.w700,
                                        ),
                                      ),
                                    ),
                                  ),
                                ]))
                            : post_type == "businessideas"
                                ? Container(
                                    width: _width! > 550 ? 450 : _width! - 70,
                                    padding: EdgeInsets.all(10),
                                    margin: EdgeInsets.only(top: 20),
                                    decoration: BoxDecoration(
                                        color: Color.fromRGBO(242, 246, 248, 1),
                                        border: Border.all(
                                            color: Colors.white, width: 2),
                                        borderRadius:
                                            BorderRadius.circular(10)),
                                    child: Column(children: [
                                      Padding(
                                        padding: const EdgeInsets.only(
                                            left: (5.0), right: 5),
                                        child: Row(
                                          mainAxisAlignment:
                                              MainAxisAlignment.spaceBetween,
                                          children: [
                                            Container(
                                              child: Row(
                                                children: [
                                                  InkWell(
                                                    child: CircleAvatar(
                                                      child: ClipOval(
                                                        child: Container(
                                                          child:
                                                              CachedNetworkImage(
                                                            imageUrl:
                                                                allBIdeasPostData[
                                                                        i][
                                                                    "profilepic"],
                                                            width: 40,
                                                            height: 40,
                                                            fit: BoxFit.cover,
                                                            placeholder: (context,
                                                                    url) =>
                                                                Container(
                                                                    width: 40,
                                                                    height: 40,
                                                                    color: Colors
                                                                        .white,
                                                                    child: Image
                                                                        .asset(
                                                                      "/loadingimg.gif",
                                                                    )),
                                                            errorWidget:
                                                                (context, url,
                                                                        error) =>
                                                                    Icon(Icons
                                                                        .error),
                                                          ),
                                                        ),
                                                      ),
                                                    ),
                                                  ),
                                                  SizedBox(
                                                    width: 10,
                                                  ),
                                                  Container(
                                                    child: Column(
                                                      crossAxisAlignment:
                                                          CrossAxisAlignment
                                                              .start,
                                                      children: [
                                                        RichText(
                                                          text: TextSpan(
                                                              text: allBIdeasPostData[
                                                                          i][
                                                                      "first_name"] +
                                                                  " " +
                                                                  allBIdeasPostData[
                                                                          i][
                                                                      "last_name"],
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 15,
                                                                color: Color
                                                                    .fromRGBO(
                                                                        0,
                                                                        0,
                                                                        0,
                                                                        0.8),
                                                                fontWeight:
                                                                    FontWeight
                                                                        .bold,
                                                              ),
                                                              children: const <
                                                                  TextSpan>[
                                                                TextSpan(
                                                                  text:
                                                                      ' has Discussed a Business Idea',
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        12,
                                                                    color: Color
                                                                        .fromRGBO(
                                                                            0,
                                                                            0,
                                                                            0,
                                                                            0.7),
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w500,
                                                                  ),
                                                                )
                                                              ]),
                                                        ),
                                                      ],
                                                    ),
                                                  )
                                                ],
                                              ),
                                            ),
                                            IconButton(
                                                icon: Icon(
                                                    FontAwesome5.ellipsis_h,
                                                    color: Color.fromRGBO(
                                                        0, 0, 0, 0.8),
                                                    size: 13),
                                                onPressed: () {
                                                  //  moreOptionsSMPostViewer(context, i);
                                                }),
                                          ],
                                        ),
                                      ),
                                      Container(
                                          decoration: BoxDecoration(
                                            borderRadius: BorderRadius.all(
                                                Radius.circular(10)),
                                            image: DecorationImage(
                                                colorFilter:
                                                    new ColorFilter.mode(
                                                        Colors.black
                                                            .withOpacity(0.3),
                                                        BlendMode.dstATop),
                                                image: AssetImage(
                                                    allBIdeasPostData[i]
                                                        ["theme"]),
                                                fit: BoxFit.cover),
                                          ),
                                          width: _width! > 550
                                              ? 450
                                              : _width! - 75,
                                          margin:
                                              EdgeInsets.fromLTRB(10, 10, 0, 2),
                                          child: Padding(
                                            padding: const EdgeInsets.all(10.0),
                                            child: Column(
                                              children: [
                                                SizedBox(
                                                  height: 3,
                                                ),
                                                Container(
                                                  margin: EdgeInsets.only(
                                                      bottom: 17),
                                                  width: _width! > 550
                                                      ? 400
                                                      : _width! - 100,
                                                  child: Row(
                                                    mainAxisAlignment:
                                                        MainAxisAlignment.start,
                                                    children: [
                                                      Text(
                                                        "Title : ",
                                                        style: TextStyle(
                                                          fontFamily:
                                                              'Nunito Sans',
                                                          fontSize: 14,
                                                          fontWeight:
                                                              FontWeight.w700,
                                                        ),
                                                      ),
                                                      Text(
                                                        allBIdeasPostData[i]
                                                            ["title"],
                                                        style: TextStyle(
                                                          fontFamily:
                                                              'Nunito Sans',
                                                          fontSize: 14,
                                                          fontWeight:
                                                              FontWeight.w500,
                                                        ),
                                                      ),
                                                    ],
                                                  ),
                                                ),
                                                SizedBox(
                                                  height: 17,
                                                ),
                                                Container(
                                                  margin: EdgeInsets.only(
                                                      bottom: 17),
                                                  width: _width! > 550
                                                      ? 400
                                                      : _width! - 100,
                                                  child: Row(
                                                      mainAxisAlignment:
                                                          MainAxisAlignment.end,
                                                      children: [
                                                        InkWell(
                                                          onTap: () {
                                                            setState(() {
                                                              isBIdeasPostExpanded[
                                                                      i] =
                                                                  !isBIdeasPostExpanded[
                                                                      i];
                                                            });
                                                          },
                                                          child: Container(
                                                            child: Text(
                                                                isBIdeasPostExpanded[
                                                                            i] ==
                                                                        false
                                                                    ? "....See more"
                                                                    : "Hide",
                                                                style: TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w600,
                                                                    color: Colors
                                                                        .blue)),
                                                          ),
                                                        )
                                                      ]),
                                                ),
                                                isBIdeasPostExpanded[i] == true
                                                    ? Container(
                                                        child: Column(
                                                            children: [
                                                            (allBIdeasPostData[
                                                                            i][
                                                                        "identification"] !=
                                                                    "")
                                                                ? Container(
                                                                    margin: EdgeInsets.only(
                                                                        bottom:
                                                                            17),
                                                                    width: _width! >
                                                                            550
                                                                        ? 400
                                                                        : _width! -
                                                                            100,
                                                                    child: Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .start,
                                                                      children: [
                                                                        Text(
                                                                          "Identifiction of problem : ",
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                14,
                                                                            fontWeight:
                                                                                FontWeight.w700,
                                                                          ),
                                                                        ),
                                                                        Container(
                                                                          width:
                                                                              170,
                                                                          child:
                                                                              Text(
                                                                            allBIdeasPostData[i]["identification"],
                                                                            style:
                                                                                TextStyle(
                                                                              fontFamily: 'Nunito Sans',
                                                                              fontSize: 14,
                                                                              fontWeight: FontWeight.w500,
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                  )
                                                                : SizedBox(),
                                                            (allBIdeasPostData[
                                                                            i][
                                                                        "solution"] !=
                                                                    "")
                                                                ? Container(
                                                                    margin: EdgeInsets.only(
                                                                        bottom:
                                                                            17),
                                                                    child: Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .start,
                                                                      children: [
                                                                        Text(
                                                                          "Solution to identified Problem : ",
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                14,
                                                                            fontWeight:
                                                                                FontWeight.w700,
                                                                          ),
                                                                        ),
                                                                        Container(
                                                                          width:
                                                                              170,
                                                                          child:
                                                                              Text(
                                                                            allBIdeasPostData[i]["solution"],
                                                                            style:
                                                                                TextStyle(
                                                                              fontFamily: 'Nunito Sans',
                                                                              fontSize: 14,
                                                                              fontWeight: FontWeight.w500,
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                  )
                                                                : SizedBox(),
                                                            (allBIdeasPostData[
                                                                            i][
                                                                        "target"] !=
                                                                    "")
                                                                ? Container(
                                                                    width: _width! >
                                                                            550
                                                                        ? 400
                                                                        : _width! -
                                                                            100,
                                                                    margin: EdgeInsets.only(
                                                                        bottom:
                                                                            17),
                                                                    child: Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .start,
                                                                      children: [
                                                                        Text(
                                                                          "Target market : ",
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                14,
                                                                            fontWeight:
                                                                                FontWeight.w700,
                                                                          ),
                                                                        ),
                                                                        Container(
                                                                          width:
                                                                              250,
                                                                          child:
                                                                              Text(
                                                                            allBIdeasPostData[i]["target"],
                                                                            style:
                                                                                TextStyle(
                                                                              fontFamily: 'Nunito Sans',
                                                                              fontSize: 14,
                                                                              fontWeight: FontWeight.w500,
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                  )
                                                                : SizedBox(),
                                                            (allBIdeasPostData[
                                                                            i][
                                                                        "competitors"] !=
                                                                    "")
                                                                ? Container(
                                                                    width: _width! >
                                                                            550
                                                                        ? 400
                                                                        : _width! -
                                                                            100,
                                                                    margin: EdgeInsets.only(
                                                                        bottom:
                                                                            17),
                                                                    child: Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .start,
                                                                      children: [
                                                                        Text(
                                                                          "Competitors : ",
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                14,
                                                                            fontWeight:
                                                                                FontWeight.w700,
                                                                          ),
                                                                        ),
                                                                        Container(
                                                                          width:
                                                                              250,
                                                                          child:
                                                                              Text(
                                                                            allBIdeasPostData[i]["competitors"],
                                                                            style:
                                                                                TextStyle(
                                                                              fontFamily: 'Nunito Sans',
                                                                              fontSize: 14,
                                                                              fontWeight: FontWeight.w500,
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                  )
                                                                : SizedBox(),
                                                            (allBIdeasPostData[
                                                                            i][
                                                                        "swot"] !=
                                                                    "")
                                                                ? Container(
                                                                    width: _width! >
                                                                            550
                                                                        ? 400
                                                                        : _width! -
                                                                            100,
                                                                    margin: EdgeInsets.only(
                                                                        bottom:
                                                                            17),
                                                                    child: Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .start,
                                                                      children: [
                                                                        Text(
                                                                          "SWOT Analysis : ",
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                14,
                                                                            fontWeight:
                                                                                FontWeight.w700,
                                                                          ),
                                                                        ),
                                                                        Container(
                                                                          width:
                                                                              250,
                                                                          child:
                                                                              Text(
                                                                            allBIdeasPostData[i]["swot"],
                                                                            style:
                                                                                TextStyle(
                                                                              fontFamily: 'Nunito Sans',
                                                                              fontSize: 14,
                                                                              fontWeight: FontWeight.w500,
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                  )
                                                                : SizedBox(),
                                                            (allBIdeasPostData[
                                                                            i][
                                                                        "funds"] !=
                                                                    "")
                                                                ? Container(
                                                                    width: _width! >
                                                                            550
                                                                        ? 400
                                                                        : _width! -
                                                                            100,
                                                                    margin: EdgeInsets.only(
                                                                        bottom:
                                                                            17),
                                                                    child: Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .start,
                                                                      children: [
                                                                        Text(
                                                                          "Funds required : ",
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                14,
                                                                            fontWeight:
                                                                                FontWeight.w700,
                                                                          ),
                                                                        ),
                                                                        Container(
                                                                          width:
                                                                              250,
                                                                          child:
                                                                              Text(
                                                                            allBIdeasPostData[i]["funds"],
                                                                            style:
                                                                                TextStyle(
                                                                              fontFamily: 'Nunito Sans',
                                                                              fontSize: 14,
                                                                              fontWeight: FontWeight.w500,
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                  )
                                                                : SizedBox(),
                                                          ]))
                                                    : SizedBox()
                                              ],
                                            ),
                                          )),
                                    ]))
                                : post_type == "projectdiscuss"
                                    ? Container(
                                        width:
                                            _width! > 550 ? 450 : _width! - 70,
                                        padding: EdgeInsets.all(10),
                                        margin: EdgeInsets.only(top: 20),
                                        decoration: BoxDecoration(
                                            color: Color.fromRGBO(
                                                242, 246, 248, 1),
                                            border: Border.all(
                                                color: Colors.white, width: 2),
                                            borderRadius:
                                                BorderRadius.circular(10)),
                                        child: Column(children: [
                                          Padding(
                                            padding: const EdgeInsets.only(
                                                left: (5.0), right: 2),
                                            child: Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment
                                                      .spaceBetween,
                                              children: [
                                                Container(
                                                  child: Row(
                                                    children: [
                                                      InkWell(
                                                        child: CircleAvatar(
                                                          child: ClipOval(
                                                            child: Container(
                                                              child:
                                                                  CachedNetworkImage(
                                                                imageUrl:
                                                                    allProjectsPostData[
                                                                            i][
                                                                        "profilepic"],
                                                                width: 40,
                                                                height: 40,
                                                                fit: BoxFit
                                                                    .cover,
                                                                placeholder: (context,
                                                                        url) =>
                                                                    Container(
                                                                        width:
                                                                            40,
                                                                        height:
                                                                            40,
                                                                        color: Colors
                                                                            .white,
                                                                        child: Image
                                                                            .asset(
                                                                          "/loadingimg.gif",
                                                                        )),
                                                                errorWidget: (context,
                                                                        url,
                                                                        error) =>
                                                                    Icon(Icons
                                                                        .error),
                                                              ),
                                                            ),
                                                          ),
                                                        ),
                                                      ),
                                                      SizedBox(
                                                        width: 10,
                                                      ),
                                                      Container(
                                                        child: Column(
                                                          crossAxisAlignment:
                                                              CrossAxisAlignment
                                                                  .start,
                                                          children: [
                                                            RichText(
                                                              text: TextSpan(
                                                                  text: allProjectsPostData[
                                                                              i]
                                                                          [
                                                                          "first_name"] +
                                                                      " " +
                                                                      allProjectsPostData[
                                                                              i]
                                                                          [
                                                                          "last_name"],
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        15,
                                                                    color: Color
                                                                        .fromRGBO(
                                                                            0,
                                                                            0,
                                                                            0,
                                                                            0.8),
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .bold,
                                                                  ),
                                                                  children: const <
                                                                      TextSpan>[
                                                                    TextSpan(
                                                                      text:
                                                                          ' has discussed a project on',
                                                                      style:
                                                                          TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            12,
                                                                        color: Color.fromRGBO(
                                                                            0,
                                                                            0,
                                                                            0,
                                                                            0.7),
                                                                        fontWeight:
                                                                            FontWeight.w500,
                                                                      ),
                                                                    )
                                                                  ]),
                                                            ),
                                                          ],
                                                        ),
                                                      )
                                                    ],
                                                  ),
                                                ),
                                              ],
                                            ),
                                          ),
                                          SizedBox(
                                            height: 20,
                                          ),
                                          Container(
                                              width: _width! > 550
                                                  ? 400
                                                  : _width! - 100,
                                              child: Text(allProjectsPostData[i]
                                                  ["content"])),
                                          SizedBox(
                                            height: 5,
                                          ),
                                        ]))
                                    : SizedBox(),
                    Container(
                      padding: EdgeInsets.fromLTRB(10, 10, 10, 0),
                      child: Column(
                        mainAxisAlignment: MainAxisAlignment.center,
                        children: [
                          Padding(
                            padding:
                                const EdgeInsets.only(left: 8.0, right: 8.0),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.spaceBetween,
                              children: [
                                InkWell(
                                  onTap: () {},
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: [
                                        Text(
                                          allMoodPostData[i]["like_count"]
                                              .toString(),
                                          style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              color: Color.fromRGBO(
                                                  205, 61, 61, 1)),
                                        ),
                                        SizedBox(
                                          width: 4,
                                        ),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flike.png?alt=media&token=196c9359-8b79-4dbe-ad4f-650dd13a6d18",
                                            height: 15,
                                            width: 15),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Flaugh.png?alt=media&token=28061e76-ddc3-4a65-a4dd-e8c565f9dbd4",
                                            height: 15,
                                            width: 15),
                                        Image.network(
                                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Freactions%2Fwow.png?alt=media&token=753eae20-2ba2-4c77-ac54-24c520a4174e",
                                            height: 15,
                                            width: 15),
                                      ],
                                    ),
                                  ),
                                ),
                                InkWell(
                                  onTap: () {},
                                  child: Container(
                                    child: RichText(
                                      text: TextSpan(
                                          text: allMoodPostData[i]
                                                  ["comment_count"]
                                              .toString(),
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            color:
                                                Color.fromRGBO(205, 61, 61, 1),
                                          ),
                                          children: const <TextSpan>[
                                            TextSpan(
                                              text: ' Comments',
                                              style: TextStyle(
                                                fontFamily: 'Nunito Sans',
                                                fontSize: 12,
                                                color: Color.fromRGBO(
                                                    0, 0, 0, 0.8),
                                                fontWeight: FontWeight.w500,
                                              ),
                                            )
                                          ]),
                                    ),
                                  ),
                                ),
                                Container(
                                  child: Row(
                                    children: [
                                      SizedBox(
                                        width: 30,
                                      ),
                                      Text(
                                        allMoodPostData[i]["view_count"]
                                            .toString(),
                                        style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            color:
                                                Color.fromRGBO(205, 61, 61, 1)),
                                      ),
                                      SizedBox(
                                        width: 4,
                                      ),
                                      Icon(FontAwesome5.eye,
                                          color: Color.fromRGBO(0, 0, 0, 0.8),
                                          size: 12),
                                    ],
                                  ),
                                )
                              ],
                            ),
                          ),
                          Container(
                              margin:
                                  EdgeInsets.only(left: 2, right: 2, top: 5),
                              color: Colors.black.withOpacity(0.2),
                              height: 0.5,
                              width: MediaQuery.of(context).size.width),
                          Padding(
                            padding:
                                const EdgeInsets.only(left: 8.0, right: 8.0),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.spaceBetween,
                              children: [
                                Container(
                                  padding: EdgeInsets.only(top: 15, bottom: 15),
                                  child: Row(
                                    children: [
                                      Builder(builder: (ctx) {
                                        return ReactionButton<String>(
                                            onReactionChanged: (String? value) {
                                              print(value);
                                              setState(() {
                                                if (allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    'likeinit') {
                                                  networkCRUD
                                                      .addSmPostLikeDetails([
                                                    allMoodPostData[i]
                                                        ["post_id"],
                                                    _currentUserId,
                                                    value
                                                  ]);
                                                  networkCRUD
                                                      .updateSmMoodPostLikeDetails([
                                                    allMoodPostData[i]
                                                        ["post_id"],
                                                    _currentUserId,
                                                    allMoodPostData[i]
                                                            ["like_count"] +
                                                        1,
                                                    allMoodPostData[i]
                                                        ["comment_count"],
                                                    allMoodPostData[i]
                                                        ["view_count"],
                                                    allMoodPostData[i]
                                                        ["impression_count"],
                                                  ]);
                                                  ////////////////////////////notification//////////////////////////////////////
                                                  String notify_id =
                                                      "ntf${allMoodPostData[i]["post_id"]}$comparedate";
                                                  notifyCRUD.sendNotification([
                                                    notify_id,
                                                    "reaction",
                                                    "social",
                                                    _currentUserId,
                                                    allMoodPostData[i]
                                                        ["user_id"],
                                                    countData!.value[
                                                                "usertoken"][
                                                            allMoodPostData[i]
                                                                ["user_id"]]
                                                        ["tokenid"],
                                                    "You got one reaction!",
                                                    "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} reacted on your post.",
                                                    allMoodPostData[i]
                                                        ["user_id"],
                                                    "shared",
                                                    "false",
                                                    comparedate,
                                                    "add"
                                                  ]);
                                                  //////////////////////////////////////////////////////////////////////////
                                                  allPostLikeDataLocal[
                                                      allPostIndex] = value;
                                                } else if (allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    value) {
                                                  networkCRUD
                                                      .updateSmMoodPostLikeDetails([
                                                    allMoodPostData[i]
                                                        ["post_id"],
                                                    _currentUserId,
                                                    allMoodPostData[i]
                                                            ["like_count"] -
                                                        1,
                                                    allMoodPostData[i]
                                                        ["comment_count"],
                                                    allMoodPostData[i]
                                                        ["view_count"],
                                                    allMoodPostData[i]
                                                        ["impression_count"],
                                                  ]);
                                                  networkCRUD
                                                      .deleteSmPostLikeDetails([
                                                    allMoodPostData[i]
                                                        ["post_id"],
                                                    _currentUserId
                                                  ]);
                                                  allPostLikeDataLocal[
                                                          allPostIndex] =
                                                      "likeinit";
                                                } else {
                                                  networkCRUD
                                                      .updateSmPostLikeDetails([
                                                    value,
                                                    allMoodPostData[i]
                                                        ["post_id"],
                                                    _currentUserId
                                                  ]);
                                                  allPostLikeDataLocal[
                                                      allPostIndex] = value;
                                                }
                                              });
                                            },
                                            reactions: reaction,
                                            initialReaction: allPostLikeDataLocal[
                                                        allPostIndex] ==
                                                    "Like"
                                                ? reaction[0]
                                                : allPostLikeDataLocal[
                                                            allPostIndex] ==
                                                        "Love"
                                                    ? reaction[1]
                                                    : allPostLikeDataLocal[
                                                                allPostIndex] ==
                                                            "Haha"
                                                        ? reaction[2]
                                                        : allPostLikeDataLocal[
                                                                    allPostIndex] ==
                                                                "Yay"
                                                            ? reaction[3]
                                                            : allPostLikeDataLocal[
                                                                        allPostIndex] ==
                                                                    "Wow"
                                                                ? reaction[4]
                                                                : allPostLikeDataLocal[
                                                                            allPostIndex] ==
                                                                        "Angry"
                                                                    ? reaction[
                                                                        5]
                                                                    : Reaction(
                                                                        value:
                                                                            null,
                                                                        icon:
                                                                            Row(
                                                                          children: const [
                                                                            Icon(FontAwesome5.thumbs_up,
                                                                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                                                                size: 14),
                                                                            Text(
                                                                              "  Like",
                                                                              style: TextStyle(fontSize: 13, fontWeight: FontWeight.w700, color: Colors.black45),
                                                                            )
                                                                          ],
                                                                        ),
                                                                      ));
                                      }),
                                    ],
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    setState(() {
                                      selectedPostIndexToComment = allPostIndex;
                                    });
                                    _addCommentDialogBox();
                                  },
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: const [
                                        Icon(FontAwesome5.comment,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 14),
                                        Text(
                                          "  Comment",
                                          style: TextStyle(
                                              fontSize: 13,
                                              fontWeight: FontWeight.w700,
                                              color: Colors.black45),
                                        )
                                      ],
                                    ),
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    _shareSocialPostDialog(i, allPostIndex);
                                  },
                                  child: Container(
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: const [
                                        Icon(FontAwesome5.share,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            size: 14),
                                        Text(
                                          "  Share",
                                          style: TextStyle(
                                              fontSize: 13,
                                              fontWeight: FontWeight.w700,
                                              color: Colors.black45),
                                        )
                                      ],
                                    ),
                                  ),
                                ),
                              ],
                            ),
                          ),
                          Container(
                              margin:
                                  EdgeInsets.only(left: 2, right: 2, top: 5),
                              color: Colors.black.withOpacity(0.2),
                              height: 0.5,
                              width: MediaQuery.of(context).size.width),
                          SizedBox(height: 10),
                          _commentView(allPostIndex)
                        ],
                      ),
                    ),
                  ],
                ),
              ),
            ],
          )
        : SizedBox();
  }

  void _viewFullBlogDialog(int blogIndex, int allPostIndex) {
    showDialog(
        context: context,
        barrierColor: Colors.grey.withOpacity(0.2),
        barrierDismissible: false,
        builder: (_) => StatefulBuilder(builder: (context, setState) {
              return AlertDialog(
                contentPadding: EdgeInsets.all(20),
                shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(10.0)),
                title: Column(
                  mainAxisSize: MainAxisSize.min,
                  children: [
                    Row(
                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
                      children: [
                        SizedBox(width: 30),
                        Text(
                          "Blog",
                          style: TextStyle(
                            fontSize: 20,
                            color: Color(0xCB000000),
                            fontWeight: FontWeight.w900,
                          ),
                        ),
                        IconButton(
                          onPressed: () {
                            Navigator.of(context).pop();
                          },
                          icon: Tab(
                              child: Icon(Icons.cancel_rounded,
                                  color: Colors.black45, size: 25)),
                        )
                      ],
                    ),
                    SizedBox(height: 20),
                    Container(height: 1, width: 500, color: Colors.grey[200]),
                  ],
                ),
                content: Container(
                  height: 550,
                  width: 600,
                  child: ListView(
                    children: [
                      Html(
                        shrinkWrap: true,
                        data: allBlogPostData[blogIndex]["blog_content"],
                      ),
                      Container(
                          height: 2,
                          width: 600,
                          color: Colors.black54,
                          margin: EdgeInsets.all(30)),
                      Row(
                          mainAxisSize: MainAxisSize.min,
                          mainAxisAlignment: MainAxisAlignment.end,
                          children: [
                            Padding(
                              padding: const EdgeInsets.only(right: 20.0),
                              child: Text(
                                "~ ${allBlogPostData[blogIndex]["blogger_name"]}",
                                style: TextStyle(
                                  fontFamily: 'Nunito Sans',
                                  fontSize: 16,
                                  color: Colors.black87,
                                  fontWeight: FontWeight.w800,
                                ),
                              ),
                            ),
                          ]),
                      SizedBox(height: 100),
                    ],
                  ),
                ),
              );
            }));
  }

  Widget viewAllImages(List imagesFile) {
    return imagesFile.length == 1
        ? InkWell(
            child: Container(
                height: 200,
                width: 200,
                child: CachedNetworkImage(
                  imageUrl: imagesFile[0],
                  fit: BoxFit.contain,
                  placeholder: (context, url) => Image.network(
                    "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                  ),
                  errorWidget: (context, url, error) => Icon(Icons.error),
                )),
          )
        : InkWell(
            onTap: () {},
            child: Container(
              height: 300,
              child: GridView.count(
                controller: _scrollController,
                crossAxisCount: 2,
                childAspectRatio: imagesFile.length > 2 ? 1.3 : 0.65,
                children: List.generate(
                    imagesFile.length > 4 ? 4 : imagesFile.length, (index) {
                  return ((index == 3) && (imagesFile.length > 4))
                      ? Container(
                          height: 150,
                          width: 150,
                          child: Stack(
                            fit: StackFit.expand,
                            children: [
                              CachedNetworkImage(
                                imageUrl: imagesFile[index],
                                fit: BoxFit.contain,
                                placeholder: (context, url) => Image.network(
                                  "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                ),
                                errorWidget: (context, url, error) =>
                                    Icon(Icons.error),
                              ),
                              Positioned.fill(
                                child: Container(
                                  alignment: Alignment.center,
                                  color: Colors.black54,
                                  child: Text(
                                    '+' + "${imagesFile.length - 4}",
                                    style: TextStyle(
                                        fontSize: 32, color: Colors.white),
                                  ),
                                ),
                              ),
                            ],
                          ),
                        )
                      : CachedNetworkImage(
                          imageUrl: imagesFile[index],
                          fit: BoxFit.cover,
                          placeholder: (context, url) => Image.network(
                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                          ),
                          errorWidget: (context, url, error) =>
                              Icon(Icons.error),
                        );
                }),
              ),
            ),
          );
  }

  //view comment
  void tapCallbackHandler(String i) {}
  _commentView(int postIndex) {
    int cmntSelectID = -1;
    for (int i = 0; i < allPostCommentIDs.length; i++) {
      if (allPostCommentIDs[i] == allPostData[postIndex]["post_id"]) {
        cmntSelectID = i;
      }
    }
    return cmntSelectID != -1
        ? Column(
            children: [
              SizedBox(height: 5),
              allPostwiseCmntData[cmntSelectID].length > 1
                  ? Row(
                      mainAxisAlignment: MainAxisAlignment.start,
                      children: [
                        InkWell(
                          onTap: () {
                            setState(() {
                              isShowAllComment[postIndex] =
                                  !isShowAllComment[postIndex];
                            });
                          },
                          child: Container(
                            child: Text(
                                isShowAllComment[postIndex] == true
                                    ? "Hide comments"
                                    : "View ${allPostwiseCmntData[cmntSelectID].length - 1} more comments",
                                style: TextStyle(
                                    fontSize: 14,
                                    color: Colors.black.withOpacity(0.6),
                                    fontWeight: FontWeight.bold)),
                          ),
                        ),
                      ],
                    )
                  : SizedBox(),
              SizedBox(height: 5),
              Container(
                child: ListView.builder(
                  shrinkWrap: true,
                  itemCount: isShowAllComment[postIndex] == true
                      ? allPostwiseCmntData[cmntSelectID].length
                      : 1,
                  itemBuilder: (context, index) {
                    DateTime tempDate = DateTime.parse(
                        allPostwiseCmntData[cmntSelectID][index]["compare_date"]
                            .toString()
                            .substring(0, 8));
                    String current_date =
                        DateFormat.yMMMMd('en_US').format(tempDate);
                    return Container(
                      margin: EdgeInsets.only(right: 10),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.start,
                        crossAxisAlignment: CrossAxisAlignment.start,
                        children: [
                          Container(
                            height: 35,
                            width: 35,
                            margin: EdgeInsets.all(10),
                            child: CircleAvatar(
                              child: ClipOval(
                                child: Container(
                                  child: Image.network(
                                    allPostwiseCmntData[cmntSelectID][index]
                                            ["profilepic"]
                                        .toString(),
                                  ),
                                ),
                              ),
                            ),
                          ),
                          Column(
                            crossAxisAlignment: CrossAxisAlignment.start,
                            children: [
                              SizedBox(height: 10),
                              Container(
                                width: 300,
                                padding: EdgeInsets.all(10),
                                decoration: BoxDecoration(
                                    color: Colors.white,
                                    borderRadius:
                                        BorderRadius.all(Radius.circular(10))),
                                child: Column(
                                  mainAxisAlignment: MainAxisAlignment.start,
                                  crossAxisAlignment: CrossAxisAlignment.start,
                                  children: [
                                    Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.spaceBetween,
                                      crossAxisAlignment:
                                          CrossAxisAlignment.center,
                                      children: [
                                        Text(
                                          allPostwiseCmntData[cmntSelectID]
                                                      [index]["first_name"]
                                                  .toString() +
                                              " " +
                                              allPostwiseCmntData[cmntSelectID]
                                                      [index]["last_name"]
                                                  .toString(),
                                          style: TextStyle(
                                              color: Color(0xFF4D4D4D),
                                              fontSize: 13.5,
                                              fontWeight: FontWeight.w700),
                                        ),
                                        InkWell(
                                          onTap: () {},
                                          child: Container(
                                            child: Icon(
                                              Icons.more_horiz_outlined,
                                              size: 17,
                                              color: Colors.black54,
                                            ),
                                          ),
                                        ),
                                      ],
                                    ),
                                    Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: [
                                        Text(
                                          allPostwiseCmntData[cmntSelectID]
                                                      [index]["school_name"]
                                                  .toString() +
                                              " | Grade " +
                                              allPostwiseCmntData[cmntSelectID]
                                                      [index]["grade"]
                                                  .toString(),
                                          style: TextStyle(
                                              color: Colors.black54,
                                              fontSize: 10,
                                              fontWeight: FontWeight.w400),
                                        ),
                                      ],
                                    ),
                                    Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: [
                                        Text(
                                          "Commented on " + "$current_date",
                                          style: TextStyle(
                                              color: Colors.black54,
                                              fontSize: 10,
                                              fontWeight: FontWeight.w400),
                                        ),
                                      ],
                                    ),
                                    SizedBox(
                                      height: 8,
                                    ),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          isCommentExpanded[cmntSelectID]
                                                  [index] =
                                              !isCommentExpanded[cmntSelectID]
                                                  [index];
                                        });
                                      },
                                      child: ReadMoreText(
                                        allPostwiseCmntData[cmntSelectID][index]
                                                        ["comment"]
                                                    .toString()
                                                    .length >
                                                40
                                            ? isCommentExpanded[cmntSelectID]
                                                        [index] ==
                                                    false
                                                ? allPostwiseCmntData[
                                                                cmntSelectID]
                                                            [index]["comment"]
                                                        .toString()
                                                        .substring(0, 40) +
                                                    "......"
                                                : allPostwiseCmntData[
                                                            cmntSelectID][index]
                                                        ["comment"]
                                                    .toString()
                                            : allPostwiseCmntData[cmntSelectID]
                                                    [index]["comment"]
                                                .toString(),
                                        trimLines: 2,
                                        colorClickableText: Color(0xff0962ff),
                                        trimMode: TrimMode.Line,
                                        trimCollapsedText: 'read more',
                                        trimExpandedText: 'Show less',
                                        style: const TextStyle(
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            fontSize: 15,
                                            fontWeight: FontWeight.w500),
                                        lessStyle: const TextStyle(
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            fontSize: 15,
                                            fontWeight: FontWeight.w500),
                                        moreStyle: const TextStyle(
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            fontSize: 15,
                                            fontWeight: FontWeight.w500),
                                      ),
                                    )
                                  ],
                                ),
                              ),
                              Padding(
                                padding: const EdgeInsets.all(1.0),
                                child: Row(
                                  mainAxisAlignment: MainAxisAlignment.start,
                                  children: [
                                    InkWell(
                                      onTap: () {
                                        if (userDataDB!.get(allPostwiseCmntData[
                                                    cmntSelectID][index]
                                                ["comment_id"]) ==
                                            "like") {
                                          setState(() {
                                            commentLikeCount[cmntSelectID]
                                                    [index] =
                                                commentLikeCount[cmntSelectID]
                                                        [index] -
                                                    1;
                                          });
                                          networkCRUD
                                              .addSmPostLikeDetailsAdvancedLogic([
                                            "FALSE",
                                            allPostwiseCmntData[cmntSelectID]
                                                [index]["comment_id"],
                                            _currentUserId,
                                            "comment",
                                            "like",
                                            commentLikeCount[cmntSelectID]
                                                [index],
                                            0,
                                            0,
                                            0,
                                            commentReplyeCount[cmntSelectID]
                                                [index]
                                          ]);
                                          ////////////////////////////notification//////////////////////////////////////
                                          String notify_id =
                                              "ntf${allPostwiseCmntData[cmntSelectID][index]["comment_id"]}$comparedate";
                                          notifyCRUD.sendNotification([
                                            notify_id,
                                            "reaction",
                                            "comment",
                                            _currentUserId,
                                            allPostwiseCmntData[cmntSelectID]
                                                [index]["user_id"],
                                            countData!.value["usertoken"][
                                                allPostwiseCmntData[
                                                        cmntSelectID][index]
                                                    ["user_id"]]["tokenid"],
                                            "You got one reaction!",
                                            "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} reacted on your comment.",
                                            allPostData[postIndex]["post_id"],
                                            "allpost",
                                            "false",
                                            comparedate,
                                            "delete"
                                          ]);
                                          //////////////////////////////////////////////////////////////////////////
                                          userDataDB!.delete(
                                              allPostwiseCmntData[cmntSelectID]
                                                  [index]["comment_id"]);
                                        } else {
                                          setState(() {
                                            commentLikeCount[cmntSelectID]
                                                    [index] =
                                                commentLikeCount[cmntSelectID]
                                                        [index] +
                                                    1;
                                          });
                                          networkCRUD
                                              .addSmPostLikeDetailsAdvancedLogic([
                                            "TRUE",
                                            allPostwiseCmntData[cmntSelectID]
                                                [index]["comment_id"],
                                            _currentUserId,
                                            "comment",
                                            "like",
                                            commentLikeCount[cmntSelectID]
                                                [index],
                                            0,
                                            0,
                                            0,
                                            commentReplyeCount[cmntSelectID]
                                                [index]
                                          ]);
                                          ////////////////////////////notification//////////////////////////////////////
                                          String notify_id =
                                              "ntf${allPostwiseCmntData[cmntSelectID][index]["comment_id"]}$comparedate";
                                          notifyCRUD.sendNotification([
                                            notify_id,
                                            "reaction",
                                            "comment",
                                            _currentUserId,
                                            allPostwiseCmntData[cmntSelectID]
                                                [index]["user_id"],
                                            countData!.value["usertoken"][
                                                allPostwiseCmntData[
                                                        cmntSelectID][index]
                                                    ["user_id"]]["tokenid"],
                                            "You got one reaction!",
                                            "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} reacted on your comment.",
                                            allPostData[postIndex]["post_id"],
                                            "allpost",
                                            "false",
                                            comparedate,
                                            "add"
                                          ]);
                                          //////////////////////////////////////////////////////////////////////////
                                          userDataDB!.put(
                                              allPostwiseCmntData[cmntSelectID]
                                                  [index]["comment_id"],
                                              "like");
                                        }
                                      },
                                      child: Text(
                                        "Like",
                                        style: TextStyle(
                                            color: userDataDB!.get(
                                                        allPostwiseCmntData[
                                                                    cmntSelectID]
                                                                [index]
                                                            ["comment_id"]) ==
                                                    "like"
                                                ? Color(0xff0962ff)
                                                : Colors.black54,
                                            fontSize: 12,
                                            fontWeight: FontWeight.w700),
                                      ),
                                    ),
                                    SizedBox(
                                      width: 5,
                                    ),
                                    Text(
                                      " " +
                                          commentLikeCount[cmntSelectID][index]
                                              .toString() +
                                          " ",
                                      style: TextStyle(
                                          color: Colors.black54,
                                          fontSize: 12,
                                          fontWeight: FontWeight.w400),
                                    ),
                                    Icon(Entypo.thumbs_up,
                                        color: Color.fromRGBO(0, 0, 0, 0.8),
                                        size: 14),
                                    SizedBox(
                                      width: 5,
                                    ),
                                    Text(
                                      " | ",
                                      style: TextStyle(
                                          color: Colors.black54,
                                          fontSize: 15,
                                          fontWeight: FontWeight.w700),
                                    ),
                                    SizedBox(
                                      width: 5,
                                    ),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          selectedPostIDToreply =
                                              allPostwiseCmntData[cmntSelectID]
                                                  [index]["post_id"];
                                          selectedCommentIDToreply =
                                              allPostwiseCmntData[cmntSelectID]
                                                  [index]["comment_id"];
                                          commentUserIDToreply =
                                              allPostwiseCmntData[cmntSelectID]
                                                  [index]["user_id"];
                                        });
                                        _addReplyDialogBox();
                                      },
                                      child: Text(
                                        "Reply",
                                        style: TextStyle(
                                            color: Colors.black54,
                                            fontSize: 12,
                                            fontWeight: FontWeight.w700),
                                      ),
                                    ),
                                    SizedBox(
                                      width: 5,
                                    ),
                                    Text(
                                      " " +
                                          commentReplyeCount[cmntSelectID]
                                                  [index]
                                              .toString() +
                                          " ",
                                      style: TextStyle(
                                          color: Colors.black54,
                                          fontSize: 12,
                                          fontWeight: FontWeight.w400),
                                    ),
                                    Icon(Icons.chat,
                                        color: Color.fromRGBO(0, 0, 0, 0.8),
                                        size: 14),
                                  ],
                                ),
                              ),
                              _viewReply(postIndex, cmntSelectID, index)
                            ],
                          ),
                        ],
                      ),
                    );
                  },
                ),
              ),
            ],
          )
        : SizedBox();
  }

  _viewReply(int postIndex, int cmntSelectID, int cmntIndex) {
    int replySelectID = -1;
    for (int i = 0; i < allCmntReplyIDs.length; i++) {
      if (allCmntReplyIDs[i] ==
          allPostwiseCmntData[cmntSelectID][cmntIndex]["comment_id"]) {
        replySelectID = i;
      }
    }
    return replySelectID != -1
        ? Column(
            mainAxisSize: MainAxisSize.min,
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              SizedBox(height: 5),
              allPostwiseReplyData[replySelectID].length > 1
                  ? Row(
                      mainAxisAlignment: MainAxisAlignment.start,
                      children: [
                        InkWell(
                          onTap: () {
                            setState(() {
                              isShowAllReply[replySelectID] =
                                  !isShowAllReply[replySelectID];
                            });
                          },
                          child: Container(
                            child: Text(
                                isShowAllReply[replySelectID] == true
                                    ? "Hide comments"
                                    : "View ${allPostwiseReplyData[replySelectID].length - 1} more comments",
                                style: TextStyle(
                                    fontSize: 14,
                                    color: Colors.black.withOpacity(0.6),
                                    fontWeight: FontWeight.bold)),
                          ),
                        ),
                      ],
                    )
                  : SizedBox(),
              SizedBox(height: 5),
              Container(
                width: 350,
                child: ListView.builder(
                    shrinkWrap: true,
                    itemCount: isShowAllReply[replySelectID] == false
                        ? 1
                        : allPostwiseReplyData[replySelectID].length,
                    itemBuilder: (context, i) {
                      DateTime tempDate = DateTime.parse(
                          allPostwiseReplyData[replySelectID][i]["compare_date"]
                              .toString()
                              .substring(0, 8));
                      String current_date =
                          DateFormat.yMMMMd('en_US').format(tempDate);
                      return Container(
                        margin: EdgeInsets.only(right: 10),
                        child: Row(
                          mainAxisAlignment: MainAxisAlignment.start,
                          crossAxisAlignment: CrossAxisAlignment.start,
                          children: [
                            Container(
                              height: 35,
                              width: 35,
                              margin: EdgeInsets.all(10),
                              child: CircleAvatar(
                                child: ClipOval(
                                  child: Container(
                                    child: Image.network(
                                      allPostwiseReplyData[replySelectID][i]
                                          ["profilepic"],
                                    ),
                                  ),
                                ),
                              ),
                            ),
                            Column(
                              crossAxisAlignment: CrossAxisAlignment.start,
                              children: [
                                SizedBox(height: 10),
                                Container(
                                  width: 270,
                                  padding: EdgeInsets.all(10),
                                  decoration: BoxDecoration(
                                      color: Colors.white,
                                      borderRadius: BorderRadius.all(
                                          Radius.circular(10))),
                                  child: Column(
                                    mainAxisAlignment: MainAxisAlignment.start,
                                    crossAxisAlignment:
                                        CrossAxisAlignment.start,
                                    children: [
                                      Row(
                                        mainAxisAlignment:
                                            MainAxisAlignment.spaceBetween,
                                        crossAxisAlignment:
                                            CrossAxisAlignment.center,
                                        children: [
                                          Text(
                                            allPostwiseReplyData[replySelectID]
                                                    [i]["first_name"] +
                                                " " +
                                                allPostwiseReplyData[
                                                        replySelectID][i]
                                                    ["last_name"],
                                            style: TextStyle(
                                                color: Color(0xFF4D4D4D),
                                                fontSize: 13.5,
                                                fontWeight: FontWeight.w700),
                                          ),
                                          InkWell(
                                            onTap: () {},
                                            child: Container(
                                              child: Icon(
                                                Icons.more_horiz_outlined,
                                                size: 17,
                                                color: Colors.black54,
                                              ),
                                            ),
                                          ),
                                        ],
                                      ),
                                      Row(
                                        mainAxisAlignment:
                                            MainAxisAlignment.start,
                                        children: [
                                          Text(
                                            "${allPostwiseReplyData[replySelectID][i]["school_name"]} | Grade ${allPostwiseReplyData[replySelectID][i]["grade"]}",
                                            style: TextStyle(
                                                color: Colors.black54,
                                                fontSize: 9,
                                                fontWeight: FontWeight.w400),
                                          ),
                                        ],
                                      ),
                                      Row(
                                        mainAxisAlignment:
                                            MainAxisAlignment.start,
                                        children: [
                                          Text(
                                            "Replied on " + "$current_date",
                                            style: TextStyle(
                                                color: Colors.black54,
                                                fontSize: 9,
                                                fontWeight: FontWeight.w400),
                                          ),
                                        ],
                                      ),
                                      SizedBox(
                                        height: 8,
                                      ),
                                      InkWell(
                                        onTap: () {
                                          setState(() {
                                            isReplyExpanded[replySelectID][i] =
                                                !isReplyExpanded[replySelectID]
                                                    [i];
                                          });
                                        },
                                        child: ReadMoreText(
                                          allPostwiseReplyData[replySelectID][i]
                                                          ["reply"]
                                                      .toString()
                                                      .length >
                                                  40
                                              ? isReplyExpanded[replySelectID]
                                                          [i] ==
                                                      false
                                                  ? allPostwiseReplyData[
                                                                  replySelectID]
                                                              [i]["reply"]
                                                          .toString()
                                                          .substring(0, 40) +
                                                      "......"
                                                  : allPostwiseReplyData[
                                                              replySelectID][i]
                                                          ["reply"]
                                                      .toString()
                                              : allPostwiseReplyData[
                                                      replySelectID][i]["reply"]
                                                  .toString(),
                                          trimLines: 2,
                                          colorClickableText: Color(0xff0962ff),
                                          trimMode: TrimMode.Line,
                                          trimCollapsedText: 'read more',
                                          trimExpandedText: 'Show less',
                                          style: const TextStyle(
                                              color:
                                                  Color.fromRGBO(0, 0, 0, 0.8),
                                              fontSize: 15,
                                              fontWeight: FontWeight.w500),
                                          lessStyle: const TextStyle(
                                              color:
                                                  Color.fromRGBO(0, 0, 0, 0.8),
                                              fontSize: 15,
                                              fontWeight: FontWeight.w500),
                                          moreStyle: const TextStyle(
                                              color:
                                                  Color.fromRGBO(0, 0, 0, 0.8),
                                              fontSize: 15,
                                              fontWeight: FontWeight.w500),
                                        ),
                                      ),
                                    ],
                                  ),
                                ),
                                Padding(
                                  padding: const EdgeInsets.all(10.0),
                                  child: Row(
                                    mainAxisAlignment: MainAxisAlignment.start,
                                    children: [
                                      InkWell(
                                        onTap: () {
                                          if (userDataDB!.get(
                                                  allPostwiseReplyData[
                                                          replySelectID][i]
                                                      ["reply_id"]) ==
                                              "like") {
                                            setState(() {
                                              ReplyLikeCount[replySelectID][i] =
                                                  ReplyLikeCount[replySelectID]
                                                          [i] -
                                                      1;
                                            });
                                            userDataDB!.delete(
                                                allPostwiseReplyData[
                                                        replySelectID][i]
                                                    ["reply_id"]);
                                            networkCRUD
                                                .addSmPostLikeDetailsAdvancedLogic([
                                              "FALSE",
                                              allPostwiseReplyData[
                                                  replySelectID][i]["reply_id"],
                                              _currentUserId,
                                              "reply",
                                              "like",
                                              ReplyLikeCount[replySelectID][i],
                                              0,
                                              0,
                                              0,
                                              0
                                            ]);
                                            ////////////////////////////notification//////////////////////////////////////
                                            String notify_id =
                                                "ntf${allPostwiseReplyData[replySelectID][i]["reply_id"]}$comparedate";
                                            notifyCRUD.sendNotification([
                                              notify_id,
                                              "reaction",
                                              "reply",
                                              _currentUserId,
                                              allPostwiseReplyData[
                                                  replySelectID][i]["user_id"],
                                              countData!.value["usertoken"][
                                                  allPostwiseReplyData[
                                                          replySelectID][i]
                                                      ["user_id"]]["tokenid"],
                                              "You got one like!",
                                              "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} liked your reply.",
                                              allPostData[postIndex]["post_id"],
                                              "allpost",
                                              "false",
                                              comparedate,
                                              "delete"
                                            ]);
                                            //////////////////////////////////////////////////////////////////////////
                                          } else {
                                            setState(() {
                                              ReplyLikeCount[replySelectID][i] =
                                                  ReplyLikeCount[replySelectID]
                                                          [i] +
                                                      1;
                                            });
                                            userDataDB!.put(
                                                allPostwiseReplyData[
                                                        replySelectID][i]
                                                    ["reply_id"],
                                                "like");
                                            networkCRUD
                                                .addSmPostLikeDetailsAdvancedLogic([
                                              "TRUE",
                                              allPostwiseReplyData[
                                                  replySelectID][i]["reply_id"],
                                              _currentUserId,
                                              "reply",
                                              "like",
                                              ReplyLikeCount[replySelectID][i],
                                              0,
                                              0,
                                              0,
                                              0
                                            ]);
                                            ////////////////////////////notification//////////////////////////////////////
                                            String notify_id =
                                                "ntf${allPostwiseReplyData[replySelectID][i]["reply_id"]}$comparedate";
                                            notifyCRUD.sendNotification([
                                              notify_id,
                                              "reaction",
                                              "reply",
                                              _currentUserId,
                                              allPostwiseReplyData[
                                                  replySelectID][i]["user_id"],
                                              countData!.value["usertoken"][
                                                  allPostwiseReplyData[
                                                          replySelectID][i]
                                                      ["user_id"]]["tokenid"],
                                              "You got one like!",
                                              "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} liked your reply.",
                                              allPostData[postIndex]["post_id"],
                                              "allpost",
                                              "false",
                                              comparedate,
                                              "add"
                                            ]);
                                            //////////////////////////////////////////////////////////////////////////
                                          }
                                        },
                                        child: Text(
                                          "Like",
                                          style: TextStyle(
                                              color: (userDataDB!.get(
                                                          allPostwiseReplyData[
                                                                  replySelectID]
                                                              [
                                                              i]["reply_id"]) ==
                                                      "like")
                                                  ? Color(0xff0962ff)
                                                  : Colors.black54,
                                              fontSize: 12,
                                              fontWeight: FontWeight.w700),
                                        ),
                                      ),
                                      1 > 0
                                          ? SizedBox(
                                              width: 8,
                                            )
                                          : SizedBox(),
                                      1 > 0
                                          ? Text(
                                              " " +
                                                  ReplyLikeCount[replySelectID]
                                                          [i]
                                                      .toString() +
                                                  " ",
                                              style: TextStyle(
                                                  color: Colors.black54,
                                                  fontSize: 12,
                                                  fontWeight: FontWeight.w400),
                                            )
                                          : SizedBox(),
                                      1 > 0
                                          ? Icon(Entypo.thumbs_up,
                                              color:
                                                  Color.fromRGBO(0, 0, 0, 0.8),
                                              size: 14)
                                          : SizedBox(),
                                    ],
                                  ),
                                ),
                              ],
                            ),
                          ],
                        ),
                      );
                    }),
              ),
            ],
          )
        : SizedBox();
  }

  _chooseHeaderToViewSMPost(
      String mood, int i, List selectedUserName, List selectedUserID) {
    String gender = allMoodPostData[i]["gender"] == "MALE" ? "him" : "her";
    ;
    if ((mood != "projectdiscuss") &&
        (mood != "businessideas") &&
        ((mood != "podcast")) &&
        ((mood != "blog"))) {
      if (mood == "") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: allMoodPostData[i]["first_name"] +
                        " " +
                        allMoodPostData[i]["last_name"],
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + allMoodPostData[i]["city"],
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${allMoodPostData[i]["school_name"]}" +
                    ", " +
                    "Grade " +
                    allMoodPostData[i]["grade"].toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
            ],
          ),
        );
      } else if (mood == "Excited") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: allMoodPostData[i]["first_name"] +
                        " " +
                        allMoodPostData[i]["last_name"],
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + allMoodPostData[i]["city"],
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${allMoodPostData[i]["school_name"]}" +
                    ", " +
                    "Grade " +
                    allMoodPostData[i]["grade"].toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              RichText(
                text: TextSpan(
                    text: "is feeling ",
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 12,
                      color: Color.fromRGBO(0, 0, 0, 0.7),
                      fontWeight: FontWeight.w400,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: 'excited ',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.8),
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: 'with ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 1))
                          ? TextSpan(
                              text: ' and ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} others',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length == 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} other',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "Good") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: allMoodPostData[i]["first_name"] +
                        " " +
                        allMoodPostData[i]["last_name"],
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + allMoodPostData[i]["city"],
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${allMoodPostData[i]["school_name"]}" +
                    ", " +
                    "Grade " +
                    allMoodPostData[i]["grade"].toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              RichText(
                text: TextSpan(
                    text: "is feeling ",
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 12,
                      color: Color.fromRGBO(0, 0, 0, 0.7),
                      fontWeight: FontWeight.w400,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: 'good ',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.8),
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: 'with ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 1))
                          ? TextSpan(
                              text: ' and ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} others',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length == 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} other',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "Need people around me") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: allMoodPostData[i]["first_name"] +
                        " " +
                        allMoodPostData[i]["last_name"],
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + allMoodPostData[i]["city"],
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${allMoodPostData[i]["school_name"]}" +
                    ", " +
                    "Grade " +
                    allMoodPostData[i]["grade"].toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              Row(
                children: [
                  RichText(
                    text: TextSpan(
                      text: 'need people around ${gender} ',
                      style: TextStyle(
                        fontFamily: 'Nunito Sans',
                        fontSize: 12,
                        color: Color.fromRGBO(0, 0, 0, 0.8),
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                  ),
                  Image.network(
                      "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fgroup.png?alt=media&token=3d1de769-bf7c-46cb-9b46-0ddbaa49a049",
                      height: 20,
                      width: 20),
                ],
              ),
              Row(
                children: [
                  ((selectedUserName != null) && (selectedUserName.length > 0))
                      ? Icon(FontAwesome5.user_tag,
                          size: 10, color: Color.fromRGBO(0, 0, 0, 0.8))
                      : SizedBox(),
                  SizedBox(width: 5),
                  RichText(
                      text: ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                              children: <TextSpan>[
                                  ((selectedUserName != null) &&
                                          (selectedUserName.length > 1))
                                      ? TextSpan(
                                          text: ' and ',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 12,
                                            color: Color.fromRGBO(0, 0, 0, 0.7),
                                            fontWeight: FontWeight.w400,
                                          ),
                                        )
                                      : TextSpan(),
                                  ((selectedUserName != null) &&
                                          (selectedUserName.length > 2))
                                      ? TextSpan(
                                          text:
                                              '${selectedUserName.length - 1} others',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 12,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            fontWeight: FontWeight.bold,
                                          ),
                                        )
                                      : TextSpan(),
                                  ((selectedUserName != null) &&
                                          (selectedUserName.length == 2))
                                      ? TextSpan(
                                          text:
                                              '${selectedUserName.length - 1} other',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 12,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            fontWeight: FontWeight.bold,
                                          ),
                                        )
                                      : TextSpan(),
                                ])
                          : TextSpan()),
                ],
              )
            ],
          ),
        );
      } else if (mood == "Certificate") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: allMoodPostData[i]["first_name"] +
                        " " +
                        allMoodPostData[i]["last_name"],
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + allMoodPostData[i]["city"],
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${allMoodPostData[i]["school_name"]}" +
                    ", " +
                    "Grade " +
                    allMoodPostData[i]["grade"].toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              RichText(
                text: TextSpan(
                    text: "is celebrating her ",
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 12,
                      color: Color.fromRGBO(0, 0, 0, 0.7),
                      fontWeight: FontWeight.w400,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: 'achievement ',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.8),
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: 'with ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 1))
                          ? TextSpan(
                              text: ' and ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} others',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length == 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} other',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "Performance") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: allMoodPostData[i]["first_name"] +
                        " " +
                        allMoodPostData[i]["last_name"],
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + allMoodPostData[i]["city"],
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${allMoodPostData[i]["school_name"]}" +
                    ", " +
                    "Grade " +
                    allMoodPostData[i]["grade"].toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              RichText(
                text: TextSpan(
                    text: "is celebrating her ",
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 12,
                      color: Color.fromRGBO(0, 0, 0, 0.7),
                      fontWeight: FontWeight.w400,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: 'performance ',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.8),
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: 'with ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 1))
                          ? TextSpan(
                              text: ' and ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} others',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length == 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} other',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "Friends") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: allMoodPostData[i]["first_name"] +
                        " " +
                        allMoodPostData[i]["last_name"],
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + allMoodPostData[i]["city"],
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${allMoodPostData[i]["school_name"]}" +
                    ", " +
                    "Grade " +
                    allMoodPostData[i]["grade"].toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              RichText(
                text: TextSpan(
                    text: "is feeling ",
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 12,
                      color: Color.fromRGBO(0, 0, 0, 0.7),
                      fontWeight: FontWeight.w400,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: 'friends ',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.8),
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: 'with ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 1))
                          ? TextSpan(
                              text: ' and ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} others',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length == 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} other',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "projectdiscuss") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: allMoodPostData[i]["first_name"] +
                        " " +
                        allMoodPostData[i]["last_name"],
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + allMoodPostData[i]["city"],
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${allMoodPostData[i]["school_name"]}" +
                    ", " +
                    "Grade " +
                    allMoodPostData[i]["grade"].toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
            ],
          ),
        );
      } else if (mood == "podcast") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: allMoodPostData[i]["first_name"] +
                        " " +
                        allMoodPostData[i]["last_name"],
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: const <TextSpan>[
                      TextSpan(
                        text: ' hosted a Podcast.',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "blog") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: allMoodPostData[i]["first_name"] +
                        " " +
                        allMoodPostData[i]["last_name"],
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: const <TextSpan>[
                      TextSpan(
                        text: ' has created a Blog.',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
            ],
          ),
        );
      }
    }
  }

// add post
  String processStepSM = "";
  String post = "";
  String mood = "";
  bool excited = false;
  bool abletopost = false;
  bool good = false;
  bool needpeople = false;
  bool certificate = false;
  bool performance = false;
  bool friends = false;
  String post_type = "Mood";

  List<String> themes = [
    "assets/theme1.jpeg",
    "assets/theme2.jpg",
    "assets/theme3.png",
    "assets/theme4.png",
    "assets/theme5.png",
    "assets/theme6.png",
    "assets/theme7.png"
  ];
  int themeindex = 0;
  final _formKey = GlobalKey<FormState>();
  bool themeflag = false;
  String eventName = '';
  String timeSlot1 = '';
  String timeSlot2 = '';
  bool showimgcontainer = false;
  bool showvdocontainer = false;
  TextEditingController _locController = TextEditingController();
  TextEditingController _dobController = TextEditingController();
  String dropdownValueClass = '5';
  String dropdownValueSubject = 'Mathematics';
  String dropdownValueFreq = 'Weekly';
  String dropdownValueFromSlot = 'AM';
  String dropdownValueToSlot = 'AM';
  String location = '';
  String fullAddress = '';
  DateTime? _dTime;
  String _selectedDate = '';
  String dob = "";
  bool dt = false;
  TextEditingController _timeController1 = TextEditingController();
  TextEditingController _timeController2 = TextEditingController();
  String _fromselectedTime = "";
  String _fromselectedTime24hrs = "";
  TimeOfDay? _time1;
  String _toselectedTime = "";
  String _toselectedTime24hrs = "";
  TimeOfDay? _time2;
  String eventtype = "offline";
  String eventCategory = "";
  String evenSubCategory = "";
  double curr_lat = 0;
  double curr_long = 0;

  String title = "";
  String identification = "";

  String solution = "";

  String target = "";

  String competitors = "";

  String swot = "";
  String strategy = "";
  String funds = "";
  String content = "";
  String members = "";
  bool ocrkeyboard = false;
  dynamic? videourl;
  dynamic? reqvideourl;
  String summary = '';
  String otherdocs = '';
  String topic = "";
  bool topicflag = false;
  int totalDoc = 0;
  List<String> finalTagedString = [];
  String themepath = "";
  GlobalKey<FlutterMentionsState> key = GlobalKey<FlutterMentionsState>();
  String markuptext = "";
  List<String> tagids = [];
  bool _showList = false;
  bool themekeyboard = false;
  bool businessFileUploaded = false;
  bool themeflagBusiness = false;

  String base64Image = "";
  Map? totaldata;
  String latex = "";
  List tex = [''];
  bool ocruploaded1 = false;
  bool ocruploaded2 = false;
  bool ocruploaded3 = false;
  bool ocruploaded4 = false;
  bool ocruploaded5 = false;
  bool ocruploaded6 = false;
  bool ocruploaded7 = false;
  bool ocruploaded8 = false;
  String latex1 = "";
  String latex2 = "";
  String latex3 = "";
  String latex4 = "";
  String latex5 = "";
  String latex6 = "";
  String latex7 = "";
  String latex8 = "";
  int latexStep = 0;

  String procedure = "";
  String taggedString = "";
  String requirement = "";
  String purchasedfrom = "";
  String theory = "";
  String findings = "";
  String similartheory = "";
  bool videoUploaded1 = false;
  bool videoUploaded2 = false;
  String video1URL = "";
  String video2URL = "";

  void _OCRConversion(BuildContext context, int processStep) async {
    FilePickerResult? result = await FilePicker.platform.pickFiles();
    if (result != null) {
      Uint8List? file = result.files.first.bytes;
      String fileName = result.files.first.name;

      var cropResult = await Navigator.push(
        context,
        MaterialPageRoute(
          builder: (ctx) => Cropper(file!),
        ),
      );
      var _image = await cropResult;
      if (_image != null) {
        base64Image = base64Encode(_image);
        Dialogs.showLoadingDialog(context, _keyLoader);
        final http.Response response = await http.post(
          Uri.parse('https://api.mathpix.com/v3/text'),
          headers: <String, String>{
            'Content-Type': 'application/json',
            'app_id': 'shubham_sparrowrms_in_f5ee1d_512d15',
            'app_key': 'a95e398dbb1b1faf2af3',
          },
          body: jsonEncode(<String, dynamic>{
            "src": "data:image/jpeg;base64," + base64Image,
            "formats": ["text", "data"],
            "data_options": {"include_asciimath": false, "include_latex": true}
          }),
        );

        print(response.statusCode);

        if ((response.statusCode == 200) || (response.statusCode == 201)) {
          setState(() {
            totaldata = json.decode(response.body);
            latex = "latex: " + totaldata!["text"];
            print(totaldata!["data"]);
            for (int i = 0; i < totaldata!["data"].length; i++) {
              tex.add(totaldata!["data"][i]['value']);
            }
          });
          //image upload on FB Storage
          UploadTask task = FirebaseStorage.instance
              .ref()
              .child("userQuestionOCR/$_currentUserId/$fileName")
              .putData(_image);

          task.snapshotEvents.listen((event) async {
            setState(() {
              progress = ((event.bytesTransferred.toDouble() /
                          event.totalBytes.toDouble()) *
                      100)
                  .roundToDouble();
            });
            if (progress == 100) {
              print(progress);
              String downloadURL = await FirebaseStorage.instance
                  .ref("userQuestionOCR/$_currentUserId/$fileName")
                  .getDownloadURL();
              if (downloadURL != null) {
                Navigator.of(_keyLoader.currentContext!, rootNavigator: true)
                    .pop(); //close the dialoge
                setState(() {
                  if (processStep == 0) {
                  } else if (processStep == 1) {
                    ocruploaded1 = true;
                    latex1 = totaldata!["text"];
                  } else if (processStep == 2) {
                    ocruploaded2 = true;
                    latex2 = totaldata!["text"];
                  } else if (processStep == 3) {
                    ocruploaded3 = true;
                    latex3 = totaldata!["text"];
                  } else if (processStep == 4) {
                    ocruploaded4 = true;
                    latex4 = totaldata!["text"];
                  } else if (processStep == 5) {
                    ocruploaded5 = true;
                    latex5 = totaldata!["text"];
                  } else if (processStep == 6) {
                    ocruploaded6 = true;
                    latex6 = totaldata!["text"];
                  } else if (processStep == 7) {
                    ocruploaded7 = true;
                    latex7 = totaldata!["text"];
                  } else if (processStep == 8) {
                    ocruploaded8 = true;
                    latex8 = totaldata!["text"];
                  }
                  progress = 0.0;
                });
              }
            }
          });
        }
      }
    }
  }

  void _pickVideo(BuildContext context, videoProcessStep) async {
    FilePickerResult? result = await FilePicker.platform.pickFiles(
      type: FileType.custom,
      allowedExtensions: ['mp4'],
    );
    if (result != null) {
      Uint8List? file = result.files.first.bytes;
      String fileName = result.files.first.name;
      Dialogs.showLoadingDialog(context, _keyLoader);
      UploadTask task = FirebaseStorage.instance
          .ref()
          .child("userVideoReference/$_currentUserId/$fileName")
          .putData(file!);

      task.snapshotEvents.listen((event) async {
        setState(() {
          progress = ((event.bytesTransferred.toDouble() /
                      event.totalBytes.toDouble()) *
                  100)
              .roundToDouble();
        });
        if (progress == 100) {
          print(progress);
          String downloadURL = await FirebaseStorage.instance
              .ref("userVideoReference/$_currentUserId/$fileName")
              .getDownloadURL();
          if (downloadURL != null) {
            Navigator.of(_keyLoader.currentContext!, rootNavigator: true)
                .pop(); //close the dialoge
            setState(() {
              if (videoProcessStep == 1) {
                videoUploaded1 = true;
                video1URL = downloadURL;
              } else if (videoProcessStep == 2) {
                videoUploaded2 = true;
                video2URL = downloadURL;
              }
              progress = 0.0;
            });
            ElegantNotification.success(
              title: Text("Congrats,"),
              description: Text("You attatched video file successfully."),
            );
          }
        }
      });
    }
  }

  bool themeflagForProject = false;
  String themepathForProject = "";
  String dropdownValueTopic = 'None';
  String dropdownValueGrade = 'Grade';
  String dropdownValueSubjectForUploads = 'Subject';
  String schoolname = "";
  String examname = "";
  String chapter = "";
  String topicUploads = "";
  String term = "";
  String year = "";
  String tags = "";
  String description = "";
  String upload_type = "";

  //blog
  String _verticalGroupValue = "";
  String blogtitle = "";
  String name = "";
  bool flag = false;
  String blogintro = "";
  String blogContent = "";
  List<dynamic> choosedTopics = [];

  void _addSocialPostDialog() {
    showDialog(
        context: context,
        barrierColor: Colors.grey.withOpacity(0.2),
        barrierDismissible: false,
        builder: (_) => StatefulBuilder(builder: (context, setState) {
              return AlertDialog(
                contentPadding: EdgeInsets.all(20),
                shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(10.0)),
                title: Column(
                  mainAxisSize: MainAxisSize.min,
                  children: [
                    Row(
                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
                      children: [
                        SizedBox(width: 30),
                        Text(
                          "Social Network",
                          style: TextStyle(
                            fontSize: 20,
                            color: Color(0xCB000000),
                            fontWeight: FontWeight.w900,
                          ),
                        ),
                        IconButton(
                          onPressed: () {
                            setState(() {
                              processStepSM = "";
                              post = "";
                              mood = "";
                              excited = false;
                              abletopost = false;
                              good = false;
                              needpeople = false;
                              certificate = false;
                              performance = false;
                              friends = false;
                              imageList = [];
                              videoList = [];
                              selectedUserID = [];
                              dropdownValueGrade = 'Grade';
                              dropdownValueSubjectForUploads = 'Subject';
                              schoolname = "";
                              examname = "";
                              chapter = "";
                              topicUploads = "";
                              term = "";
                              year = "";
                              tags = "";
                              description = "";
                              upload_type = "";
                              uploadFilesURLList = [];
                              uploadFilesNameList = [];
                              uploadFilesExtList = [];
                            });
                            for (int k = 0; k < selectedUserflag.length; k++) {
                              setState(() {
                                selectedUserflag[k] = false;
                              });
                            }
                            Navigator.of(context).pop();
                          },
                          icon: Tab(
                              child: Icon(Icons.cancel_rounded,
                                  color: Colors.black45, size: 25)),
                        )
                      ],
                    ),
                    SizedBox(height: 20),
                    Container(height: 1, width: 500, color: Colors.grey[200]),
                  ],
                ),
                content: Container(
                  height: 470,
                  width: 500,
                  child: processStepSM == ""
                      ? ListView(
                          physics: BouncingScrollPhysics(),
                          children: [
                            InkWell(
                              onTap: () {
                                setState(() {
                                  processStepSM = "mood";
                                });
                              },
                              child: Container(
                                height: 65,
                                padding: EdgeInsets.all(10),
                                child: Row(
                                  mainAxisAlignment: MainAxisAlignment.start,
                                  crossAxisAlignment: CrossAxisAlignment.start,
                                  children: [
                                    Icon(
                                      Fontelico.emo_wink,
                                      color: Color.fromRGBO(88, 165, 196, 1),
                                      size: 25,
                                    ),
                                    SizedBox(
                                      width: 25,
                                    ),
                                    Column(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      crossAxisAlignment:
                                          CrossAxisAlignment.start,
                                      children: const [
                                        Text(
                                          'Mood',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 14,
                                            color: Colors.black87,
                                            fontWeight: FontWeight.w500,
                                          ),
                                        ),
                                        SizedBox(
                                          height: 2,
                                        ),
                                        Text(
                                          'Tell others about your mood!',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 11,
                                            color: Colors.black45,
                                            fontWeight: FontWeight.w400,
                                          ),
                                        )
                                      ],
                                    )
                                  ],
                                ),
                              ),
                            ),
                            ExpandablePanel(
                              collapsed: SizedBox(),
                              header: Container(
                                height: 55,
                                padding: EdgeInsets.all(10),
                                child: Row(
                                  mainAxisAlignment: MainAxisAlignment.start,
                                  crossAxisAlignment: CrossAxisAlignment.start,
                                  children: [
                                    Icon(
                                      Fontelico.emo_saint,
                                      color: Color.fromRGBO(88, 165, 196, 1),
                                      size: 25,
                                    ),
                                    SizedBox(
                                      width: 25,
                                    ),
                                    Column(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      crossAxisAlignment:
                                          CrossAxisAlignment.start,
                                      children: const [
                                        Text(
                                          'Create',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 14,
                                            color: Colors.black87,
                                            fontWeight: FontWeight.w500,
                                          ),
                                        ),
                                        SizedBox(
                                          height: 2,
                                        ),
                                        Text(
                                          'Make a difference in someone\'s life!',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 11,
                                            color: Colors.black45,
                                            fontWeight: FontWeight.w400,
                                          ),
                                        )
                                      ],
                                    )
                                  ],
                                ),
                              ),
                              expanded: Container(
                                width: MediaQuery.of(context).size.width - 30,
                                height: 40,
                                child: ListView(
                                  scrollDirection: Axis.horizontal,
                                  physics: BouncingScrollPhysics(),
                                  children: [
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          processStepSM = "blog";
                                        });
                                      },
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Blog',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          processStepSM = "cause";
                                        });
                                      },
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Cause',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Help Group',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      onTap: () {},
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Podcast',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Rebel',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                  ],
                                ),
                              ),
                            ),
                            SizedBox(
                              height: 15,
                            ),
                            ExpandablePanel(
                              collapsed: SizedBox(),
                              header: Container(
                                height: 55,
                                padding: EdgeInsets.all(10),
                                child: Row(
                                  mainAxisAlignment: MainAxisAlignment.start,
                                  crossAxisAlignment: CrossAxisAlignment.start,
                                  children: [
                                    Icon(
                                      Fontelico.emo_coffee,
                                      color: Color.fromRGBO(88, 165, 196, 1),
                                      size: 25,
                                    ),
                                    SizedBox(
                                      width: 25,
                                    ),
                                    Column(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      crossAxisAlignment:
                                          CrossAxisAlignment.start,
                                      children: const [
                                        Text(
                                          'Discuss',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 14,
                                            color: Colors.black87,
                                            fontWeight: FontWeight.w500,
                                          ),
                                        ),
                                        SizedBox(
                                          height: 2,
                                        ),
                                        Text(
                                          'Share your interesting ideas with others',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 11,
                                            color: Colors.black45,
                                            fontWeight: FontWeight.w400,
                                          ),
                                        )
                                      ],
                                    )
                                  ],
                                ),
                              ),
                              expanded: Container(
                                width: MediaQuery.of(context).size.width - 30,
                                height: 40,
                                child: ListView(
                                  scrollDirection: Axis.horizontal,
                                  physics: BouncingScrollPhysics(),
                                  children: [
                                    InkWell(
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Books',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          processStepSM = "businessidea";
                                        });
                                      },
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Bussiness Ideas',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Exam Questions',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          processStepSM = "projectdiscuss";
                                        });
                                      },
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Projects',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                  ],
                                ),
                              ),
                            ),
                            SizedBox(height: 15),
                            ExpandablePanel(
                              collapsed: SizedBox(),
                              header: Container(
                                height: 55,
                                padding: EdgeInsets.all(10),
                                child: Row(
                                  mainAxisAlignment: MainAxisAlignment.start,
                                  crossAxisAlignment: CrossAxisAlignment.start,
                                  children: [
                                    Icon(
                                      Icons.upload_file,
                                      color: Color.fromRGBO(88, 165, 196, 1),
                                      size: 25,
                                    ),
                                    SizedBox(
                                      width: 25,
                                    ),
                                    Column(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      crossAxisAlignment:
                                          CrossAxisAlignment.start,
                                      children: const [
                                        Text(
                                          'Uploads',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 14,
                                            color: Colors.black87,
                                            fontWeight: FontWeight.w500,
                                          ),
                                        ),
                                        SizedBox(
                                          height: 2,
                                        ),
                                        Text(
                                          'Upload Documents',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 11,
                                            color: Colors.black45,
                                            fontWeight: FontWeight.w400,
                                          ),
                                        )
                                      ],
                                    )
                                  ],
                                ),
                              ),
                              expanded: Container(
                                width: MediaQuery.of(context).size.width - 30,
                                height: 40,
                                child: ListView(
                                  scrollDirection: Axis.horizontal,
                                  physics: BouncingScrollPhysics(),
                                  children: [
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          processStepSM = "upload1";
                                          upload_type = "School Exams";
                                        });
                                      },
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'School Exams',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          processStepSM = "upload1";
                                          upload_type = "Class Notes";
                                        });
                                      },
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Class Notes',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          processStepSM = "upload1";
                                          upload_type = "Cometitve Exams";
                                        });
                                      },
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Competitive Exams',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          processStepSM = "upload1";
                                          upload_type = "Others";
                                        });
                                      },
                                      child: Container(
                                        decoration: BoxDecoration(
                                            border: Border.all(
                                                color: Color.fromRGBO(
                                                    88, 165, 196, 1)),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        margin: EdgeInsets.all(5),
                                        padding: EdgeInsets.all(6),
                                        child: Center(
                                          child: Text(
                                            'Others',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 12,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ),
                                  ],
                                ),
                              ),
                            ),
                            SizedBox(
                              height: 15,
                            ),
                            InkWell(
                              child: Container(
                                height: 65,
                                padding: EdgeInsets.all(10),
                                child: Row(
                                  mainAxisAlignment: MainAxisAlignment.start,
                                  crossAxisAlignment: CrossAxisAlignment.start,
                                  children: [
                                    Icon(
                                      Fontelico.emo_sunglasses,
                                      color: Color.fromRGBO(88, 165, 196, 1),
                                      size: 25,
                                    ),
                                    SizedBox(
                                      width: 25,
                                    ),
                                    Column(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      crossAxisAlignment:
                                          CrossAxisAlignment.start,
                                      children: const [
                                        Text(
                                          'Showcase your talent',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 14,
                                            color: Colors.black87,
                                            fontWeight: FontWeight.w500,
                                          ),
                                        ),
                                        SizedBox(
                                          height: 2,
                                        ),
                                        Text(
                                          'Let all knows about your hidden talent',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 11,
                                            color: Colors.black45,
                                            fontWeight: FontWeight.w400,
                                          ),
                                        )
                                      ],
                                    )
                                  ],
                                ),
                              ),
                            ),
                            InkWell(
                              child: Container(
                                height: 65,
                                padding: EdgeInsets.all(10),
                                child: Row(
                                  mainAxisAlignment: MainAxisAlignment.start,
                                  crossAxisAlignment: CrossAxisAlignment.start,
                                  children: [
                                    Icon(
                                      Fontelico.emo_thumbsup,
                                      color: Color.fromRGBO(88, 165, 196, 1),
                                      size: 25,
                                    ),
                                    SizedBox(
                                      width: 25,
                                    ),
                                    Column(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      crossAxisAlignment:
                                          CrossAxisAlignment.start,
                                      children: const [
                                        Text(
                                          'Predict Questions',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 14,
                                            color: Colors.black87,
                                            fontWeight: FontWeight.w500,
                                          ),
                                        ),
                                        SizedBox(
                                          height: 2,
                                        ),
                                        Text(
                                          'Guess the questions having high priority in exam',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 11,
                                            color: Colors.black45,
                                            fontWeight: FontWeight.w400,
                                          ),
                                        )
                                      ],
                                    )
                                  ],
                                ),
                              ),
                            ),
                          ],
                        )
                      : processStepSM == "mood"
                          ? Column(
                              crossAxisAlignment: CrossAxisAlignment.stretch,
                              children: [
                                Expanded(
                                  child: ListView(
                                    physics: BouncingScrollPhysics(),
                                    children: [
                                      SizedBox(
                                        height: 10,
                                      ),
                                      Row(
                                        mainAxisAlignment:
                                            MainAxisAlignment.spaceBetween,
                                        children: [
                                          IconButton(
                                            onPressed: () {
                                              _showDiscardDialog();
                                              //loadAssets();
                                            },
                                            icon: Tab(
                                                child: Icon(MfgLabs.cancel,
                                                    color: Colors.black45,
                                                    size: 20)),
                                          ),
                                          Text(
                                            'Create Post',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 17,
                                              color: Colors.black87,
                                              fontWeight: FontWeight.w600,
                                            ),
                                          ),
                                          InkWell(
                                            onTap: () async {
                                              if ((mood != "") &&
                                                  (post != "")) {
                                                Dialogs.showLoadingDialog(
                                                    context, _keyLoader);
                                                comparedate =
                                                    DateFormat('yyyyMMddkkmm')
                                                        .format(DateTime.now());
                                                String postID =
                                                    "sm${_currentUserId}${comparedate}";
                                                String imgID =
                                                    "imgsm${_currentUserId}${comparedate}";
                                                String videoID =
                                                    "vdosm${_currentUserId}${comparedate}";
                                                String userTagID =
                                                    "usrtgsm${_currentUserId}${comparedate}";
                                                bool isImagesPosted = false;
                                                bool isVideosPosted = false;
                                                bool isUserTaggedPosted = false;
                                                bool isFinalPostDone = false;
                                                bool ispostIDCreated =
                                                    await networkCRUD
                                                        .addsmPostDetails([
                                                  postID,
                                                  _currentUserId,
                                                  post_type,
                                                  sharecomment,
                                                  comparedate
                                                ]);
                                                allPostData.insert(0, {
                                                  "first_name": userDataDB!
                                                      .get("first_name"),
                                                  "last_name": userDataDB!
                                                      .get("last_name"),
                                                  "profilepic": userDataDB!
                                                      .get("profilepic"),
                                                  "school_name": userDataDB!
                                                      .get("school_name"),
                                                  "grade":
                                                      userDataDB!.get("grade"),
                                                  "post_id": postID,
                                                  "user_id": _currentUserId,
                                                  "post_type": post_type,
                                                  "comment": sharecomment,
                                                  "compare_date": comparedate
                                                });

                                                allSocialPostLocalDB!.put(
                                                    "allpost", allPostData);

                                                if (ispostIDCreated == true) {
                                                  if (imageList.isNotEmpty) {
                                                    for (int i = 0;
                                                        i < imageList.length;
                                                        i++) {
                                                      isImagesPosted =
                                                          await networkCRUD
                                                              .addsmPostImageDetails([
                                                        imgID,
                                                        imageList[i]
                                                      ]);
                                                    }
                                                  }
                                                  if (videoList.isNotEmpty) {
                                                    for (int i = 0;
                                                        i < videoList.length;
                                                        i++) {
                                                      isVideosPosted =
                                                          await networkCRUD
                                                              .addsmPostVideoDetails([
                                                        videoID,
                                                        videoList[i],
                                                        ""
                                                      ]);
                                                    }
                                                  }
                                                  if (selectedUserID
                                                      .isNotEmpty) {
                                                    for (int i = 0;
                                                        i <
                                                            selectedUserID
                                                                .length;
                                                        i++) {
                                                      isUserTaggedPosted =
                                                          await networkCRUD
                                                              .addsmPostUserTaggedDetails([
                                                        userTagID,
                                                        selectedUserID[i]
                                                      ]);
                                                    }
                                                  }
                                                  List<dynamic> data = [
                                                    postID,
                                                    _currentUserId,
                                                    post,
                                                    mood,
                                                    imageList.isNotEmpty
                                                        ? imgID
                                                        : "",
                                                    videoList.isNotEmpty
                                                        ? videoID
                                                        : "",
                                                    selectedUserID.isNotEmpty
                                                        ? userTagID
                                                        : "",
                                                    "hyspostprivacy01",
                                                    0,
                                                    0,
                                                    0,
                                                    0,
                                                    comparedate
                                                  ];
                                                  isFinalPostDone =
                                                      await networkCRUD
                                                          .addsmPostMoodDetails(
                                                              data);
                                                  if (isFinalPostDone == true) {
                                                    allMoodPostData.insert(0, {
                                                      "first_name": userDataDB!
                                                          .get("first_name"),
                                                      "last_name": userDataDB!
                                                          .get("last_name"),
                                                      "profilepic": userDataDB!
                                                          .get("profilepic"),
                                                      "school_name": userDataDB!
                                                          .get("school_name"),
                                                      "grade": userDataDB!
                                                          .get("grade"),
                                                      "city": userDataDB!
                                                          .get("city"),
                                                      "post_id": data[0],
                                                      "user_id": data[1],
                                                      "message": data[2],
                                                      "user_mood": data[3],
                                                      "imagelist_id": data[4],
                                                      "videolist_id": data[5],
                                                      "usertaglist_id": data[6],
                                                      "privacy": data[7],
                                                      "like_count": 0,
                                                      "comment_count": 0,
                                                      "view_count": 0,
                                                      "impression_count": 0,
                                                      "compare_date": data[12]
                                                    });
                                                    allSocialPostLocalDB!.put(
                                                        "moodpost",
                                                        allMoodPostData);
                                                    for (int k = 0;
                                                        k <
                                                            selectedUserflag
                                                                .length;
                                                        k++) {
                                                      setState(() {
                                                        selectedUserflag[k] =
                                                            false;
                                                      });
                                                    }
                                                    _call_apis();

                                                    ElegantNotification.success(
                                                      title: Text("Congrats,"),
                                                      description: Text(
                                                          "Your post created successfully."),
                                                    );
                                                  } else {
                                                    ElegantNotification.error(
                                                      title: Text("Error..."),
                                                      description: Text(
                                                          "Something wrong."),
                                                    );
                                                  }
                                                }
                                              }
                                              setState(() {
                                                processStepSM = "";
                                                post = "";
                                                mood = "";
                                                excited = false;
                                                abletopost = false;
                                                good = false;
                                                needpeople = false;
                                                certificate = false;
                                                performance = false;
                                                friends = false;
                                                imageList = [];
                                                videoList = [];
                                                selectedUserID = [];
                                              });
                                              Navigator.of(
                                                      _keyLoader
                                                          .currentContext!,
                                                      rootNavigator: true)
                                                  .pop();
                                              Navigator.of(context).pop();
                                            },
                                            child: Container(
                                              margin:
                                                  EdgeInsets.only(right: 10),
                                              padding: EdgeInsets.only(
                                                  left: 8,
                                                  right: 8,
                                                  top: 5,
                                                  bottom: 5),
                                              decoration: BoxDecoration(
                                                  color: (mood != "") &&
                                                          (post != "")
                                                      ? Color.fromRGBO(
                                                          88, 165, 196, 1)
                                                      : Colors.black12,
                                                  borderRadius:
                                                      BorderRadius.circular(3)),
                                              child: Text(
                                                (mood != "") && (post != "")
                                                    ? 'Post'
                                                    : "Wait",
                                                style: TextStyle(
                                                  fontFamily: 'Nunito Sans',
                                                  fontSize: 17,
                                                  color: Colors.white,
                                                  fontWeight: FontWeight.w500,
                                                ),
                                              ),
                                            ),
                                          )
                                        ],
                                      ),
                                      SizedBox(
                                        height: 20,
                                      ),
                                      Container(
                                          padding: const EdgeInsets.only(
                                              left: (10.0),
                                              right: 10,
                                              top: 10,
                                              bottom: 10),
                                          margin: EdgeInsets.all(5),
                                          decoration: BoxDecoration(
                                              color: Color.fromRGBO(
                                                  242, 246, 248, 1),
                                              borderRadius: BorderRadius.all(
                                                  Radius.circular(20))),
                                          child: Column(
                                            children: [
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment
                                                        .spaceBetween,
                                                children: [
                                                  Container(
                                                    child: Row(
                                                      crossAxisAlignment:
                                                          CrossAxisAlignment
                                                              .start,
                                                      children: [
                                                        InkWell(
                                                          onTap: () {},
                                                          child: CircleAvatar(
                                                            backgroundImage:
                                                                NetworkImage(
                                                                    userDataDB!.get(
                                                                        "profilepic")),
                                                            radius: 22,
                                                          ),
                                                        ),
                                                        SizedBox(
                                                          width: 10,
                                                        ),
                                                        Container(
                                                          child: Column(
                                                            crossAxisAlignment:
                                                                CrossAxisAlignment
                                                                    .start,
                                                            children: [
                                                              _chooseHeaderAccordingToMood(
                                                                  mood,
                                                                  0, [], []),
                                                              InkWell(
                                                                onTap: () {
                                                                  setState(() {
                                                                    processStepSM =
                                                                        'audiance';
                                                                  });
                                                                },
                                                                child:
                                                                    Container(
                                                                  decoration: BoxDecoration(
                                                                      border: Border.all(
                                                                          color: Color.fromRGBO(
                                                                              88,
                                                                              165,
                                                                              196,
                                                                              1)),
                                                                      borderRadius:
                                                                          BorderRadius.circular(
                                                                              3)),
                                                                  margin:
                                                                      EdgeInsets
                                                                          .all(
                                                                              3),
                                                                  padding:
                                                                      EdgeInsets
                                                                          .all(
                                                                              4),
                                                                  child: Center(
                                                                    child: Row(
                                                                      children: const [
                                                                        Icon(
                                                                          Icons
                                                                              .group,
                                                                          color:
                                                                              Colors.black87,
                                                                          size:
                                                                              11,
                                                                        ),
                                                                        Text(
                                                                          ' Friends ',
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                12,
                                                                            color:
                                                                                Colors.black87,
                                                                            fontWeight:
                                                                                FontWeight.w500,
                                                                          ),
                                                                        ),
                                                                        Icon(
                                                                          WebSymbols
                                                                              .down_micro,
                                                                          color:
                                                                              Colors.black87,
                                                                          size:
                                                                              11,
                                                                        ),
                                                                      ],
                                                                    ),
                                                                  ),
                                                                ),
                                                              ),
                                                            ],
                                                          ),
                                                        ),
                                                      ],
                                                    ),
                                                  ),
                                                ],
                                              ),
                                              SizedBox(height: 20),
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Container(
                                                    width: _width! > 600
                                                        ? 400
                                                        : _width! - 100,
                                                    child: TextField(
                                                      enableInteractiveSelection:
                                                          true,
                                                      minLines: 2,
                                                      maxLines: 15,
                                                      keyboardType:
                                                          TextInputType
                                                              .multiline,
                                                      cursorColor:
                                                          const Color.fromRGBO(
                                                              88, 165, 196, 1),
                                                      style: TextStyle(
                                                          fontSize: 17,
                                                          color: Colors.black87,
                                                          fontWeight:
                                                              FontWeight.w400),
                                                      onChanged: (val) {
                                                        setState(
                                                            () => post = val);
                                                      },
                                                      decoration:
                                                          const InputDecoration(
                                                              border:
                                                                  InputBorder
                                                                      .none,
                                                              focusedBorder:
                                                                  InputBorder
                                                                      .none,
                                                              enabledBorder:
                                                                  InputBorder
                                                                      .none,
                                                              errorBorder:
                                                                  InputBorder
                                                                      .none,
                                                              disabledBorder:
                                                                  InputBorder
                                                                      .none,
                                                              hintText:
                                                                  'How\'s your mood today?',
                                                              hintStyle:
                                                                  TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 17,
                                                                color: Colors
                                                                    .black26,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w800,
                                                              )),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                              ((imageList.length > 0))
                                                  ? buildGridView()
                                                  : SizedBox(),
                                              // finalVideos.length > 0
                                              //     ? showSelectedVideos()
                                              //     : SizedBox(),
                                              const SizedBox(
                                                height: 20,
                                              ),
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  InkWell(
                                                    onTap: () {
                                                      setState(() {
                                                        excited = !excited;
                                                        abletopost =
                                                            !abletopost;
                                                        good = false;
                                                        needpeople = false;
                                                        certificate = false;
                                                        performance = false;
                                                        friends = false;
                                                        if (excited) {
                                                          mood = "Excited";
                                                        } else {
                                                          mood = "";
                                                        }
                                                      });
                                                    },
                                                    child: Container(
                                                      width: 110,
                                                      decoration: BoxDecoration(
                                                          color: excited == true
                                                              ? Color.fromRGBO(
                                                                  88, 165, 196, 1)
                                                              : Color.fromRGBO(
                                                                  242,
                                                                  246,
                                                                  248,
                                                                  1),
                                                          border: Border.all(
                                                              color:
                                                                  Color.fromRGBO(
                                                                      88,
                                                                      165,
                                                                      196,
                                                                      1)),
                                                          borderRadius:
                                                              BorderRadius
                                                                  .circular(100)),
                                                      margin: EdgeInsets.all(5),
                                                      padding:
                                                          EdgeInsets.all(7),
                                                      child: Center(
                                                        child: Row(
                                                          mainAxisAlignment:
                                                              MainAxisAlignment
                                                                  .spaceEvenly,
                                                          children: [
                                                            Image.network(
                                                                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fexcited1.png?alt=media&token=1fca65c8-fccd-46ed-b6e8-ab4af35ad0fa",
                                                                height: 20,
                                                                width: 20),
                                                            Text(
                                                              'Excited',
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 12,
                                                                color: excited ==
                                                                        true
                                                                    ? Colors
                                                                        .white
                                                                    : Colors
                                                                        .black87,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          ],
                                                        ),
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                              Row(
                                                children: [
                                                  InkWell(
                                                    onTap: () {
                                                      setState(() {
                                                        excited = false;
                                                        abletopost =
                                                            !abletopost;
                                                        good = !good;
                                                        needpeople = false;
                                                        certificate = false;
                                                        performance = false;
                                                        friends = false;
                                                        if (good) {
                                                          mood = "Good";
                                                        } else {
                                                          mood = "";
                                                        }
                                                      });
                                                    },
                                                    child: Container(
                                                      width: 110,
                                                      decoration: BoxDecoration(
                                                          color: good == true
                                                              ? const Color.fromRGBO(
                                                                  88, 165, 196, 1)
                                                              : const Color.fromRGBO(
                                                                  242,
                                                                  246,
                                                                  248,
                                                                  1),
                                                          border: Border.all(
                                                              color:
                                                                  const Color.fromRGBO(
                                                                      88,
                                                                      165,
                                                                      196,
                                                                      1)),
                                                          borderRadius:
                                                              BorderRadius
                                                                  .circular(100)),
                                                      margin: EdgeInsets.all(5),
                                                      padding:
                                                          EdgeInsets.all(7),
                                                      child: Center(
                                                        child: Row(
                                                          mainAxisAlignment:
                                                              MainAxisAlignment
                                                                  .spaceEvenly,
                                                          children: [
                                                            Image.network(
                                                                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fjustfine.png?alt=media&token=4ee757e2-29f4-4478-8576-65965815a1b1",
                                                                height: 20,
                                                                width: 20),
                                                            Text(
                                                              'Good',
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 12,
                                                                color: good ==
                                                                        true
                                                                    ? Colors
                                                                        .white
                                                                    : Colors
                                                                        .black87,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          ],
                                                        ),
                                                      ),
                                                    ),
                                                  ),
                                                  InkWell(
                                                    onTap: () {
                                                      setState(() {
                                                        excited = false;
                                                        good = false;
                                                        needpeople =
                                                            !needpeople;
                                                        abletopost =
                                                            !abletopost;
                                                        certificate = false;
                                                        performance = false;
                                                        friends = false;
                                                        if (needpeople) {
                                                          mood =
                                                              "Need people around me";
                                                        } else {
                                                          mood = "";
                                                        }
                                                      });
                                                    },
                                                    child: Container(
                                                      width: 180,
                                                      decoration: BoxDecoration(
                                                          color: needpeople ==
                                                                  true
                                                              ? Color.fromRGBO(
                                                                  88, 165, 196, 1)
                                                              : Color.fromRGBO(
                                                                  242,
                                                                  246,
                                                                  248,
                                                                  1),
                                                          border: Border.all(
                                                              color:
                                                                  Color.fromRGBO(
                                                                      88,
                                                                      165,
                                                                      196,
                                                                      1)),
                                                          borderRadius:
                                                              BorderRadius.circular(
                                                                  100)),
                                                      margin: EdgeInsets.all(5),
                                                      padding:
                                                          EdgeInsets.all(7),
                                                      child: Center(
                                                        child: Row(
                                                          mainAxisAlignment:
                                                              MainAxisAlignment
                                                                  .spaceEvenly,
                                                          children: [
                                                            Image.network(
                                                                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fgrouppeople2.jpg?alt=media&token=f7f610ae-fa23-4fae-adb2-e9a88c358802",
                                                                height: 20,
                                                                width: 20),
                                                            Text(
                                                              'Need people around me',
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 12,
                                                                color: needpeople ==
                                                                        true
                                                                    ? Colors
                                                                        .white
                                                                    : Colors
                                                                        .black87,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          ],
                                                        ),
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                              SizedBox(
                                                height: 10,
                                              ),
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Image.network(
                                                      "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fcelebrate.png?alt=media&token=52013dfb-748b-423d-9e92-266813577ca8",
                                                      height: 24,
                                                      width: 24),
                                                  SizedBox(
                                                    width: 3,
                                                  ),
                                                  Text(
                                                    'Celebrate',
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 14,
                                                      color: Colors.black54,
                                                      fontWeight:
                                                          FontWeight.w500,
                                                    ),
                                                  ),
                                                ],
                                              ),
                                              SizedBox(
                                                height: 5,
                                              ),
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  InkWell(
                                                    onTap: () {
                                                      setState(() {
                                                        excited = false;
                                                        good = false;
                                                        needpeople = false;
                                                        certificate =
                                                            !certificate;
                                                        abletopost =
                                                            !abletopost;
                                                        performance = false;
                                                        friends = false;
                                                        if (certificate) {
                                                          mood = "Certificate";
                                                        } else {
                                                          mood = "";
                                                        }
                                                      });
                                                    },
                                                    child: Container(
                                                      width: 110,
                                                      decoration: BoxDecoration(
                                                          color: certificate ==
                                                                  true
                                                              ? Color.fromRGBO(
                                                                  88, 165, 196, 1)
                                                              : Color.fromRGBO(
                                                                  242,
                                                                  246,
                                                                  248,
                                                                  1),
                                                          border: Border.all(
                                                              color:
                                                                  Color.fromRGBO(
                                                                      88,
                                                                      165,
                                                                      196,
                                                                      1)),
                                                          borderRadius:
                                                              BorderRadius.circular(
                                                                  100)),
                                                      margin: EdgeInsets.all(5),
                                                      padding:
                                                          EdgeInsets.all(7),
                                                      child: Center(
                                                        child: Row(
                                                          mainAxisAlignment:
                                                              MainAxisAlignment
                                                                  .spaceEvenly,
                                                          children: [
                                                            Image.network(
                                                                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fcelebratecertificate.png?alt=media&token=b768bae3-5326-4897-9634-9471e6987e9f",
                                                                height: 20,
                                                                width: 20),
                                                            Text(
                                                              'Certificate',
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 12,
                                                                color: certificate ==
                                                                        true
                                                                    ? Colors
                                                                        .white
                                                                    : Colors
                                                                        .black87,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          ],
                                                        ),
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                              Row(
                                                children: [
                                                  InkWell(
                                                    onTap: () {
                                                      setState(() {
                                                        excited = false;
                                                        good = false;
                                                        needpeople = false;
                                                        certificate = false;
                                                        performance =
                                                            !performance;
                                                        abletopost =
                                                            !abletopost;
                                                        friends = false;
                                                        if (performance) {
                                                          mood = "Performance";
                                                        } else {
                                                          mood = "";
                                                        }
                                                      });
                                                    },
                                                    child: Container(
                                                      width: 110,
                                                      decoration: BoxDecoration(
                                                          color: performance ==
                                                                  true
                                                              ? Color.fromRGBO(
                                                                  88, 165, 196, 1)
                                                              : Color.fromRGBO(
                                                                  242,
                                                                  246,
                                                                  248,
                                                                  1),
                                                          border: Border.all(
                                                              color:
                                                                  Color.fromRGBO(
                                                                      88,
                                                                      165,
                                                                      196,
                                                                      1)),
                                                          borderRadius:
                                                              BorderRadius.circular(
                                                                  100)),
                                                      margin: EdgeInsets.all(5),
                                                      padding:
                                                          EdgeInsets.all(7),
                                                      child: Center(
                                                        child: Row(
                                                          mainAxisAlignment:
                                                              MainAxisAlignment
                                                                  .spaceEvenly,
                                                          children: [
                                                            Image.network(
                                                                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fcelebrateperformance.png?alt=media&token=4b4f0c53-426f-45ca-a0ac-fe7249cd675b",
                                                                height: 20,
                                                                width: 20),
                                                            Text(
                                                              'Performance',
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 12,
                                                                color: performance ==
                                                                        true
                                                                    ? Colors
                                                                        .white
                                                                    : Colors
                                                                        .black87,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          ],
                                                        ),
                                                      ),
                                                    ),
                                                  ),
                                                  InkWell(
                                                    onTap: () {
                                                      setState(() {
                                                        excited = false;
                                                        good = false;
                                                        needpeople = false;
                                                        certificate = false;
                                                        performance = false;
                                                        friends = !friends;
                                                        if (friends) {
                                                          mood = "Friends";
                                                        } else {
                                                          mood = "";
                                                        }
                                                      });
                                                    },
                                                    child: Container(
                                                      width: 110,
                                                      decoration: BoxDecoration(
                                                          color: friends == true
                                                              ? Color.fromRGBO(
                                                                  88, 165, 196, 1)
                                                              : Color.fromRGBO(
                                                                  242,
                                                                  246,
                                                                  248,
                                                                  1),
                                                          border: Border.all(
                                                              color:
                                                                  Color.fromRGBO(
                                                                      88,
                                                                      165,
                                                                      196,
                                                                      1)),
                                                          borderRadius:
                                                              BorderRadius
                                                                  .circular(100)),
                                                      margin: EdgeInsets.all(5),
                                                      padding:
                                                          EdgeInsets.all(7),
                                                      child: Center(
                                                        child: Row(
                                                          mainAxisAlignment:
                                                              MainAxisAlignment
                                                                  .spaceEvenly,
                                                          children: [
                                                            Image.network(
                                                                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fcelebratewithfriends1.png?alt=media&token=0796dace-d73c-46d8-9ed1-3d4e3f091179",
                                                                height: 20,
                                                                width: 20),
                                                            Text(
                                                              'Friends',
                                                              style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 12,
                                                                color: friends ==
                                                                        true
                                                                    ? Colors
                                                                        .white
                                                                    : Colors
                                                                        .black87,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w500,
                                                              ),
                                                            ),
                                                          ],
                                                        ),
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                            ],
                                          )),
                                    ],
                                  ),
                                ),
                                Container(
                                  color: Colors.white,
                                  child: Row(
                                    mainAxisAlignment:
                                        MainAxisAlignment.spaceBetween,
                                    children: [
                                      Container(
                                        padding: EdgeInsets.only(bottom: 10),
                                        child: Row(
                                          mainAxisAlignment:
                                              MainAxisAlignment.start,
                                          children: [
                                            InkWell(
                                              onTap: () async {
                                                //  _pickVideos(context);
                                              },
                                              child: Container(
                                                padding: EdgeInsets.only(
                                                    top: 10, left: 20),
                                                child: Center(
                                                  child: Image.network(
                                                      "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fvideorecord.jpg?alt=media&token=f2f0b22d-020e-47e9-b8bb-6e2321f956fd",
                                                      height: 25,
                                                      width: 25),
                                                ),
                                              ),
                                            ),
                                            InkWell(
                                              onTap: () async {
                                                _pickImages(context, "post");
                                              },
                                              child: Container(
                                                padding: EdgeInsets.only(
                                                    top: 10,
                                                    left: 15,
                                                    right: 15),
                                                child: Center(
                                                  child: Image.network(
                                                      "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fgallery.png?alt=media&token=09a32fa6-5e7c-4139-94e5-d4d74e5f5d6a",
                                                      height: 22,
                                                      width: 21),
                                                ),
                                              ),
                                            ),
                                            InkWell(
                                              onTap: () async {
                                                setState(() {
                                                  beforeTag = processStepSM;
                                                  processStepSM = 'tag';
                                                });
                                              },
                                              child: Container(
                                                padding: EdgeInsets.only(
                                                    top: 10, right: 15),
                                                child: Center(
                                                  child: Icon(
                                                      FontAwesome5.user_tag,
                                                      size: 18,
                                                      color: Colors.deepPurple),
                                                ),
                                              ),
                                            ),
                                          ],
                                        ),
                                      ),
                                    ],
                                  ),
                                ),
                              ],
                            )
                          : processStepSM == 'audiance'
                              ? ListView(
                                  physics: BouncingScrollPhysics(),
                                  children: [
                                    Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.spaceBetween,
                                      children: [
                                        IconButton(
                                          onPressed: () {
                                            setState(() {
                                              processStepSM = 'mood';
                                            });
                                          },
                                          icon: Tab(
                                              child: Icon(MfgLabs.cancel,
                                                  color: Colors.black45,
                                                  size: 20)),
                                        ),
                                        Text(
                                          'Edit Audiance',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 17,
                                            color: Colors.black87,
                                            fontWeight: FontWeight.w600,
                                          ),
                                        ),
                                        Container(
                                          margin: EdgeInsets.only(right: 10),
                                          padding: EdgeInsets.only(
                                              left: 8,
                                              right: 8,
                                              top: 5,
                                              bottom: 5),
                                          decoration: BoxDecoration(
                                              color: Color.fromRGBO(
                                                  88, 165, 196, 1),
                                              borderRadius:
                                                  BorderRadius.circular(3)),
                                          child: Text(
                                            'Done',
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 17,
                                              color: Colors.white,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        )
                                      ],
                                    ),
                                    SizedBox(
                                      height: 20,
                                    ),
                                    Center(
                                      child: Container(
                                          padding: EdgeInsets.only(
                                              top: 20,
                                              right: 10,
                                              left: 10,
                                              bottom: 20),
                                          decoration: BoxDecoration(
                                              color: Color.fromRGBO(
                                                  242, 246, 248, 1),
                                              borderRadius: BorderRadius.all(
                                                  Radius.circular(20))),
                                          child: Column(
                                            children: [
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Text(
                                                    'Who can see your post?',
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 16,
                                                      color: Colors.black87,
                                                      fontWeight:
                                                          FontWeight.w800,
                                                    ),
                                                  ),
                                                ],
                                              ),
                                              SizedBox(height: 10),
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Expanded(
                                                    child: Container(
                                                      child: Text(
                                                        'your post will appear in News Feed, on your profile and in search results',
                                                        style: TextStyle(
                                                          fontFamily:
                                                              'Nunito Sans',
                                                          fontSize: 13,
                                                          color: Colors.black87,
                                                          fontWeight:
                                                              FontWeight.w400,
                                                        ),
                                                      ),
                                                    ),
                                                  ),
                                                ],
                                              ),
                                              SizedBox(
                                                height: 10,
                                              ),
                                              Container(
                                                height: 1,
                                                color: Colors.black26,
                                              ),
                                              SizedBox(
                                                height: 10,
                                              ),
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                crossAxisAlignment:
                                                    CrossAxisAlignment.start,
                                                children: [
                                                  Icon(MfgLabs.globe,
                                                      color: Colors.black38,
                                                      size: 25),
                                                  SizedBox(width: 10),
                                                  Container(
                                                      width: 312,
                                                      child: Column(
                                                        children: [
                                                          Row(
                                                            mainAxisAlignment:
                                                                MainAxisAlignment
                                                                    .spaceBetween,
                                                            children: [
                                                              Container(
                                                                child: Column(
                                                                  crossAxisAlignment:
                                                                      CrossAxisAlignment
                                                                          .start,
                                                                  children: [
                                                                    Text(
                                                                      'Public',
                                                                      style:
                                                                          TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            15,
                                                                        color: Colors
                                                                            .black87,
                                                                        fontWeight:
                                                                            FontWeight.w600,
                                                                      ),
                                                                    ),
                                                                    Text(
                                                                      'Anyone on or off HyS',
                                                                      style:
                                                                          TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            13,
                                                                        color: Colors
                                                                            .black45,
                                                                        fontWeight:
                                                                            FontWeight.w400,
                                                                      ),
                                                                    ),
                                                                  ],
                                                                ),
                                                              ),
                                                              Icon(
                                                                  FontAwesome
                                                                      .circle_empty,
                                                                  color: Colors
                                                                      .black45,
                                                                  size: 15)
                                                            ],
                                                          ),
                                                          SizedBox(
                                                            height: 10,
                                                          ),
                                                          Container(
                                                            height: 1,
                                                            color:
                                                                Colors.black26,
                                                          ),
                                                          SizedBox(
                                                            height: 10,
                                                          ),
                                                        ],
                                                      ))
                                                ],
                                              ),
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                crossAxisAlignment:
                                                    CrossAxisAlignment.start,
                                                children: [
                                                  Icon(Icons.group,
                                                      color: Colors.black38,
                                                      size: 25),
                                                  SizedBox(width: 10),
                                                  Container(
                                                      width: 312,
                                                      child: Column(
                                                        children: [
                                                          Row(
                                                            mainAxisAlignment:
                                                                MainAxisAlignment
                                                                    .spaceBetween,
                                                            children: [
                                                              Container(
                                                                child: Column(
                                                                  crossAxisAlignment:
                                                                      CrossAxisAlignment
                                                                          .start,
                                                                  children: [
                                                                    Text(
                                                                      'Friends',
                                                                      style:
                                                                          TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            15,
                                                                        color: Colors
                                                                            .black87,
                                                                        fontWeight:
                                                                            FontWeight.w600,
                                                                      ),
                                                                    ),
                                                                    Text(
                                                                      'Your friends on HyS',
                                                                      style:
                                                                          TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            13,
                                                                        color: Colors
                                                                            .black45,
                                                                        fontWeight:
                                                                            FontWeight.w400,
                                                                      ),
                                                                    ),
                                                                  ],
                                                                ),
                                                              ),
                                                              Icon(
                                                                  FontAwesome
                                                                      .circle_empty,
                                                                  color: Colors
                                                                      .black45,
                                                                  size: 15)
                                                            ],
                                                          ),
                                                          SizedBox(
                                                            height: 10,
                                                          ),
                                                          Container(
                                                            height: 1,
                                                            color:
                                                                Colors.black26,
                                                          ),
                                                          SizedBox(
                                                            height: 10,
                                                          ),
                                                        ],
                                                      ))
                                                ],
                                              ),
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                crossAxisAlignment:
                                                    CrossAxisAlignment.start,
                                                children: [
                                                  Icon(Icons.person,
                                                      color: Colors.black38,
                                                      size: 25),
                                                  SizedBox(width: 10),
                                                  Container(
                                                      width: 312,
                                                      child: Column(
                                                        children: [
                                                          Row(
                                                            mainAxisAlignment:
                                                                MainAxisAlignment
                                                                    .spaceBetween,
                                                            children: [
                                                              Container(
                                                                child: Column(
                                                                  crossAxisAlignment:
                                                                      CrossAxisAlignment
                                                                          .start,
                                                                  children: [
                                                                    Text(
                                                                      'Friends excepts...',
                                                                      style:
                                                                          TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            15,
                                                                        color: Colors
                                                                            .black87,
                                                                        fontWeight:
                                                                            FontWeight.w600,
                                                                      ),
                                                                    ),
                                                                    Text(
                                                                      'Don\'t show to some friends',
                                                                      style:
                                                                          TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            13,
                                                                        color: Colors
                                                                            .black45,
                                                                        fontWeight:
                                                                            FontWeight.w400,
                                                                      ),
                                                                    ),
                                                                  ],
                                                                ),
                                                              ),
                                                              Icon(
                                                                  FontAwesome
                                                                      .circle_empty,
                                                                  color: Colors
                                                                      .black45,
                                                                  size: 15)
                                                            ],
                                                          ),
                                                          SizedBox(
                                                            height: 10,
                                                          ),
                                                          Container(
                                                            height: 1,
                                                            color:
                                                                Colors.black26,
                                                          ),
                                                          SizedBox(
                                                            height: 10,
                                                          ),
                                                        ],
                                                      ))
                                                ],
                                              ),
                                              Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                crossAxisAlignment:
                                                    CrossAxisAlignment.start,
                                                children: [
                                                  Icon(Icons.person_add,
                                                      color: Colors.black38,
                                                      size: 25),
                                                  SizedBox(width: 10),
                                                  Container(
                                                      width: 312,
                                                      child: Column(
                                                        children: [
                                                          Row(
                                                            mainAxisAlignment:
                                                                MainAxisAlignment
                                                                    .spaceBetween,
                                                            children: [
                                                              Container(
                                                                child: Column(
                                                                  crossAxisAlignment:
                                                                      CrossAxisAlignment
                                                                          .start,
                                                                  children: [
                                                                    Text(
                                                                      'Specific friends',
                                                                      style:
                                                                          TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            15,
                                                                        color: Colors
                                                                            .black87,
                                                                        fontWeight:
                                                                            FontWeight.w600,
                                                                      ),
                                                                    ),
                                                                    Text(
                                                                      'Vivan Verma',
                                                                      style:
                                                                          TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            13,
                                                                        color: Colors
                                                                            .black45,
                                                                        fontWeight:
                                                                            FontWeight.w400,
                                                                      ),
                                                                    ),
                                                                  ],
                                                                ),
                                                              ),
                                                              Icon(
                                                                  FontAwesome
                                                                      .circle_empty,
                                                                  color: Colors
                                                                      .black45,
                                                                  size: 15)
                                                            ],
                                                          ),
                                                          SizedBox(
                                                            height: 10,
                                                          ),
                                                          Container(
                                                            height: 1,
                                                            color:
                                                                Colors.black26,
                                                          ),
                                                          SizedBox(
                                                            height: 10,
                                                          ),
                                                        ],
                                                      ))
                                                ],
                                              ),
                                            ],
                                          )),
                                    ),
                                  ],
                                )
                              : processStepSM == 'tag'
                                  ? Column(
                                      children: [
                                        Row(
                                          mainAxisAlignment:
                                              MainAxisAlignment.spaceBetween,
                                          children: [
                                            IconButton(
                                              onPressed: () {
                                                setState(() {
                                                  processStepSM = beforeTag;
                                                  beforeTag = "";
                                                  selectedUserID = [];
                                                });
                                              },
                                              icon: Tab(
                                                  child: Icon(MfgLabs.cancel,
                                                      color: Colors.black45,
                                                      size: 20)),
                                            ),
                                            Container(
                                              padding: EdgeInsets.all(10),
                                              child: Text(
                                                "Tag friends",
                                                style: TextStyle(
                                                  fontFamily: 'Nunito Sans',
                                                  fontSize: 17,
                                                  color: Color.fromRGBO(
                                                      88, 165, 196, 1),
                                                  fontWeight: FontWeight.w800,
                                                ),
                                              ),
                                            ),
                                            InkWell(
                                              onTap: () {
                                                setState(() {
                                                  processStepSM = beforeTag;
                                                  beforeTag = "";
                                                });
                                              },
                                              child: Container(
                                                margin:
                                                    EdgeInsets.only(right: 10),
                                                padding: EdgeInsets.only(
                                                    left: 8,
                                                    right: 8,
                                                    top: 5,
                                                    bottom: 5),
                                                decoration: BoxDecoration(
                                                    color: Color.fromRGBO(
                                                        88, 165, 196, 1),
                                                    borderRadius:
                                                        BorderRadius.circular(
                                                            3)),
                                                child: Text(
                                                  'Done',
                                                  style: TextStyle(
                                                    fontFamily: 'Nunito Sans',
                                                    fontSize: 17,
                                                    color: Colors.white,
                                                    fontWeight: FontWeight.w500,
                                                  ),
                                                ),
                                              ),
                                            )
                                          ],
                                        ),
                                        SizedBox(
                                          height: 10,
                                        ),
                                        Container(
                                            height: 1, color: Colors.black26),
                                        Container(
                                          height: 400,
                                          child: ListView.builder(
                                            physics: BouncingScrollPhysics(),
                                            itemCount: _users.length - 1,
                                            itemBuilder: (context, i) {
                                              return Column(
                                                children: [
                                                  SizedBox(
                                                    height: 10,
                                                  ),
                                                  InkWell(
                                                    onTap: () {
                                                      setState(() {
                                                        selectedUserflag[i] =
                                                            !selectedUserflag[
                                                                i];
                                                        if (selectedUserflag[
                                                                i] ==
                                                            true) {
                                                          selectedUserID.add(
                                                              _users[i]["id"]);
                                                        } else {
                                                          if (selectedUserID
                                                                  .length ==
                                                              1) {
                                                            selectedUserID
                                                                .clear();
                                                          } else {
                                                            for (int j = 0;
                                                                j <
                                                                    selectedUserID
                                                                        .length;
                                                                j++) {
                                                              if (_users[i]
                                                                      ["id"] ==
                                                                  selectedUserID[
                                                                      j]) {
                                                                selectedUserID
                                                                    .removeAt(
                                                                        j);
                                                              }
                                                            }
                                                          }
                                                        }
                                                        print(selectedUserID);
                                                      });
                                                    },
                                                    child: Container(
                                                      decoration: BoxDecoration(
                                                          color:
                                                              selectedUserflag[
                                                                          i] ==
                                                                      false
                                                                  ? Colors.white
                                                                  : Color
                                                                      .fromRGBO(
                                                                          88,
                                                                          165,
                                                                          196,
                                                                          1),
                                                          borderRadius:
                                                              BorderRadius
                                                                  .circular(5)),
                                                      padding:
                                                          EdgeInsets.all(10),
                                                      child: Row(
                                                        crossAxisAlignment:
                                                            CrossAxisAlignment
                                                                .start,
                                                        children: [
                                                          SizedBox(
                                                            width: 20,
                                                          ),
                                                          InkWell(
                                                            onTap: () {},
                                                            child: CircleAvatar(
                                                              child: ClipOval(
                                                                child:
                                                                    Container(
                                                                  width: MediaQuery.of(
                                                                              context)
                                                                          .size
                                                                          .width /
                                                                      10.34,
                                                                  height: MediaQuery.of(
                                                                              context)
                                                                          .size
                                                                          .width /
                                                                      10.34,
                                                                  child: Image
                                                                      .network(
                                                                    _users[i][
                                                                        "photo"]!,
                                                                  ),
                                                                ),
                                                              ),
                                                            ),
                                                          ),
                                                          SizedBox(
                                                            width: 15,
                                                          ),
                                                          Column(
                                                            mainAxisAlignment:
                                                                MainAxisAlignment
                                                                    .start,
                                                            crossAxisAlignment:
                                                                CrossAxisAlignment
                                                                    .start,
                                                            children: [
                                                              RichText(
                                                                text: TextSpan(
                                                                    text: _users[
                                                                            i][
                                                                        "display"],
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          15,
                                                                      color: selectedUserflag[i] ==
                                                                              true
                                                                          ? Colors
                                                                              .white
                                                                          : Color.fromRGBO(
                                                                              0,
                                                                              0,
                                                                              0,
                                                                              0.8),
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .bold,
                                                                    ),
                                                                    children: <
                                                                        TextSpan>[
                                                                      TextSpan(
                                                                        text:
                                                                            ', Delhi',
                                                                        style:
                                                                            TextStyle(
                                                                          fontFamily:
                                                                              'Nunito Sans',
                                                                          fontSize:
                                                                              12,
                                                                          color: selectedUserflag[i] == true
                                                                              ? Colors.white
                                                                              : Color.fromRGBO(0, 0, 0, 0.7),
                                                                          fontWeight:
                                                                              FontWeight.w500,
                                                                        ),
                                                                      )
                                                                    ]),
                                                              ),
                                                              Text(
                                                                _users[i][
                                                                    "full_name"]!,
                                                                style:
                                                                    TextStyle(
                                                                  fontFamily:
                                                                      'Nunito Sans',
                                                                  fontSize: 12,
                                                                  color: selectedUserflag[
                                                                              i] ==
                                                                          true
                                                                      ? Colors
                                                                          .white
                                                                      : Color.fromRGBO(
                                                                          0,
                                                                          0,
                                                                          0,
                                                                          0.7),
                                                                  fontWeight:
                                                                      FontWeight
                                                                          .normal,
                                                                ),
                                                              ),
                                                            ],
                                                          ),
                                                        ],
                                                      ),
                                                    ),
                                                  ),
                                                  SizedBox(
                                                    height: 10,
                                                  ),
                                                  Container(
                                                      height: 1,
                                                      color: Colors.black26),
                                                ],
                                              );
                                            },
                                          ),
                                        ),
                                      ],
                                    )
                                  : processStepSM == "cause"
                                      ? ListView(
                                          physics: BouncingScrollPhysics(),
                                          children: [
                                              InkWell(
                                                  onTap: () {
                                                    setState(() {
                                                      processStepSM = "educate";
                                                    });
                                                  },
                                                  child: Container(
                                                      height: 50,
                                                      padding:
                                                          EdgeInsets.all(10),
                                                      child: Row(
                                                        mainAxisAlignment:
                                                            MainAxisAlignment
                                                                .start,
                                                        crossAxisAlignment:
                                                            CrossAxisAlignment
                                                                .start,
                                                        children: [
                                                          CircleAvatar(
                                                              backgroundImage:
                                                                  AssetImage(
                                                                      'assets/CausePriv.png'),
                                                              radius: 20),
                                                          SizedBox(
                                                            width: 25,
                                                          ),
                                                          Expanded(
                                                              child: Text(
                                                                  'Create a Cause to Educate Underprivileged kids.',
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    color: Colors
                                                                        .black87,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w500,
                                                                  ))),
                                                        ],
                                                      ))),
                                              Divider(
                                                indent: 25,
                                                color: Colors.black45,
                                                endIndent: 25,
                                              ),
                                              InkWell(
                                                  onTap: null,
                                                  child: Container(
                                                      height: 55,
                                                      child: Padding(
                                                        padding:
                                                            EdgeInsets.all(10),
                                                        child: Row(
                                                          mainAxisAlignment:
                                                              MainAxisAlignment
                                                                  .start,
                                                          crossAxisAlignment:
                                                              CrossAxisAlignment
                                                                  .start,
                                                          children: [
                                                            CircleAvatar(
                                                                backgroundColor:
                                                                    Colors
                                                                        .white,
                                                                backgroundImage:
                                                                    AssetImage(
                                                                        'assets/girlChild1.png'),
                                                                radius: 20),
                                                            SizedBox(
                                                              width: 25,
                                                            ),
                                                            Expanded(
                                                                child: Text(
                                                                    'Create a Cause to Educate Girl Child.',
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          14,
                                                                      color: Colors
                                                                          .black87,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ))),
                                                          ],
                                                        ),
                                                      ))),
                                              Divider(
                                                indent: 25,
                                                color: Colors.black45,
                                                endIndent: 25,
                                              ),
                                              InkWell(
                                                  onTap: null,
                                                  child: Container(
                                                      height: 65,
                                                      child: Padding(
                                                        padding:
                                                            EdgeInsets.all(10),
                                                        child: Row(
                                                          mainAxisAlignment:
                                                              MainAxisAlignment
                                                                  .start,
                                                          crossAxisAlignment:
                                                              CrossAxisAlignment
                                                                  .start,
                                                          children: [
                                                            CircleAvatar(
                                                                backgroundImage:
                                                                    AssetImage(
                                                                        'assets/Donation.jpg'),
                                                                radius: 20),
                                                            SizedBox(
                                                              width: 25,
                                                            ),
                                                            Expanded(
                                                                child: Text(
                                                                    'Create a Cause to donate books/clothes/old tablets/smart phones/any other to underprivileged.',
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          14,
                                                                      color: Colors
                                                                          .black87,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ))),
                                                          ],
                                                        ),
                                                      ))),
                                              Divider(
                                                indent: 25,
                                                color: Colors.black45,
                                                endIndent: 25,
                                              ),
                                              InkWell(
                                                  onTap: null,
                                                  child: Container(
                                                      height: 55,
                                                      child: Padding(
                                                        padding:
                                                            EdgeInsets.all(10),
                                                        child: Row(
                                                          mainAxisAlignment:
                                                              MainAxisAlignment
                                                                  .start,
                                                          crossAxisAlignment:
                                                              CrossAxisAlignment
                                                                  .start,
                                                          children: [
                                                            CircleAvatar(
                                                                backgroundColor:
                                                                    Colors
                                                                        .white,
                                                                backgroundImage:
                                                                    AssetImage(
                                                                        'assets/others1.png'),
                                                                radius: 20),
                                                            SizedBox(
                                                              width: 25,
                                                            ),
                                                            Expanded(
                                                                child: Text(
                                                                    'Create a Cause for Something Else.',
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          14,
                                                                      color: Colors
                                                                          .black87,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ))),
                                                          ],
                                                        ),
                                                      ))),
                                            ])
                                      : processStepSM == "educate"
                                          ? ListView(
                                              physics: BouncingScrollPhysics(),
                                              children: [
                                                  InkWell(
                                                      onTap: () {},
                                                      child: Container(
                                                          height: 85,
                                                          child: Padding(
                                                            padding:
                                                                const EdgeInsets
                                                                    .all(10),
                                                            child: Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              crossAxisAlignment:
                                                                  CrossAxisAlignment
                                                                      .start,
                                                              children: [
                                                                CircleAvatar(
                                                                    backgroundImage:
                                                                        AssetImage(
                                                                            'assets/Teaching.jpg'),
                                                                    radius: 25),
                                                                SizedBox(
                                                                  width: 25,
                                                                ),
                                                                Column(
                                                                  children: [
                                                                    Text(
                                                                        'Support By Teaching.',
                                                                        style:
                                                                            TextStyle(
                                                                          fontFamily:
                                                                              'Nunito Sans',
                                                                          fontSize:
                                                                              14,
                                                                          color:
                                                                              Colors.black87,
                                                                          fontWeight:
                                                                              FontWeight.w500,
                                                                        )),
                                                                    SizedBox(
                                                                      height:
                                                                          10,
                                                                    ),
                                                                    Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .spaceEvenly,
                                                                      children: [
                                                                        InkWell(
                                                                          onTap:
                                                                              () {
                                                                            setState(() {
                                                                              eventtype = "online";
                                                                              eventCategory = "Create a Cause to Educate Underprivileged kids";
                                                                              evenSubCategory = "Support By Teaching";
                                                                              processStepSM = "educate|teaching";
                                                                            });
                                                                          },
                                                                          child:
                                                                              Container(
                                                                            decoration:
                                                                                BoxDecoration(border: Border.all(color: Color.fromRGBO(88, 165, 196, 1)), borderRadius: BorderRadius.circular(3)),
                                                                            margin:
                                                                                EdgeInsets.all(5),
                                                                            padding:
                                                                                EdgeInsets.all(6),
                                                                            child:
                                                                                Center(
                                                                              child: Text(
                                                                                'Online',
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 12,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          ),
                                                                        ),
                                                                        InkWell(
                                                                          onTap:
                                                                              () {
                                                                            setState(() {
                                                                              eventtype = "offline";
                                                                              eventCategory = "Create a Cause to Educate Underprivileged kids";
                                                                              evenSubCategory = "Support By Teaching";
                                                                              processStepSM = "educate|teaching";
                                                                            });
                                                                          },
                                                                          child:
                                                                              Container(
                                                                            decoration:
                                                                                BoxDecoration(border: Border.all(color: Color.fromRGBO(88, 165, 196, 1)), borderRadius: BorderRadius.circular(3)),
                                                                            margin:
                                                                                EdgeInsets.all(5),
                                                                            padding:
                                                                                EdgeInsets.all(6),
                                                                            child:
                                                                                Center(
                                                                              child: Text(
                                                                                'Offline',
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 12,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                  ],
                                                                ),
                                                              ],
                                                            ),
                                                          ))),
                                                  Divider(
                                                    indent: 25,
                                                    color: Colors.black45,
                                                    endIndent: 25,
                                                  ),
                                                  InkWell(
                                                      onTap: null,
                                                      child: Container(
                                                          height: 78,
                                                          child: Padding(
                                                            padding:
                                                                const EdgeInsets
                                                                    .all(10),
                                                            child: Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              crossAxisAlignment:
                                                                  CrossAxisAlignment
                                                                      .start,
                                                              children: [
                                                                CircleAvatar(
                                                                    backgroundColor:
                                                                        Colors
                                                                            .white,
                                                                    backgroundImage:
                                                                        AssetImage(
                                                                            'assets/Donation.jpg'),
                                                                    radius: 25),
                                                                SizedBox(
                                                                  width: 25,
                                                                ),
                                                                Expanded(
                                                                    child: Text(
                                                                        'Support By Providing books and\nstationary.',
                                                                        style:
                                                                            TextStyle(
                                                                          fontFamily:
                                                                              'Nunito Sans',
                                                                          fontSize:
                                                                              14,
                                                                          color:
                                                                              Colors.black87,
                                                                          fontWeight:
                                                                              FontWeight.w500,
                                                                        ))),
                                                              ],
                                                            ),
                                                          ))),
                                                  Divider(
                                                    indent: 25,
                                                    color: Colors.black45,
                                                    endIndent: 25,
                                                  ),
                                                  InkWell(
                                                      onTap: null,
                                                      child: Container(
                                                          height: 78,
                                                          child: Padding(
                                                            padding:
                                                                const EdgeInsets
                                                                    .all(10),
                                                            child: Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              crossAxisAlignment:
                                                                  CrossAxisAlignment
                                                                      .start,
                                                              children: [
                                                                CircleAvatar(
                                                                    backgroundImage:
                                                                        AssetImage(
                                                                            'assets/others2.jpg'),
                                                                    radius: 25),
                                                                SizedBox(
                                                                  width: 25,
                                                                ),
                                                                Expanded(
                                                                    child: Text(
                                                                        'Support in any other ways.',
                                                                        style:
                                                                            TextStyle(
                                                                          fontFamily:
                                                                              'Nunito Sans',
                                                                          fontSize:
                                                                              14,
                                                                          color:
                                                                              Colors.black87,
                                                                          fontWeight:
                                                                              FontWeight.w500,
                                                                        ))),
                                                              ],
                                                            ),
                                                          ))),
                                                ])
                                          : processStepSM == "educate|teaching"
                                              ? Column(
                                                  crossAxisAlignment:
                                                      CrossAxisAlignment
                                                          .stretch,
                                                  children: [
                                                      Expanded(
                                                          child: ListView(
                                                              physics:
                                                                  BouncingScrollPhysics(),
                                                              children: [
                                                            SizedBox(
                                                              height: 10,
                                                            ),
                                                            Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .spaceBetween,
                                                              children: [
                                                                IconButton(
                                                                  onPressed:
                                                                      () {
                                                                    setState(
                                                                        () {
                                                                      processStepSM =
                                                                          "";
                                                                      post = "";
                                                                    });
                                                                  },
                                                                  icon: Tab(
                                                                      child: Icon(
                                                                          Icons
                                                                              .cancel,
                                                                          color: Colors
                                                                              .black45,
                                                                          size:
                                                                              20)),
                                                                ),
                                                                Text(
                                                                  'Create',
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        17,
                                                                    color: Colors
                                                                        .black87,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w600,
                                                                  ),
                                                                ),
                                                                InkWell(
                                                                  onTap:
                                                                      () async {
                                                                    if ((post !=
                                                                        "")) {
                                                                      Dialogs.showLoadingDialog(
                                                                          context,
                                                                          _keyLoader);
                                                                      comparedate = DateFormat(
                                                                              'yyyyMMddkkmm')
                                                                          .format(
                                                                              DateTime.now());
                                                                      String
                                                                          postID =
                                                                          "sm${_currentUserId}${comparedate}";
                                                                      String
                                                                          imgID =
                                                                          "imgsm${_currentUserId}${comparedate}";
                                                                      String
                                                                          videoID =
                                                                          "vdosm${_currentUserId}${comparedate}";
                                                                      String
                                                                          userTagID =
                                                                          "usrtgsm${_currentUserId}${comparedate}";
                                                                      bool
                                                                          isImagesPosted =
                                                                          false;
                                                                      bool
                                                                          isVideosPosted =
                                                                          false;
                                                                      bool
                                                                          isUserTaggedPosted =
                                                                          false;
                                                                      bool
                                                                          isFinalPostDone =
                                                                          false;
                                                                      bool
                                                                          ispostIDCreated =
                                                                          await networkCRUD
                                                                              .addsmPostDetails([
                                                                        postID,
                                                                        _currentUserId,
                                                                        "cause|teachunprevilagedKids",
                                                                        sharecomment,
                                                                        comparedate
                                                                      ]);
                                                                      allPostData
                                                                          .insert(
                                                                              0,
                                                                              {
                                                                            "first_name":
                                                                                userDataDB!.get("first_name"),
                                                                            "last_name":
                                                                                userDataDB!.get("last_name"),
                                                                            "profilepic":
                                                                                userDataDB!.get("profilepic"),
                                                                            "school_name":
                                                                                userDataDB!.get("school_name"),
                                                                            "post_id":
                                                                                postID,
                                                                            "user_id":
                                                                                _currentUserId,
                                                                            "post_type":
                                                                                "cause|teachunprevilagedKids",
                                                                            "comment":
                                                                                sharecomment,
                                                                            "compare_date":
                                                                                comparedate
                                                                          });
                                                                      allSocialPostLocalDB!.put(
                                                                          "allpost",
                                                                          allPostData);
                                                                      if (ispostIDCreated ==
                                                                          true) {
                                                                        if (imageList
                                                                            .isNotEmpty) {
                                                                          for (int i = 0;
                                                                              i < imageList.length;
                                                                              i++) {
                                                                            isImagesPosted =
                                                                                await networkCRUD.addsmPostImageDetails([
                                                                              imgID,
                                                                              imageList[i]
                                                                            ]);
                                                                          }
                                                                        }
                                                                        if (videoList
                                                                            .isNotEmpty) {
                                                                          for (int i = 0;
                                                                              i < videoList.length;
                                                                              i++) {
                                                                            isVideosPosted =
                                                                                await networkCRUD.addsmPostVideoDetails([
                                                                              videoID,
                                                                              videoList[i],
                                                                              ""
                                                                            ]);
                                                                          }
                                                                        }
                                                                        if (selectedUserID
                                                                            .isNotEmpty) {
                                                                          for (int i = 0;
                                                                              i < selectedUserID.length;
                                                                              i++) {
                                                                            isUserTaggedPosted =
                                                                                await networkCRUD.addsmPostUserTaggedDetails([
                                                                              userTagID,
                                                                              selectedUserID[i]
                                                                            ]);
                                                                          }
                                                                        }
                                                                        List<dynamic>
                                                                            data =
                                                                            [
                                                                          postID,
                                                                          _currentUserId,
                                                                          post,
                                                                          _dTime
                                                                              .toString(),
                                                                          location,
                                                                          dob,
                                                                          eventCategory,
                                                                          eventName,
                                                                          evenSubCategory,
                                                                          eventtype,
                                                                          "EventUnderprivilegeByTeaching",
                                                                          dropdownValueFreq,
                                                                          _fromselectedTime,
                                                                          _fromselectedTime24hrs,
                                                                          _time1
                                                                              .toString(),
                                                                          dropdownValueClass,
                                                                          curr_lat,
                                                                          curr_long,
                                                                          _currentUserId.substring(
                                                                              0,
                                                                              10),
                                                                          dropdownValueSubject,
                                                                          themes[
                                                                              themeindex],
                                                                          themeindex,
                                                                          _toselectedTime,
                                                                          _toselectedTime24hrs,
                                                                          _time2
                                                                              .toString(),
                                                                          imageList.isNotEmpty
                                                                              ? imgID
                                                                              : "",
                                                                          videoList.isNotEmpty
                                                                              ? videoID
                                                                              : "",
                                                                          selectedUserID.isNotEmpty
                                                                              ? userTagID
                                                                              : "",
                                                                          "hyspostprivacy01",
                                                                          0,
                                                                          0,
                                                                          0,
                                                                          0,
                                                                          comparedate
                                                                        ];
                                                                        isFinalPostDone =
                                                                            await networkCRUD.addsmCausePostDetails(data);
                                                                        if (isFinalPostDone ==
                                                                            true) {
                                                                          allCausePostData.insert(
                                                                              0,
                                                                              {
                                                                                "first_name": userDataDB!.get("first_name"),
                                                                                "last_name": userDataDB!.get("last_name"),
                                                                                "profilepic": userDataDB!.get("profilepic"),
                                                                                "school_name": userDataDB!.get("school_name"),
                                                                                "post_id": data[0],
                                                                                "user_id": data[1],
                                                                                "message": data[2],
                                                                                "datetime": data[3],
                                                                                "address": data[4],
                                                                                "date": data[5],
                                                                                "eventcategory": data[6],
                                                                                "eventname": data[7],
                                                                                "eventsubcategory": data[8],
                                                                                "eventtype": data[9],
                                                                                "feedtype": data[10],
                                                                                "frequency": data[11],
                                                                                "from_": data[12],
                                                                                "from24hrs": data[13],
                                                                                "fromtime": data[14],
                                                                                "grade": data[15],
                                                                                "latitude": data[16],
                                                                                "longitude": data[17],
                                                                                "meetingid": data[18],
                                                                                "subject": data[19],
                                                                                "theme": data[20],
                                                                                "themeindex": data[21],
                                                                                "to_": data[22],
                                                                                "to24hrs": data[23],
                                                                                "totime": data[24],
                                                                                "imagelist_id": data[25],
                                                                                "videolist_id": data[26],
                                                                                "usertaglist_id": data[27],
                                                                                "privacy": data[28],
                                                                                "like_count": data[29],
                                                                                "comment_count": data[30],
                                                                                "view_count": data[31],
                                                                                "impression_count": data[32],
                                                                                "compare_date": data[33]
                                                                              });
                                                                          allSocialPostLocalDB!.put(
                                                                              "causepost",
                                                                              allCausePostData);
                                                                          for (int k = 0;
                                                                              k < selectedUserflag.length;
                                                                              k++) {
                                                                            setState(() {
                                                                              selectedUserflag[k] = false;
                                                                            });
                                                                          }
                                                                          _call_apis();
                                                                          ElegantNotification
                                                                              .success(
                                                                            title:
                                                                                Text("Congrats,"),
                                                                            description:
                                                                                Text("Your post created successfully."),
                                                                          );
                                                                        } else {
                                                                          ElegantNotification
                                                                              .error(
                                                                            title:
                                                                                Text("Error..."),
                                                                            description:
                                                                                Text("Something wrong."),
                                                                          );
                                                                        }
                                                                      }
                                                                    }
                                                                    setState(
                                                                        () {
                                                                      processStepSM =
                                                                          "";
                                                                      post = "";
                                                                      mood = "";
                                                                      excited =
                                                                          false;
                                                                      abletopost =
                                                                          false;
                                                                      good =
                                                                          false;
                                                                      needpeople =
                                                                          false;
                                                                      certificate =
                                                                          false;
                                                                      performance =
                                                                          false;
                                                                      friends =
                                                                          false;
                                                                      imageList =
                                                                          [];
                                                                      videoList =
                                                                          [];
                                                                      selectedUserID =
                                                                          [];
                                                                    });
                                                                    Navigator.of(
                                                                            _keyLoader
                                                                                .currentContext!,
                                                                            rootNavigator:
                                                                                true)
                                                                        .pop();
                                                                    Navigator.of(
                                                                            context)
                                                                        .pop();
                                                                  },
                                                                  child:
                                                                      Container(
                                                                    margin: EdgeInsets.only(
                                                                        right:
                                                                            10),
                                                                    padding: EdgeInsets.only(
                                                                        left: 8,
                                                                        right:
                                                                            8,
                                                                        top: 5,
                                                                        bottom:
                                                                            5),
                                                                    decoration: BoxDecoration(
                                                                        color: (post !=
                                                                                "")
                                                                            ? Color.fromRGBO(
                                                                                88,
                                                                                165,
                                                                                196,
                                                                                1)
                                                                            : Colors
                                                                                .black12,
                                                                        borderRadius:
                                                                            BorderRadius.circular(3)),
                                                                    child: Text(
                                                                      (post !=
                                                                              "")
                                                                          ? 'Post'
                                                                          : "Wait",
                                                                      style:
                                                                          TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            17,
                                                                        color: Colors
                                                                            .white,
                                                                        fontWeight:
                                                                            FontWeight.w500,
                                                                      ),
                                                                    ),
                                                                  ),
                                                                )
                                                              ],
                                                            ),
                                                            SizedBox(
                                                              height: 20,
                                                            ),
                                                            Container(
                                                              padding:
                                                                  const EdgeInsets
                                                                          .only(
                                                                      left:
                                                                          (10.0),
                                                                      right: 10,
                                                                      top: 10,
                                                                      bottom:
                                                                          10),
                                                              margin: EdgeInsets
                                                                  .all(5),
                                                              decoration: BoxDecoration(
                                                                  color: Color
                                                                      .fromRGBO(
                                                                          242,
                                                                          246,
                                                                          248,
                                                                          1),
                                                                  borderRadius:
                                                                      BorderRadius.all(
                                                                          Radius.circular(
                                                                              20))),
                                                              child: Column(
                                                                  children: [
                                                                    Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .spaceBetween,
                                                                      children: [
                                                                        Container(
                                                                          child:
                                                                              Row(
                                                                            crossAxisAlignment:
                                                                                CrossAxisAlignment.start,
                                                                            children: [
                                                                              InkWell(
                                                                                onTap: () {},
                                                                                child: CircleAvatar(
                                                                                  backgroundImage: NetworkImage(userDataDB!.get("profilepic")),
                                                                                  radius: 22,
                                                                                ),
                                                                              ),
                                                                              SizedBox(
                                                                                width: 10,
                                                                              ),
                                                                              Container(
                                                                                child: Column(
                                                                                  crossAxisAlignment: CrossAxisAlignment.start,
                                                                                  children: [
                                                                                    Row(children: [
                                                                                      Text(userDataDB!.get("first_name") + ' ' + userDataDB!.get("last_name"),
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 15,
                                                                                            color: Colors.black87,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          )),
                                                                                      Text(' has Created a Cause '),
                                                                                      Container(height: 20, width: 20, child: Image.network('https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2FcauseEmoji.png?alt=media&token=e088aaec-3089-4773-8fb2-fc5e54e3c731')),
                                                                                    ]),
                                                                                    Row(
                                                                                      children: [
                                                                                        Text('to Educate UnderPrivileged Childrens.', style: TextStyle(color: Colors.black87, fontWeight: FontWeight.w500))
                                                                                      ],
                                                                                    ),
                                                                                    InkWell(
                                                                                      onTap: () {},
                                                                                      child: Container(
                                                                                        decoration: BoxDecoration(border: Border.all(color: Color.fromRGBO(88, 165, 196, 1)), borderRadius: BorderRadius.circular(3)),
                                                                                        margin: EdgeInsets.all(3),
                                                                                        padding: EdgeInsets.all(4),
                                                                                        child: Center(
                                                                                          child: Row(
                                                                                            children: [
                                                                                              Icon(
                                                                                                Icons.group,
                                                                                                color: Colors.black87,
                                                                                                size: 11,
                                                                                              ),
                                                                                              Text(
                                                                                                ' Friends ',
                                                                                                style: TextStyle(
                                                                                                  fontFamily: 'Nunito Sans',
                                                                                                  fontSize: 12,
                                                                                                  color: Colors.black87,
                                                                                                  fontWeight: FontWeight.w500,
                                                                                                ),
                                                                                              ),
                                                                                              Icon(
                                                                                                Icons.arrow_downward,
                                                                                                color: Colors.black87,
                                                                                                size: 11,
                                                                                              ),
                                                                                            ],
                                                                                          ),
                                                                                        ),
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ],
                                                                          ),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                    SizedBox(
                                                                        height:
                                                                            20),
                                                                    Column(
                                                                      crossAxisAlignment:
                                                                          CrossAxisAlignment
                                                                              .start,
                                                                      children: [
                                                                        Container(
                                                                          width:
                                                                              MediaQuery.of(context).size.width - 60,
                                                                          child:
                                                                              TextField(
                                                                            onChanged:
                                                                                (val) {
                                                                              setState(() {
                                                                                post = val;
                                                                              });
                                                                            },
                                                                            onTap:
                                                                                () {},
                                                                            minLines:
                                                                                2,
                                                                            maxLines:
                                                                                15,
                                                                            keyboardType:
                                                                                TextInputType.multiline,
                                                                            cursorColor: Color.fromRGBO(
                                                                                88,
                                                                                165,
                                                                                196,
                                                                                1),
                                                                            style: TextStyle(
                                                                                fontSize: 15,
                                                                                color: Colors.black87,
                                                                                fontWeight: FontWeight.w400),
                                                                            decoration: InputDecoration(
                                                                                border: InputBorder.none,
                                                                                focusedBorder: InputBorder.none,
                                                                                enabledBorder: InputBorder.none,
                                                                                errorBorder: InputBorder.none,
                                                                                disabledBorder: InputBorder.none,
                                                                                hintText: 'Write about your cause...',
                                                                                hintStyle: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 16,
                                                                                  color: Colors.black26,
                                                                                  fontWeight: FontWeight.w800,
                                                                                )),
                                                                          ),
                                                                        ),
                                                                        SizedBox(
                                                                          height:
                                                                              20,
                                                                        ),
                                                                        (false ==
                                                                                true)
                                                                            ? Container(
                                                                                color: Colors.black12,
                                                                                padding: EdgeInsets.all(10),
                                                                                height: 300,
                                                                                width: MediaQuery.of(context).size.width,
                                                                                child: ListView(
                                                                                  children: [
                                                                                    Padding(
                                                                                      padding: const EdgeInsets.all(0.0),
                                                                                      child: Row(
                                                                                        mainAxisAlignment: MainAxisAlignment.end,
                                                                                        children: [
                                                                                          IconButton(
                                                                                            icon: Icon(Icons.cancel, color: Colors.black),
                                                                                            onPressed: () {
                                                                                              setState(() {
                                                                                                // imgFlag = false;
                                                                                                // uploaded = false;
                                                                                                // _image.delete();
                                                                                              });
                                                                                            },
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                    //   Image.file(firstcrop, fit: BoxFit.contain),
                                                                                  ],
                                                                                ),
                                                                              )
                                                                            : SizedBox(),
                                                                      ],
                                                                    )
                                                                  ]),
                                                            ),
                                                            SizedBox(
                                                              height: 10,
                                                            ),
                                                            Padding(
                                                                padding:
                                                                    const EdgeInsets
                                                                            .only(
                                                                        left:
                                                                            30),
                                                                child: Text(
                                                                    'Fill Event Details.',
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          15,
                                                                      color: Color.fromRGBO(
                                                                          78,
                                                                          160,
                                                                          193,
                                                                          2),
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ))),
                                                            SizedBox(
                                                              height: 10,
                                                            ),
                                                            Padding(
                                                              padding:
                                                                  const EdgeInsets
                                                                          .only(
                                                                      left: 30),
                                                              child: Container(
                                                                  child: Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .start,
                                                                      children: [
                                                                    (themeflag ==
                                                                            true)
                                                                        ? Column(
                                                                            crossAxisAlignment:
                                                                                CrossAxisAlignment.start,
                                                                            children: [
                                                                                Text('Selected Theme',
                                                                                    style: TextStyle(
                                                                                      fontFamily: 'Nunito Sans',
                                                                                      fontSize: 14,
                                                                                      color: Colors.black87,
                                                                                      fontWeight: FontWeight.w500,
                                                                                    )),
                                                                                SizedBox(
                                                                                  height: 6,
                                                                                ),
                                                                                Stack(children: [
                                                                                  Container(width: 400, height: 200, decoration: BoxDecoration(image: DecorationImage(fit: BoxFit.fill, image: AssetImage(themes[themeindex])))),
                                                                                  IconButton(
                                                                                    icon: Icon(Icons.cancel, color: Colors.black),
                                                                                    onPressed: () {
                                                                                      setState(() {
                                                                                        themeflag = false;
                                                                                        themeindex = 0;
                                                                                      });
                                                                                    },
                                                                                  )
                                                                                ])
                                                                              ])
                                                                        : SizedBox(
                                                                            height:
                                                                                1,
                                                                          )
                                                                  ])),
                                                            ),
                                                            Padding(
                                                              padding:
                                                                  const EdgeInsets
                                                                          .only(
                                                                      left:
                                                                          30.0,
                                                                      right: 40,
                                                                      bottom:
                                                                          10),
                                                              child: Column(
                                                                  children: [
                                                                    Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.spaceBetween,
                                                                        children: [
                                                                          Container(
                                                                            child: Text('Event Name',
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                          SizedBox(
                                                                              width: 20),
                                                                          Container(
                                                                              width: 150,
                                                                              child: TextFormField(
                                                                                validator: (value) {
                                                                                  if (value!.isEmpty) {
                                                                                    return 'Please Enter Name';
                                                                                  } else
                                                                                    return null;
                                                                                },
                                                                                onTap: () async {},
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    eventName = value;
                                                                                  });
                                                                                },
                                                                              ))
                                                                        ]),
                                                                    SizedBox(
                                                                      height:
                                                                          30,
                                                                    ),
                                                                    Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.spaceBetween,
                                                                        children: [
                                                                          Container(
                                                                            child: Text('Class',
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                          SizedBox(
                                                                            width:
                                                                                20,
                                                                          ),
                                                                          Container(
                                                                              width: 50,
                                                                              child: DropdownButton<String>(
                                                                                value: dropdownValueClass,
                                                                                icon: const Icon(Icons.expand_more),
                                                                                iconSize: 24,
                                                                                elevation: 16,
                                                                                style: const TextStyle(color: Colors.black),
                                                                                underline: Container(
                                                                                  height: 1,
                                                                                  color: Colors.black38,
                                                                                ),
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    dropdownValueClass = value!;
                                                                                  });
                                                                                },
                                                                                items: <String>[
                                                                                  '5',
                                                                                  '6',
                                                                                  '7',
                                                                                  '8',
                                                                                  '9',
                                                                                  '10',
                                                                                  '11',
                                                                                  '12'
                                                                                ].map<DropdownMenuItem<String>>((String value) {
                                                                                  return DropdownMenuItem<String>(
                                                                                    value: value,
                                                                                    child: Text(value),
                                                                                  );
                                                                                }).toList(),
                                                                              )),
                                                                        ]),
                                                                    SizedBox(
                                                                        height:
                                                                            30),
                                                                    Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.spaceBetween,
                                                                        children: [
                                                                          Container(
                                                                              child: Text('Subject',
                                                                                  style: TextStyle(
                                                                                    fontFamily: 'Nunito Sans',
                                                                                    fontSize: 14,
                                                                                    color: Colors.black87,
                                                                                    fontWeight: FontWeight.w500,
                                                                                  ))),
                                                                          SizedBox(
                                                                            width:
                                                                                20,
                                                                          ),
                                                                          Container(
                                                                              width: 120,
                                                                              child: DropdownButton<String>(
                                                                                value: dropdownValueSubject,
                                                                                icon: const Icon(Icons.expand_more),
                                                                                iconSize: 24,
                                                                                elevation: 16,
                                                                                style: const TextStyle(color: Colors.black),
                                                                                underline: Container(
                                                                                  height: 1,
                                                                                  color: Colors.black38,
                                                                                ),
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    dropdownValueSubject = value!;
                                                                                  });
                                                                                },
                                                                                items: <String>[
                                                                                  'Mathematics',
                                                                                  'Physics',
                                                                                  'Chemistry',
                                                                                  'English',
                                                                                  'Hindi',
                                                                                  'Moral Science',
                                                                                  'Social Studies'
                                                                                ].map<DropdownMenuItem<String>>((String value) {
                                                                                  return DropdownMenuItem<String>(
                                                                                    value: value,
                                                                                    child: Text(value),
                                                                                  );
                                                                                }).toList(),
                                                                              )),
                                                                        ]),
                                                                    SizedBox(
                                                                        height:
                                                                            30),
                                                                    Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.spaceBetween,
                                                                        children: [
                                                                          Container(
                                                                              child: Text('Frequency',
                                                                                  style: TextStyle(
                                                                                    fontFamily: 'Nunito Sans',
                                                                                    fontSize: 14,
                                                                                    color: Colors.black87,
                                                                                    fontWeight: FontWeight.w500,
                                                                                  ))),
                                                                          SizedBox(
                                                                              width: 20),
                                                                          Container(
                                                                              width: 85,
                                                                              child: DropdownButton<String>(
                                                                                value: dropdownValueFreq,
                                                                                icon: const Icon(Icons.expand_more),
                                                                                iconSize: 24,
                                                                                elevation: 16,
                                                                                style: const TextStyle(color: Colors.black),
                                                                                underline: Container(
                                                                                  height: 1,
                                                                                  color: Colors.black38,
                                                                                ),
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    dropdownValueFreq = value!;
                                                                                  });
                                                                                },
                                                                                items: <String>[
                                                                                  'Weekly',
                                                                                  'BiWeekly',
                                                                                  'Monthly'
                                                                                ].map<DropdownMenuItem<String>>((String value) {
                                                                                  return DropdownMenuItem<String>(
                                                                                    value: value,
                                                                                    child: Text(value),
                                                                                  );
                                                                                }).toList(),
                                                                              )),
                                                                        ]),
                                                                    SizedBox(
                                                                        height:
                                                                            30),
                                                                    Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.spaceBetween,
                                                                        children: [
                                                                          Container(
                                                                              child: Text('Date',
                                                                                  style: TextStyle(
                                                                                    fontFamily: 'Nunito Sans',
                                                                                    fontSize: 14,
                                                                                    color: Colors.black87,
                                                                                    fontWeight: FontWeight.w500,
                                                                                  ))),
                                                                          SizedBox(
                                                                            width:
                                                                                20,
                                                                          ),
                                                                          Container(
                                                                              width: 100,
                                                                              child: TextFormField(
                                                                                  validator: (value) {
                                                                                    if (value!.isEmpty) {
                                                                                      return 'Enter Event Date.';
                                                                                    } else
                                                                                      return null;
                                                                                  },
                                                                                  controller: _dobController,
                                                                                  onChanged: (value) {
                                                                                    setState(() {
                                                                                      dob = value;
                                                                                    });
                                                                                  },
                                                                                  onTap: () {
                                                                                    showDatePicker(context: context, initialDate: DateTime.now(), firstDate: DateTime.now(), lastDate: DateTime(2024)).then((value) {
                                                                                      setState(() {
                                                                                        dt = false;
                                                                                        _dTime = value!;
                                                                                        print(_dTime.toString());
                                                                                        _selectedDate = DateFormat("dd/MM/yyyy").format(_dTime!);
                                                                                        print(
                                                                                          _selectedDate.substring(0, 10),
                                                                                        );
                                                                                        _dobController.text = _selectedDate;
                                                                                        dob = _selectedDate;
                                                                                      });
                                                                                    });
                                                                                  },
                                                                                  decoration: InputDecoration(labelText: 'DD//MM//YY'))),
                                                                        ]),
                                                                    SizedBox(
                                                                        height:
                                                                            30),
                                                                    Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .spaceBetween,
                                                                      children: [
                                                                        Container(
                                                                            child: Text('Time Slot',
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                ))),
                                                                        SizedBox(
                                                                          width:
                                                                              60,
                                                                        ),
                                                                        Container(
                                                                            width:
                                                                                70,
                                                                            child: TextFormField(
                                                                                validator: (value) {
                                                                                  if (value!.isEmpty) {
                                                                                    return '*';
                                                                                  } else
                                                                                    return null;
                                                                                },
                                                                                controller: _timeController1,
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    _fromselectedTime = value;
                                                                                  });
                                                                                },
                                                                                onTap: () {
                                                                                  showTimePicker(
                                                                                    context: context,
                                                                                    initialTime: TimeOfDay.now(),
                                                                                  ).then((value) {
                                                                                    setState(() {
                                                                                      _time1 = value;
                                                                                      print(_time1.toString());
                                                                                      _fromselectedTime = _time1!.format(context).toString();
                                                                                      print(_time1!.hour.toString());
                                                                                      print(_time1!.minute.toString());
                                                                                      print(_fromselectedTime);
                                                                                      _timeController1.text = _fromselectedTime;
                                                                                      _fromselectedTime24hrs = _time1!.hour.toString() + ":" + _time1!.minute.toString();
                                                                                    });
                                                                                  });
                                                                                },
                                                                                decoration: InputDecoration(labelText: 'HH:MM', labelStyle: TextStyle(fontSize: 10)))),
                                                                        SizedBox(
                                                                            width:
                                                                                4),
                                                                        Container(
                                                                            child: Column(
                                                                                mainAxisAlignment: MainAxisAlignment.center,
                                                                                children: [
                                                                              Text(' - ')
                                                                            ])),
                                                                        SizedBox(
                                                                          width:
                                                                              4,
                                                                        ),
                                                                        InkWell(
                                                                          child: Container(
                                                                              width: 70,
                                                                              child: TextFormField(
                                                                                  validator: (value) {
                                                                                    if (value!.isEmpty) {
                                                                                      return '*';
                                                                                    } else
                                                                                      return null;
                                                                                  },
                                                                                  controller: _timeController2,
                                                                                  onChanged: (value) {
                                                                                    setState(() {
                                                                                      _toselectedTime = value;
                                                                                    });
                                                                                  },
                                                                                  onTap: () {
                                                                                    showTimePicker(
                                                                                      context: context,
                                                                                      initialTime: TimeOfDay.now(),
                                                                                    ).then((value) {
                                                                                      setState(() {
                                                                                        _time2 = value;
                                                                                        print(_time2.toString());
                                                                                        _toselectedTime = _time2!.format(context).toString();
                                                                                        _toselectedTime24hrs = _time2!.hour.toString() + ":" + _time2!.minute.toString();
                                                                                        _timeController2.text = _toselectedTime;
                                                                                      });
                                                                                    });
                                                                                  },
                                                                                  decoration: InputDecoration(labelText: 'HH:MM', labelStyle: TextStyle(fontSize: 10)))),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                    SizedBox(
                                                                        height:
                                                                            30),
                                                                    eventtype ==
                                                                            "offline"
                                                                        ? Row(
                                                                            mainAxisAlignment:
                                                                                MainAxisAlignment.spaceBetween,
                                                                            children: [
                                                                              Container(
                                                                                  child: Text('Location',
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        color: Colors.black87,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      ))),
                                                                              SizedBox(
                                                                                width: 20,
                                                                              ),
                                                                              Container(
                                                                                  width: 200,
                                                                                  child: TextFormField(
                                                                                    validator: (value) {
                                                                                      if (value!.isEmpty) {
                                                                                        return 'Please Enter Address.';
                                                                                      } else
                                                                                        return null;
                                                                                    },
                                                                                    controller: _locController,
                                                                                    onTap: () {
                                                                                      if (location == '') {
                                                                                        // _handlePressButton();
                                                                                      }
                                                                                    },
                                                                                    onChanged: (value) {
                                                                                      setState(() {
                                                                                        location = value;
                                                                                      });
                                                                                    },
                                                                                  )),
                                                                            ],
                                                                          )
                                                                        : Row(
                                                                            mainAxisAlignment:
                                                                                MainAxisAlignment.spaceBetween,
                                                                            children: [
                                                                              Container(
                                                                                  child: Text('Meeting ID',
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        color: Colors.black87,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      ))),
                                                                              SizedBox(
                                                                                width: 20,
                                                                              ),
                                                                              Container(
                                                                                  width: 100,
                                                                                  child: Text(_currentUserId.substring(0, 10),
                                                                                      style: GoogleFonts.montserrat(
                                                                                          textStyle: TextStyle(
                                                                                        fontSize: 15,
                                                                                        color: Colors.black,
                                                                                        fontWeight: FontWeight.w700,
                                                                                      )))),
                                                                            ],
                                                                          ),
                                                                    SizedBox(
                                                                      height:
                                                                          30,
                                                                    ),
                                                                    (fullAddress !=
                                                                            '')
                                                                        ? InkWell(
                                                                            child:
                                                                                Text('Google Map', style: TextStyle(color: Colors.blue, fontSize: 15)))
                                                                        : SizedBox(),
                                                                    SizedBox(
                                                                        height:
                                                                            30),
                                                                  ]),
                                                            ),
                                                            SizedBox(
                                                                height: 20),
                                                            ((imageList.length >
                                                                    0))
                                                                ? buildGridView()
                                                                : SizedBox(),
                                                            // finalVideos.length > 0
                                                            //     ? showSelectedVideos()
                                                            //     : SizedBox(),
                                                          ])),
                                                      SizedBox(height: 20),
                                                      Column(children: [
                                                        Container(
                                                            color: Colors.white,
                                                            child: Row(
                                                                mainAxisAlignment:
                                                                    MainAxisAlignment
                                                                        .spaceBetween,
                                                                children: [
                                                                  Container(
                                                                      padding: EdgeInsets.only(
                                                                          top:
                                                                              5,
                                                                          bottom:
                                                                              8,
                                                                          left:
                                                                              8,
                                                                          right:
                                                                              8),
                                                                      child: Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.spaceEvenly,
                                                                          children: [
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  themeflag = true;
                                                                                  setState(() {
                                                                                    themeindex = 0;
                                                                                  });
                                                                                  Navigator.of(context).pop();

                                                                                  _addSocialPostDialog();
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage('assets/theme1.jpeg'), radius: 17)),
                                                                            SizedBox(width: 7),
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  themeflag = true;
                                                                                  setState(() {
                                                                                    themeindex = 1;
                                                                                  });
                                                                                  Navigator.of(context).pop();

                                                                                  _addSocialPostDialog();
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage('assets/theme2.jpg'), radius: 17)),
                                                                            SizedBox(width: 7),
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  themeflag = true;
                                                                                  setState(() {
                                                                                    themeindex = 2;
                                                                                  });
                                                                                  Navigator.of(context).pop();

                                                                                  _addSocialPostDialog();
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage('assets/theme3.png'), radius: 17)),
                                                                            SizedBox(width: 7),
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  themeflag = true;
                                                                                  setState(() {
                                                                                    themeindex = 3;
                                                                                  });
                                                                                  Navigator.of(context).pop();

                                                                                  _addSocialPostDialog();
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage('assets/theme4.png'), radius: 17)),
                                                                            SizedBox(width: 7),
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  themeflag = true;
                                                                                  setState(() {
                                                                                    themeindex = 4;
                                                                                  });
                                                                                  Navigator.of(context).pop();

                                                                                  _addSocialPostDialog();
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage('assets/theme5.png'), radius: 17)),
                                                                            SizedBox(width: 7),
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  themeflag = true;
                                                                                  setState(() {
                                                                                    themeindex = 5;
                                                                                  });
                                                                                  Navigator.of(context).pop();

                                                                                  _addSocialPostDialog();
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage('assets/theme6.png'), radius: 17)),
                                                                            SizedBox(width: 7),
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  themeflag = true;
                                                                                  setState(() {
                                                                                    themeindex = 6;
                                                                                  });
                                                                                  Navigator.of(context).pop();

                                                                                  _addSocialPostDialog();
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage('assets/theme7.png'), radius: 17)),
                                                                            SizedBox(width: 7),
                                                                          ]))
                                                                ])),
                                                        Container(
                                                          color: Colors.white,
                                                          child: Row(
                                                            mainAxisAlignment:
                                                                MainAxisAlignment
                                                                    .spaceBetween,
                                                            children: [
                                                              Container(
                                                                padding: EdgeInsets
                                                                    .only(
                                                                        bottom:
                                                                            10),
                                                                child: Row(
                                                                  mainAxisAlignment:
                                                                      MainAxisAlignment
                                                                          .start,
                                                                  children: [
                                                                    InkWell(
                                                                      onTap:
                                                                          () async {
                                                                        setState(
                                                                            () {});
                                                                      },
                                                                      child:
                                                                          Container(
                                                                        padding: EdgeInsets.only(
                                                                            top:
                                                                                10,
                                                                            right:
                                                                                15),
                                                                        child:
                                                                            Center(
                                                                          child: Image.network(
                                                                              "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fvideorecord.jpg?alt=media&token=f2f0b22d-020e-47e9-b8bb-6e2321f956fd",
                                                                              height: 25,
                                                                              width: 25),
                                                                        ),
                                                                      ),
                                                                    ),
                                                                    InkWell(
                                                                      onTap:
                                                                          () {
                                                                        _pickImages(
                                                                            context,
                                                                            "post");
                                                                      },
                                                                      child:
                                                                          Container(
                                                                        padding: EdgeInsets.only(
                                                                            top:
                                                                                10,
                                                                            right:
                                                                                15),
                                                                        child:
                                                                            Center(
                                                                          child: Image.network(
                                                                              "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fgallery.png?alt=media&token=09a32fa6-5e7c-4139-94e5-d4d74e5f5d6a",
                                                                              height: 22,
                                                                              width: 21),
                                                                        ),
                                                                      ),
                                                                    ),
                                                                    InkWell(
                                                                      onTap:
                                                                          () async {
                                                                        setState(
                                                                            () {
                                                                          beforeTag =
                                                                              processStepSM;
                                                                          processStepSM =
                                                                              "tag";
                                                                        });
                                                                      },
                                                                      child:
                                                                          Container(
                                                                        padding: EdgeInsets.only(
                                                                            top:
                                                                                10,
                                                                            right:
                                                                                15),
                                                                        child:
                                                                            Center(
                                                                          child: Icon(
                                                                              FontAwesome5.user_tag,
                                                                              size: 18,
                                                                              color: Colors.deepPurple),
                                                                        ),
                                                                      ),
                                                                    ),
                                                                  ],
                                                                ),
                                                              ),
                                                            ],
                                                          ),
                                                        )
                                                      ])
                                                    ])
                                              : processStepSM == "businessidea"
                                                  ? Column(children: [
                                                      Expanded(
                                                          child:
                                                              SingleChildScrollView(
                                                        child: Column(
                                                            children: [
                                                              SizedBox(
                                                                height: 10,
                                                              ),
                                                              Row(
                                                                mainAxisAlignment:
                                                                    MainAxisAlignment
                                                                        .spaceBetween,
                                                                children: [
                                                                  IconButton(
                                                                    onPressed:
                                                                        () {
                                                                      setState(
                                                                          () {
                                                                        processStepSM =
                                                                            "";
                                                                      });
                                                                    },
                                                                    icon: Tab(
                                                                        child: Icon(
                                                                            Icons
                                                                                .cancel,
                                                                            color:
                                                                                Colors.black45,
                                                                            size: 20)),
                                                                  ),
                                                                  Text(
                                                                    'Create',
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          17,
                                                                      color: Colors
                                                                          .black87,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w600,
                                                                    ),
                                                                  ),
                                                                  InkWell(
                                                                    onTap:
                                                                        () async {
                                                                      if ((content !=
                                                                              "") &&
                                                                          (title !=
                                                                              "")) {
                                                                        Dialogs.showLoadingDialog(
                                                                            context,
                                                                            _keyLoader);
                                                                        tagids
                                                                            .clear();
                                                                        print(
                                                                            markuptext);
                                                                        for (int l =
                                                                                0;
                                                                            l < markuptext.length - 4;
                                                                            l++) {
                                                                          int k =
                                                                              l;
                                                                          if (markuptext.substring(k, k + 1) ==
                                                                              "@") {
                                                                            String
                                                                                test1 =
                                                                                markuptext.substring(k);
                                                                            print("tagid ${test1.substring(4, test1.indexOf("__]"))}");
                                                                            tagids.add(test1.substring(4,
                                                                                test1.indexOf("__]")));
                                                                          }
                                                                        }
                                                                        comparedate =
                                                                            DateFormat('yyyyMMddkkmm').format(DateTime.now());
                                                                        String
                                                                            postID =
                                                                            "sm${_currentUserId}${comparedate}";
                                                                        String
                                                                            imgID =
                                                                            "imgsm${_currentUserId}${comparedate}";
                                                                        String
                                                                            videoID =
                                                                            "vdosm${_currentUserId}${comparedate}";
                                                                        String
                                                                            userTagID =
                                                                            "usrtgsm${_currentUserId}${comparedate}";
                                                                        bool
                                                                            isImagesPosted =
                                                                            false;
                                                                        bool
                                                                            isVideosPosted =
                                                                            false;
                                                                        bool
                                                                            isUserTaggedPosted =
                                                                            false;
                                                                        bool
                                                                            isFinalPostDone =
                                                                            false;
                                                                        bool
                                                                            ispostIDCreated =
                                                                            await networkCRUD.addsmPostDetails([
                                                                          postID,
                                                                          _currentUserId,
                                                                          "businessideas",
                                                                          sharecomment,
                                                                          comparedate
                                                                        ]);
                                                                        allPostData
                                                                            .insert(
                                                                                0,
                                                                                {
                                                                              "first_name": userDataDB!.get("first_name"),
                                                                              "last_name": userDataDB!.get("last_name"),
                                                                              "profilepic": userDataDB!.get("profilepic"),
                                                                              "school_name": userDataDB!.get("school_name"),
                                                                              "post_id": postID,
                                                                              "user_id": _currentUserId,
                                                                              "post_type": "businessideas",
                                                                              "comment": sharecomment,
                                                                              "compare_date": comparedate
                                                                            });
                                                                        allSocialPostLocalDB!.put(
                                                                            "allpost",
                                                                            allPostData);
                                                                        if (ispostIDCreated ==
                                                                            true) {
                                                                          if (imageList
                                                                              .isNotEmpty) {
                                                                            for (int i = 0;
                                                                                i < imageList.length;
                                                                                i++) {
                                                                              isImagesPosted = await networkCRUD.addsmPostImageDetails([
                                                                                imgID,
                                                                                imageList[i]
                                                                              ]);
                                                                            }
                                                                          }
                                                                          if (videoList
                                                                              .isNotEmpty) {
                                                                            for (int i = 0;
                                                                                i < videoList.length;
                                                                                i++) {
                                                                              isVideosPosted = await networkCRUD.addsmPostVideoDetails([
                                                                                videoID,
                                                                                videoList[i],
                                                                                ""
                                                                              ]);
                                                                            }
                                                                          }
                                                                          if (tagids
                                                                              .isNotEmpty) {
                                                                            for (int i = 0;
                                                                                i < tagids.length;
                                                                                i++) {
                                                                              isUserTaggedPosted = await networkCRUD.addsmPostUserTaggedDetails([
                                                                                userTagID,
                                                                                tagids[i]
                                                                              ]);
                                                                            }
                                                                          }
                                                                          List<dynamic>
                                                                              data =
                                                                              [
                                                                            postID,
                                                                            _currentUserId,
                                                                            content,
                                                                            themepath,
                                                                            title,
                                                                            identification,
                                                                            solution,
                                                                            target,
                                                                            competitors,
                                                                            swot,
                                                                            strategy,
                                                                            funds,
                                                                            imageList.isNotEmpty
                                                                                ? imgID
                                                                                : "",
                                                                            videoList.isNotEmpty
                                                                                ? videoID
                                                                                : "",
                                                                            tagids.isNotEmpty
                                                                                ? userTagID
                                                                                : "",
                                                                            "hyspostprivacy01",
                                                                            0,
                                                                            0,
                                                                            0,
                                                                            0,
                                                                            comparedate
                                                                          ];
                                                                          isFinalPostDone =
                                                                              await networkCRUD.addsmBusinessIdeasPostDetails(data);
                                                                          if (isFinalPostDone ==
                                                                              true) {
                                                                            allBIdeasPostData.insert(0, {
                                                                              "first_name": userDataDB!.get("first_name"),
                                                                              "last_name": userDataDB!.get("last_name"),
                                                                              "profilepic": userDataDB!.get("profilepic"),
                                                                              "school_name": userDataDB!.get("school_name"),
                                                                              "post_id": data[0],
                                                                              "user_id": data[1],
                                                                              "content": data[2],
                                                                              "theme": data[3],
                                                                              "title": data[4],
                                                                              "identification": data[5],
                                                                              "solution": data[6],
                                                                              "target": data[7],
                                                                              "competitors": data[8],
                                                                              "swot": data[9],
                                                                              "strategy": data[10],
                                                                              "funds": data[11],
                                                                              "documentlist_id": data[12],
                                                                              "videolist_id": data[13],
                                                                              "memberlist_id": data[14],
                                                                              "privacy": data[15],
                                                                              "like_count": data[16],
                                                                              "comment_count": data[17],
                                                                              "view_count": data[18],
                                                                              "impression_count": data[19],
                                                                              "compare_date": data[20]
                                                                            });
                                                                            allSocialPostLocalDB!.put("businesspost",
                                                                                allBIdeasPostData);
                                                                            for (int k = 0;
                                                                                k < selectedUserflag.length;
                                                                                k++) {
                                                                              setState(() {
                                                                                selectedUserflag[k] = false;
                                                                              });
                                                                            }
                                                                            _call_apis();
                                                                            ElegantNotification.success(
                                                                              title: Text("Congrats,"),
                                                                              description: Text("Your post created successfully."),
                                                                            );
                                                                          } else {
                                                                            ElegantNotification.error(
                                                                              title: Text("Error..."),
                                                                              description: Text("Something wrong."),
                                                                            );
                                                                          }
                                                                        }
                                                                      }
                                                                      setState(
                                                                          () {
                                                                        processStepSM =
                                                                            "";
                                                                        post =
                                                                            "";
                                                                        mood =
                                                                            "";
                                                                        excited =
                                                                            false;
                                                                        abletopost =
                                                                            false;
                                                                        good =
                                                                            false;
                                                                        needpeople =
                                                                            false;
                                                                        certificate =
                                                                            false;
                                                                        performance =
                                                                            false;
                                                                        friends =
                                                                            false;
                                                                        imageList =
                                                                            [];
                                                                        videoList =
                                                                            [];
                                                                        selectedUserID =
                                                                            [];
                                                                      });
                                                                      Navigator.of(
                                                                              _keyLoader.currentContext!,
                                                                              rootNavigator: true)
                                                                          .pop();
                                                                      Navigator.of(
                                                                              context)
                                                                          .pop();
                                                                    },
                                                                    child:
                                                                        Container(
                                                                      margin: EdgeInsets.only(
                                                                          right:
                                                                              10),
                                                                      padding: EdgeInsets.only(
                                                                          left:
                                                                              8,
                                                                          right:
                                                                              8,
                                                                          top:
                                                                              5,
                                                                          bottom:
                                                                              5),
                                                                      decoration: BoxDecoration(
                                                                          color: (content != "") && (title != "")
                                                                              ? Color.fromRGBO(88, 165, 196, 1)
                                                                              : Colors.black12,
                                                                          borderRadius: BorderRadius.circular(3)),
                                                                      child:
                                                                          Text(
                                                                        (content != "") &&
                                                                                (title != "")
                                                                            ? 'Post'
                                                                            : "Wait",
                                                                        style:
                                                                            TextStyle(
                                                                          fontFamily:
                                                                              'Nunito Sans',
                                                                          fontSize:
                                                                              17,
                                                                          color:
                                                                              Colors.white,
                                                                          fontWeight:
                                                                              FontWeight.w500,
                                                                        ),
                                                                      ),
                                                                    ),
                                                                  )
                                                                ],
                                                              ),
                                                              SizedBox(
                                                                height: 20,
                                                              ),
                                                              Container(
                                                                padding: const EdgeInsets
                                                                        .only(
                                                                    left:
                                                                        (10.0),
                                                                    right: 10,
                                                                    top: 10,
                                                                    bottom: 10),
                                                                margin:
                                                                    EdgeInsets
                                                                        .all(5),
                                                                decoration: BoxDecoration(
                                                                    color: Color
                                                                        .fromRGBO(
                                                                            242,
                                                                            246,
                                                                            248,
                                                                            1),
                                                                    borderRadius:
                                                                        BorderRadius.all(
                                                                            Radius.circular(20))),
                                                                child: Column(
                                                                    children: [
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.spaceBetween,
                                                                        children: [
                                                                          Container(
                                                                            child:
                                                                                Row(
                                                                              crossAxisAlignment: CrossAxisAlignment.start,
                                                                              children: [
                                                                                InkWell(
                                                                                  onTap: () {},
                                                                                  child: CircleAvatar(
                                                                                    backgroundImage: NetworkImage(userDataDB!.get("profilepic")),
                                                                                    radius: 22,
                                                                                  ),
                                                                                ),
                                                                                SizedBox(
                                                                                  width: 10,
                                                                                ),
                                                                                Container(
                                                                                  child: Column(
                                                                                    crossAxisAlignment: CrossAxisAlignment.start,
                                                                                    children: [
                                                                                      Row(children: [
                                                                                        Text(userDataDB!.get("first_name") + ' ' + userDataDB!.get("last_name"),
                                                                                            style: TextStyle(
                                                                                              fontFamily: 'Nunito Sans',
                                                                                              fontSize: 15,
                                                                                              color: Colors.black87,
                                                                                              fontWeight: FontWeight.w500,
                                                                                            )),
                                                                                        Text(' has a Business Idea '),
                                                                                      ]),
                                                                                      InkWell(
                                                                                        onTap: () {},
                                                                                        child: Container(
                                                                                          decoration: BoxDecoration(border: Border.all(color: Color.fromRGBO(88, 165, 196, 1)), borderRadius: BorderRadius.circular(3)),
                                                                                          margin: EdgeInsets.all(3),
                                                                                          padding: EdgeInsets.all(4),
                                                                                          child: Center(
                                                                                            child: Row(
                                                                                              children: [
                                                                                                Icon(
                                                                                                  Icons.group,
                                                                                                  color: Colors.black87,
                                                                                                  size: 11,
                                                                                                ),
                                                                                                Text(
                                                                                                  ' Friends ',
                                                                                                  style: TextStyle(
                                                                                                    fontFamily: 'Nunito Sans',
                                                                                                    fontSize: 12,
                                                                                                    color: Colors.black87,
                                                                                                    fontWeight: FontWeight.w500,
                                                                                                  ),
                                                                                                ),
                                                                                                Icon(
                                                                                                  Icons.arrow_downward,
                                                                                                  color: Colors.black87,
                                                                                                  size: 11,
                                                                                                ),
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                        ),
                                                                                      ),
                                                                                    ],
                                                                                  ),
                                                                                ),
                                                                              ],
                                                                            ),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              20),
                                                                      Column(
                                                                        crossAxisAlignment:
                                                                            CrossAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            width:
                                                                                MediaQuery.of(context).size.width - 60,
                                                                            child:
                                                                                TextField(
                                                                              onChanged: (val) {
                                                                                setState(() {
                                                                                  content = val;
                                                                                });
                                                                              },
                                                                              minLines: 2,
                                                                              maxLines: 15,
                                                                              keyboardType: TextInputType.multiline,
                                                                              cursorColor: Color.fromRGBO(88, 165, 196, 1),
                                                                              style: TextStyle(fontSize: 15, color: Colors.black87, fontWeight: FontWeight.w400),
                                                                              decoration: InputDecoration(
                                                                                  border: InputBorder.none,
                                                                                  focusedBorder: InputBorder.none,
                                                                                  enabledBorder: InputBorder.none,
                                                                                  errorBorder: InputBorder.none,
                                                                                  disabledBorder: InputBorder.none,
                                                                                  hintText: 'Write about your Business Idea/Plan...',
                                                                                  hintStyle: TextStyle(
                                                                                    fontFamily: 'Nunito Sans',
                                                                                    fontSize: 16,
                                                                                    color: Colors.black26,
                                                                                    fontWeight: FontWeight.w800,
                                                                                  )),
                                                                            ),
                                                                          ),
                                                                          SizedBox(
                                                                            height:
                                                                                20,
                                                                          ),
                                                                        ],
                                                                      )
                                                                    ]),
                                                              ),
                                                              SizedBox(
                                                                height: 10,
                                                              ),
                                                              Padding(
                                                                padding:
                                                                    const EdgeInsets
                                                                            .only(
                                                                        left:
                                                                            25.0,
                                                                        right:
                                                                            25,
                                                                        bottom:
                                                                            10),
                                                                child: Column(
                                                                    children: [
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Text(
                                                                              'Fill Business Idea Details.',
                                                                              style: TextStyle(
                                                                                fontFamily: 'Nunito Sans',
                                                                                fontSize: 15,
                                                                                color: Color.fromRGBO(78, 160, 193, 2),
                                                                                fontWeight: FontWeight.w500,
                                                                              )),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                        height:
                                                                            12,
                                                                      ),
                                                                      Container(
                                                                          child: Row(
                                                                              mainAxisAlignment: MainAxisAlignment.start,
                                                                              children: [
                                                                            (themeflagBusiness == true)
                                                                                ? Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
                                                                                    Text('Selected Theme',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                    SizedBox(
                                                                                      height: 6,
                                                                                    ),
                                                                                    Stack(children: [
                                                                                      Container(width: 200, height: 100, decoration: BoxDecoration(image: DecorationImage(fit: BoxFit.fill, image: AssetImage(themepath)))),
                                                                                      IconButton(
                                                                                        icon: Icon(Icons.cancel, color: Colors.black),
                                                                                        onPressed: () {
                                                                                          setState(() {
                                                                                            themeflagBusiness = false;
                                                                                            themepath = "";
                                                                                          });
                                                                                        },
                                                                                      )
                                                                                    ])
                                                                                  ])
                                                                                : SizedBox(
                                                                                    height: 1,
                                                                                  ),
                                                                          ])),
                                                                      SizedBox(
                                                                          height:
                                                                              30),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            child: Text("Upload Documents Related to plan",
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                        height:
                                                                            12,
                                                                      ),
                                                                      businessFileUploaded ==
                                                                              false
                                                                          ? Row(
                                                                              mainAxisAlignment: MainAxisAlignment.start,
                                                                              children: [
                                                                                Container(
                                                                                    width: _width! > 600 ? 450 : _width! - 170,
                                                                                    height: 110,
                                                                                    decoration: BoxDecoration(
                                                                                      border: Border.all(color: Colors.black26),
                                                                                      borderRadius: BorderRadius.circular(10),
                                                                                    ),
                                                                                    child: Padding(
                                                                                        padding: const EdgeInsets.all(5.0),
                                                                                        child: TextFormField(
                                                                                          maxLines: 5,
                                                                                          style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                          decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Upload Multiple Document Here", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                          keyboardType: TextInputType.multiline,
                                                                                          onTap: () async {
                                                                                            _pickFilesForBusinessIdea(context, 'post');
                                                                                          },
                                                                                        ))),
                                                                              ],
                                                                            )
                                                                          : Stack(children: [
                                                                              Column(children: [
                                                                                InkWell(
                                                                                    onTap: () async {
                                                                                      if (imageList.isNotEmpty) {
                                                                                        _launchInBrowser(imageList[0]);
                                                                                      }
                                                                                    },
                                                                                    child: Container(width: 200, height: 200, decoration: BoxDecoration(image: DecorationImage(image: AssetImage('assets/fileuploadicon.png'))))),
                                                                                Text("Attached Files", style: TextStyle(color: Colors.black54, fontSize: 14, fontWeight: FontWeight.w500))
                                                                              ]),
                                                                              IconButton(
                                                                                icon: Icon(Icons.cancel, color: Colors.black),
                                                                                onPressed: () {
                                                                                  setState(() {
                                                                                    businessFileUploaded = false;
                                                                                    imageList = [];
                                                                                  });
                                                                                },
                                                                              )
                                                                            ]),
                                                                      SizedBox(
                                                                          height:
                                                                              30),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            child: Text('Title of the idea',
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              12),
                                                                      Container(
                                                                          width:
                                                                              500,
                                                                          decoration:
                                                                              BoxDecoration(
                                                                            border:
                                                                                Border.all(color: Colors.black26),
                                                                            borderRadius:
                                                                                BorderRadius.circular(10),
                                                                          ),
                                                                          child: Padding(
                                                                              padding: const EdgeInsets.all(5.0),
                                                                              child: TextFormField(
                                                                                maxLines: 2,
                                                                                style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Write in not more than 50 words.", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                validator: (value) {
                                                                                  if (value!.isEmpty) {
                                                                                    return 'Please Enter Title.';
                                                                                  } else
                                                                                    return null;
                                                                                },
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    title = value;
                                                                                  });
                                                                                },
                                                                              ))),
                                                                      SizedBox(
                                                                        height:
                                                                            30,
                                                                      ),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                              child: Text('Identification of Problem',
                                                                                  style: TextStyle(
                                                                                    fontFamily: 'Nunito Sans',
                                                                                    fontSize: 14,
                                                                                    color: Colors.black87,
                                                                                    fontWeight: FontWeight.w500,
                                                                                  ))),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                        height:
                                                                            12,
                                                                      ),
                                                                      Container(
                                                                          width:
                                                                              500,
                                                                          decoration:
                                                                              BoxDecoration(
                                                                            border:
                                                                                Border.all(color: Colors.black26),
                                                                            borderRadius:
                                                                                BorderRadius.circular(10),
                                                                          ),
                                                                          child: Padding(
                                                                              padding: const EdgeInsets.all(5.0),
                                                                              child: TextFormField(
                                                                                maxLines: 2,
                                                                                style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Write in not more than 50 words.", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                validator: (value) {
                                                                                  if (value!.isEmpty) {
                                                                                    return 'Please Enter Title.';
                                                                                  } else
                                                                                    return null;
                                                                                },
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    identification = value;
                                                                                  });
                                                                                },
                                                                              ))),
                                                                      SizedBox(
                                                                          height:
                                                                              30),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            child: Text("Your Solution to the identified problem",
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              12),
                                                                      Container(
                                                                          width:
                                                                              500,
                                                                          decoration:
                                                                              BoxDecoration(
                                                                            border:
                                                                                Border.all(color: Colors.black26),
                                                                            borderRadius:
                                                                                BorderRadius.circular(10),
                                                                          ),
                                                                          child: Padding(
                                                                              padding: const EdgeInsets.all(5.0),
                                                                              child: TextFormField(
                                                                                maxLines: 5,
                                                                                style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Write in not more than 100 words.", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                validator: (value) {
                                                                                  if (value!.isEmpty) {
                                                                                    return 'Please Enter Title.';
                                                                                  } else
                                                                                    return null;
                                                                                },
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    solution = value;
                                                                                  });
                                                                                },
                                                                              ))),
                                                                      SizedBox(
                                                                        height:
                                                                            30,
                                                                      ),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            child: Text("Target Market",
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              12),
                                                                      Container(
                                                                          width:
                                                                              500,
                                                                          decoration:
                                                                              BoxDecoration(
                                                                            border:
                                                                                Border.all(color: Colors.black26),
                                                                            borderRadius:
                                                                                BorderRadius.circular(10),
                                                                          ),
                                                                          child: Padding(
                                                                              padding: const EdgeInsets.all(5.0),
                                                                              child: TextFormField(
                                                                                maxLines: 5,
                                                                                style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Write in not more than 100 words.", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                validator: (value) {
                                                                                  if (value!.isEmpty) {
                                                                                    return 'Please Enter Title.';
                                                                                  } else
                                                                                    return null;
                                                                                },
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    target = value;
                                                                                  });
                                                                                },
                                                                              ))),
                                                                      SizedBox(
                                                                        height:
                                                                            30,
                                                                      ),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            child: Text("Your Competitors",
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              12),
                                                                      Container(
                                                                          width:
                                                                              500,
                                                                          decoration:
                                                                              BoxDecoration(
                                                                            border:
                                                                                Border.all(color: Colors.black26),
                                                                            borderRadius:
                                                                                BorderRadius.circular(10),
                                                                          ),
                                                                          child: Padding(
                                                                              padding: const EdgeInsets.all(5.0),
                                                                              child: TextFormField(
                                                                                maxLines: 5,
                                                                                style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Write in not more than 100 words.", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                validator: (value) {
                                                                                  if (value!.isEmpty) {
                                                                                    return 'Please Enter Title.';
                                                                                  } else
                                                                                    return null;
                                                                                },
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    competitors = value;
                                                                                  });
                                                                                },
                                                                              ))),
                                                                      SizedBox(
                                                                        height:
                                                                            30,
                                                                      ),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            child: Text("SWOT Analysis",
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              12),
                                                                      Container(
                                                                          width:
                                                                              500,
                                                                          decoration:
                                                                              BoxDecoration(
                                                                            border:
                                                                                Border.all(color: Colors.black26),
                                                                            borderRadius:
                                                                                BorderRadius.circular(10),
                                                                          ),
                                                                          child: Padding(
                                                                              padding: const EdgeInsets.all(5.0),
                                                                              child: TextFormField(
                                                                                maxLines: 5,
                                                                                style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Write in not more than 100 words.", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                validator: (value) {
                                                                                  if (value!.isEmpty) {
                                                                                    return 'Please Enter Title.';
                                                                                  } else
                                                                                    return null;
                                                                                },
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    swot = value;
                                                                                  });
                                                                                },
                                                                              ))),
                                                                      SizedBox(
                                                                        height:
                                                                            30,
                                                                      ),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            child: Text("Marketing Strategy",
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              12),
                                                                      Container(
                                                                          width:
                                                                              500,
                                                                          decoration:
                                                                              BoxDecoration(
                                                                            border:
                                                                                Border.all(color: Colors.black26),
                                                                            borderRadius:
                                                                                BorderRadius.circular(10),
                                                                          ),
                                                                          child: Padding(
                                                                              padding: const EdgeInsets.all(5.0),
                                                                              child: TextFormField(
                                                                                maxLines: 5,
                                                                                style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Write in not more than 100 words.", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                validator: (value) {
                                                                                  if (value!.isEmpty) {
                                                                                    return 'Please Enter Title.';
                                                                                  } else
                                                                                    return null;
                                                                                },
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    strategy = value;
                                                                                  });
                                                                                },
                                                                              ))),
                                                                      SizedBox(
                                                                        height:
                                                                            30,
                                                                      ),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            child: Text("Funds Required",
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              12),
                                                                      Container(
                                                                          width:
                                                                              500,
                                                                          decoration:
                                                                              BoxDecoration(
                                                                            border:
                                                                                Border.all(color: Colors.black26),
                                                                            borderRadius:
                                                                                BorderRadius.circular(10),
                                                                          ),
                                                                          child: Padding(
                                                                              padding: const EdgeInsets.all(5.0),
                                                                              child: TextFormField(
                                                                                maxLines: 5,
                                                                                style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Write in not more than 50 words.", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                validator: (value) {
                                                                                  if (value!.isEmpty) {
                                                                                    return 'Please Enter Title.';
                                                                                  } else
                                                                                    return null;
                                                                                },
                                                                                onChanged: (value) {
                                                                                  setState(() {
                                                                                    funds = value;
                                                                                  });
                                                                                },
                                                                              ))),
                                                                      SizedBox(
                                                                        height:
                                                                            30,
                                                                      ),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            child: Text("Team Members",
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 14,
                                                                                  color: Colors.black87,
                                                                                  fontWeight: FontWeight.w500,
                                                                                )),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              12),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.start,
                                                                        children: [
                                                                          Container(
                                                                            width: _width! > 600
                                                                                ? 450
                                                                                : _width! - 170,
                                                                            height:
                                                                                60,
                                                                            padding:
                                                                                EdgeInsets.all(2),
                                                                            child:
                                                                                FlutterMentions(
                                                                              key: key,
                                                                              keyboardType: TextInputType.text,
                                                                              cursorColor: Color.fromRGBO(88, 165, 196, 1),
                                                                              decoration: InputDecoration(
                                                                                fillColor: Color.fromRGBO(245, 245, 245, 1),
                                                                                filled: true,
                                                                                counterText: '',
                                                                                hintText: '@Tag someone here',
                                                                                hintStyle: TextStyle(fontSize: 13, color: Colors.grey[400], fontWeight: FontWeight.w600),
                                                                                alignLabelWithHint: false,
                                                                                contentPadding: new EdgeInsets.symmetric(vertical: 10.0, horizontal: 10),
                                                                                errorStyle: TextStyle(color: Color.fromRGBO(240, 20, 41, 1)),
                                                                                focusColor: Color.fromRGBO(88, 165, 196, 1),
                                                                                focusedBorder: OutlineInputBorder(
                                                                                  borderRadius: BorderRadius.circular(10),
                                                                                  borderSide: BorderSide(color: Color.fromRGBO(245, 245, 245, 1)),
                                                                                ),
                                                                                enabledBorder: OutlineInputBorder(
                                                                                  borderRadius: BorderRadius.circular(10),
                                                                                  borderSide: BorderSide(
                                                                                    color: Color.fromRGBO(245, 245, 245, 1),
                                                                                  ),
                                                                                ),
                                                                              ),
                                                                              style: TextStyle(fontSize: 12, color: Color.fromRGBO(88, 165, 196, 1), fontWeight: FontWeight.w500),
                                                                              suggestionPosition: SuggestionPosition.Bottom,
                                                                              onMarkupChanged: (val) {
                                                                                setState(() {
                                                                                  markuptext = val;
                                                                                });
                                                                              },
                                                                              onEditingComplete: () {
                                                                                setState(() {});
                                                                              },
                                                                              onSuggestionVisibleChanged: (val) {
                                                                                setState(() {
                                                                                  _showList = val;
                                                                                });
                                                                              },
                                                                              onChanged: (val) {
                                                                                setState(() {
                                                                                  members = val;
                                                                                });
                                                                                print(members);
                                                                              },
                                                                              onSearchChanged: (
                                                                                trigger,
                                                                                value,
                                                                              ) {
                                                                                print('again | $trigger | $value ');
                                                                              },
                                                                              hideSuggestionList: false,
                                                                              minLines: 1,
                                                                              maxLines: 5,
                                                                              mentions: [
                                                                                Mention(
                                                                                    trigger: r'@',
                                                                                    style: TextStyle(
                                                                                      color: Color.fromRGBO(88, 165, 196, 1),
                                                                                    ),
                                                                                    matchAll: false,
                                                                                    data: _users,
                                                                                    suggestionBuilder: (data) {
                                                                                      return Container(
                                                                                        decoration: BoxDecoration(color: Colors.white, border: Border(top: BorderSide(color: Color(0xFFE0E1E4)))),
                                                                                        padding: EdgeInsets.all(10.0),
                                                                                        child: Row(
                                                                                          mainAxisAlignment: MainAxisAlignment.start,
                                                                                          children: <Widget>[
                                                                                            CircleAvatar(
                                                                                              backgroundImage: NetworkImage(
                                                                                                data['photo'],
                                                                                              ),
                                                                                            ),
                                                                                            SizedBox(
                                                                                              width: 20.0,
                                                                                            ),
                                                                                            Column(
                                                                                              mainAxisAlignment: MainAxisAlignment.start,
                                                                                              crossAxisAlignment: CrossAxisAlignment.start,
                                                                                              children: <Widget>[
                                                                                                Row(
                                                                                                  mainAxisAlignment: MainAxisAlignment.start,
                                                                                                  children: [
                                                                                                    Text(data['display']),
                                                                                                  ],
                                                                                                ),
                                                                                                SizedBox(
                                                                                                  height: 3,
                                                                                                ),
                                                                                                Row(
                                                                                                  mainAxisAlignment: MainAxisAlignment.start,
                                                                                                  children: [
                                                                                                    Text(
                                                                                                      '${data['full_name']}',
                                                                                                      style: TextStyle(
                                                                                                        color: Color(0xFFAAABAD),
                                                                                                        fontSize: 11,
                                                                                                      ),
                                                                                                    ),
                                                                                                  ],
                                                                                                ),
                                                                                              ],
                                                                                            )
                                                                                          ],
                                                                                        ),
                                                                                      );
                                                                                    }),
                                                                              ],
                                                                            ),
                                                                          ),
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                        height:
                                                                            30,
                                                                      ),
                                                                    ]),
                                                              )
                                                            ]),
                                                      )),
                                                      Container(
                                                          height: 74,
                                                          width: 500,
                                                          color: Colors.white,
                                                          child: ListView(
                                                              scrollDirection:
                                                                  Axis.horizontal,
                                                              children: [
                                                                Row(
                                                                    mainAxisAlignment:
                                                                        MainAxisAlignment
                                                                            .spaceBetween,
                                                                    children: [
                                                                      Container(
                                                                          padding: EdgeInsets.only(
                                                                              top: 5,
                                                                              bottom: 8,
                                                                              left: 8,
                                                                              right: 8),
                                                                          child: Row(mainAxisAlignment: MainAxisAlignment.spaceEvenly, children: [
                                                                            Text("Themes : ",
                                                                                style: TextStyle(color: Colors.black54, fontSize: 12, fontWeight: FontWeight.w500)),
                                                                            SizedBox(width: 5),
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    themeflagBusiness = true;
                                                                                    themepath = "assets/ideas1.png";
                                                                                  });
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage("assets/ideas1.png"))),
                                                                            SizedBox(width: 8),
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    themeflagBusiness = true;
                                                                                    themepath = "assets/ideas2.jpg";
                                                                                  });
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage("assets/ideas2.jpg"))),
                                                                            SizedBox(width: 8),
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    themeflagBusiness = true;
                                                                                    themepath = "assets/ideas3.png";
                                                                                  });
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage("assets/ideas3.png"))),
                                                                            SizedBox(width: 8),
                                                                            InkWell(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    themeflagBusiness = true;
                                                                                    themepath = "assets/ideas4.png";
                                                                                  });
                                                                                },
                                                                                child: CircleAvatar(backgroundImage: AssetImage("assets/ideas4.png")))
                                                                          ]))
                                                                    ])
                                                              ])),
                                                    ])
                                                  : processStepSM ==
                                                          "projectdiscuss"
                                                      ? Form(
                                                          key: _formKey,
                                                          child: Column(
                                                              crossAxisAlignment:
                                                                  CrossAxisAlignment
                                                                      .stretch,
                                                              children: [
                                                                Expanded(
                                                                    child: ListView(
                                                                        physics:
                                                                            BouncingScrollPhysics(),
                                                                        children: [
                                                                      SizedBox(
                                                                        height:
                                                                            10,
                                                                      ),
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.spaceBetween,
                                                                        children: [
                                                                          IconButton(
                                                                            onPressed:
                                                                                () {
                                                                              setState(() {
                                                                                processStepSM = "";
                                                                                ocruploaded1 = false;
                                                                                ocruploaded2 = false;
                                                                                ocruploaded3 = false;
                                                                                ocruploaded4 = false;
                                                                                ocruploaded5 = false;
                                                                                ocruploaded6 = false;
                                                                                ocruploaded7 = false;
                                                                                ocruploaded8 = false;
                                                                                latex1 = "";
                                                                                latex2 = "";
                                                                                latex3 = "";
                                                                                latex4 = "";
                                                                                latex5 = "";
                                                                                latex6 = "";
                                                                                latex7 = "";
                                                                                latex8 = "";
                                                                                latexStep = 0;

                                                                                procedure = "";
                                                                                taggedString = "";
                                                                                requirement = "";
                                                                                purchasedfrom = "";
                                                                                theory = "";
                                                                                findings = "";
                                                                                similartheory = "";
                                                                                videoUploaded1 = false;
                                                                                videoUploaded2 = false;
                                                                                video1URL = "";
                                                                                video2URL = "";
                                                                                selectedUserID = [];
                                                                              });
                                                                            },
                                                                            icon:
                                                                                Tab(child: Icon(Icons.cancel, color: Colors.black45, size: 20)),
                                                                          ),
                                                                          Text(
                                                                            'Create',
                                                                            style:
                                                                                TextStyle(
                                                                              fontFamily: 'Nunito Sans',
                                                                              fontSize: 17,
                                                                              color: Colors.black87,
                                                                              fontWeight: FontWeight.w600,
                                                                            ),
                                                                          ),
                                                                          InkWell(
                                                                            onTap:
                                                                                () async {
                                                                              if ((content != "") && (title != "")) {
                                                                                Dialogs.showLoadingDialog(context, _keyLoader);
                                                                                tagids.clear();
                                                                                print(markuptext);
                                                                                for (int l = 0; l < markuptext.length - 4; l++) {
                                                                                  int k = l;
                                                                                  if (markuptext.substring(k, k + 1) == "@") {
                                                                                    String test1 = markuptext.substring(k);
                                                                                    print("tagid ${test1.substring(4, test1.indexOf("__]"))}");
                                                                                    tagids.add(test1.substring(4, test1.indexOf("__]")));
                                                                                  }
                                                                                }
                                                                                comparedate = DateFormat('yyyyMMddkkmm').format(DateTime.now());
                                                                                String postID = "sm${_currentUserId}${comparedate}";
                                                                                String userTagID = "usrtgsm${_currentUserId}${comparedate}";
                                                                                bool isImagesPosted = false;
                                                                                bool isVideosPosted = false;
                                                                                bool isUserTaggedPosted = false;
                                                                                bool isFinalPostDone = false;
                                                                                bool ispostIDCreated = await networkCRUD.addsmPostDetails([
                                                                                  postID,
                                                                                  _currentUserId,
                                                                                  "projectdiscuss",
                                                                                  sharecomment,
                                                                                  comparedate
                                                                                ]);
                                                                                allPostData.insert(0, {
                                                                                  "first_name": userDataDB!.get("first_name"),
                                                                                  "last_name": userDataDB!.get("last_name"),
                                                                                  "profilepic": userDataDB!.get("profilepic"),
                                                                                  "school_name": userDataDB!.get("school_name"),
                                                                                  "post_id": postID,
                                                                                  "user_id": _currentUserId,
                                                                                  "post_type": "projectdiscuss",
                                                                                  "comment": sharecomment,
                                                                                  "compare_date": comparedate
                                                                                });
                                                                                allSocialPostLocalDB!.put("allpost", allPostData);
                                                                                if (ispostIDCreated == true) {
                                                                                  if (tagids.isNotEmpty) {
                                                                                    for (int i = 0; i < tagids.length; i++) {
                                                                                      isUserTaggedPosted = await networkCRUD.addsmPostUserTaggedDetails([
                                                                                        userTagID,
                                                                                        tagids[i]
                                                                                      ]);
                                                                                    }
                                                                                  }
                                                                                  List<dynamic> data = [
                                                                                    postID,
                                                                                    _currentUserId,
                                                                                    content,
                                                                                    themepathForProject,
                                                                                    title,
                                                                                    dropdownValueClass,
                                                                                    dropdownValueSubject,
                                                                                    topic,
                                                                                    (ocruploaded1 == false) ? requirement : latex1,
                                                                                    (ocruploaded2 == false) ? purchasedfrom : latex2,
                                                                                    (ocruploaded3 == false) ? procedure : latex3,
                                                                                    (ocruploaded4 == false) ? theory : latex4,
                                                                                    (ocruploaded5 == false) ? findings : latex5,
                                                                                    (ocruploaded6 == false) ? similartheory : latex6,
                                                                                    video1URL,
                                                                                    video2URL,
                                                                                    (ocruploaded7 == false) ? summary : latex7,
                                                                                    (ocruploaded8 == false) ? otherdocs : latex8,
                                                                                    tagids.isNotEmpty ? userTagID : "",
                                                                                    "hyspostprivacy01",
                                                                                    0,
                                                                                    0,
                                                                                    0,
                                                                                    0,
                                                                                    comparedate
                                                                                  ];
                                                                                  isFinalPostDone = await networkCRUD.addsmProjectDiscussPostDetails(data);
                                                                                  allProjectsPostData.insert(0, {
                                                                                    "first_name": userDataDB!.get("first_name"),
                                                                                    "last_name": userDataDB!.get("last_name"),
                                                                                    "profilepic": userDataDB!.get("profilepic"),
                                                                                    "school_name": userDataDB!.get("school_name"),
                                                                                    "post_id": data[0],
                                                                                    "user_id": data[1],
                                                                                    "content": data[2],
                                                                                    "theme": data[3],
                                                                                    "title": data[4],
                                                                                    "grade": data[5],
                                                                                    "subject": data[6],
                                                                                    "topic": data[7],
                                                                                    "requirements": data[8],
                                                                                    "purchasedfrom": data[9],
                                                                                    "procedure_": data[10],
                                                                                    "theory": data[11],
                                                                                    "findings": data[12],
                                                                                    "similartheory": data[13],
                                                                                    "projectvideourl": data[14],
                                                                                    "reqvideourl": data[15],
                                                                                    "summarydoc": data[16],
                                                                                    "otherdoc": data[17],
                                                                                    "memberlist_id": data[18],
                                                                                    "privacy": data[19],
                                                                                    "like_count": data[20],
                                                                                    "comment_count": data[21],
                                                                                    "view_count": data[22],
                                                                                    "impression_count": data[23],
                                                                                    "compare_date": data[24]
                                                                                  });
                                                                                  if (isFinalPostDone == true) {
                                                                                    allSocialPostLocalDB!.put("projectpost", allProjectsPostData);
                                                                                    for (int k = 0; k < selectedUserflag.length; k++) {
                                                                                      setState(() {
                                                                                        selectedUserflag[k] = false;
                                                                                      });
                                                                                    }
                                                                                    _call_apis();
                                                                                    ElegantNotification.success(
                                                                                      title: Text("Congrats,"),
                                                                                      description: Text("Your post created successfully."),
                                                                                    );
                                                                                  } else {
                                                                                    ElegantNotification.success(
                                                                                      title: Text("Error..."),
                                                                                      description: Text("Something wrong."),
                                                                                    );
                                                                                  }
                                                                                }
                                                                              }
                                                                              setState(() {
                                                                                ocruploaded1 = false;
                                                                                ocruploaded2 = false;
                                                                                ocruploaded3 = false;
                                                                                ocruploaded4 = false;
                                                                                ocruploaded5 = false;
                                                                                ocruploaded6 = false;
                                                                                ocruploaded7 = false;
                                                                                ocruploaded8 = false;
                                                                                latex1 = "";
                                                                                latex2 = "";
                                                                                latex3 = "";
                                                                                latex4 = "";
                                                                                latex5 = "";
                                                                                latex6 = "";
                                                                                latex7 = "";
                                                                                latex8 = "";
                                                                                latexStep = 0;

                                                                                procedure = "";
                                                                                taggedString = "";
                                                                                requirement = "";
                                                                                purchasedfrom = "";
                                                                                theory = "";
                                                                                findings = "";
                                                                                similartheory = "";
                                                                                videoUploaded1 = false;
                                                                                videoUploaded2 = false;
                                                                                video1URL = "";
                                                                                video2URL = "";
                                                                                selectedUserID = [];
                                                                              });
                                                                              Navigator.of(_keyLoader.currentContext!, rootNavigator: true).pop();

                                                                              Navigator.of(context).pop();
                                                                            },
                                                                            child:
                                                                                Container(
                                                                              margin: EdgeInsets.only(right: 10),
                                                                              padding: EdgeInsets.only(left: 8, right: 8, top: 5, bottom: 5),
                                                                              decoration: BoxDecoration(color: Color.fromRGBO(88, 165, 196, 1), borderRadius: BorderRadius.circular(3)),
                                                                              child: Text(
                                                                                'Post',
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 17,
                                                                                  color: Colors.white,
                                                                                  fontWeight: FontWeight.w500,
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          )
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                        height:
                                                                            20,
                                                                      ),
                                                                      Container(
                                                                        padding: const EdgeInsets.only(
                                                                            left:
                                                                                (10.0),
                                                                            right:
                                                                                10,
                                                                            top:
                                                                                10,
                                                                            bottom:
                                                                                10),
                                                                        margin:
                                                                            EdgeInsets.all(5),
                                                                        decoration: BoxDecoration(
                                                                            color: Color.fromRGBO(
                                                                                242,
                                                                                246,
                                                                                248,
                                                                                1),
                                                                            borderRadius:
                                                                                BorderRadius.all(Radius.circular(20))),
                                                                        child: Column(
                                                                            children: [
                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.spaceBetween,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Row(
                                                                                      crossAxisAlignment: CrossAxisAlignment.start,
                                                                                      children: [
                                                                                        InkWell(
                                                                                          child: CircleAvatar(
                                                                                            child: ClipOval(
                                                                                              child: Container(
                                                                                                child: CachedNetworkImage(
                                                                                                  imageUrl: userDataDB!.get("profilepic"),
                                                                                                  width: 40,
                                                                                                  height: 40,
                                                                                                  fit: BoxFit.cover,
                                                                                                  placeholder: (context, url) => Container(
                                                                                                      width: 40,
                                                                                                      height: 40,
                                                                                                      color: Colors.white,
                                                                                                      child: Image.network(
                                                                                                        "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                                                                                      )),
                                                                                                  errorWidget: (context, url, error) => Icon(Icons.error),
                                                                                                ),
                                                                                              ),
                                                                                            ),
                                                                                          ),
                                                                                        ),
                                                                                        SizedBox(
                                                                                          width: 10,
                                                                                        ),
                                                                                        Container(
                                                                                          child: Column(
                                                                                            crossAxisAlignment: CrossAxisAlignment.start,
                                                                                            children: [
                                                                                              Row(children: [
                                                                                                Text(userDataDB!.get("first_name") + ' ' + userDataDB!.get("first_name"),
                                                                                                    style: TextStyle(
                                                                                                      fontFamily: 'Nunito Sans',
                                                                                                      fontSize: 15,
                                                                                                      color: Colors.black87,
                                                                                                      fontWeight: FontWeight.w500,
                                                                                                    )),
                                                                                                Text(' has Discussed a Project '),
                                                                                              ]),
                                                                                              InkWell(
                                                                                                onTap: () {},
                                                                                                child: Container(
                                                                                                  decoration: BoxDecoration(border: Border.all(color: Color.fromRGBO(88, 165, 196, 1)), borderRadius: BorderRadius.circular(3)),
                                                                                                  margin: EdgeInsets.all(3),
                                                                                                  padding: EdgeInsets.all(4),
                                                                                                  child: Center(
                                                                                                    child: Row(
                                                                                                      children: [
                                                                                                        Icon(
                                                                                                          Icons.group,
                                                                                                          color: Colors.black87,
                                                                                                          size: 11,
                                                                                                        ),
                                                                                                        Text(
                                                                                                          ' Friends ',
                                                                                                          style: TextStyle(
                                                                                                            fontFamily: 'Nunito Sans',
                                                                                                            fontSize: 12,
                                                                                                            color: Colors.black87,
                                                                                                            fontWeight: FontWeight.w500,
                                                                                                          ),
                                                                                                        ),
                                                                                                        Icon(
                                                                                                          Icons.arrow_downward,
                                                                                                          color: Colors.black87,
                                                                                                          size: 11,
                                                                                                        ),
                                                                                                      ],
                                                                                                    ),
                                                                                                  ),
                                                                                                ),
                                                                                              ),
                                                                                            ],
                                                                                          ),
                                                                                        ),
                                                                                      ],
                                                                                    ),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 20),
                                                                              Column(
                                                                                crossAxisAlignment: CrossAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    width: 450,
                                                                                    child: TextField(
                                                                                      onChanged: (val) {
                                                                                        setState(() {
                                                                                          content = val;
                                                                                        });
                                                                                      },
                                                                                      minLines: 2,
                                                                                      maxLines: 15,
                                                                                      keyboardType: TextInputType.multiline,
                                                                                      cursorColor: Color.fromRGBO(88, 165, 196, 1),
                                                                                      style: TextStyle(fontSize: 15, color: Colors.black87, fontWeight: FontWeight.w400),
                                                                                      decoration: InputDecoration(
                                                                                          border: InputBorder.none,
                                                                                          focusedBorder: InputBorder.none,
                                                                                          enabledBorder: InputBorder.none,
                                                                                          errorBorder: InputBorder.none,
                                                                                          disabledBorder: InputBorder.none,
                                                                                          hintText: 'Write about your project...',
                                                                                          hintStyle: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 16,
                                                                                            color: Colors.black26,
                                                                                            fontWeight: FontWeight.w800,
                                                                                          )),
                                                                                    ),
                                                                                  ),
                                                                                  SizedBox(
                                                                                    height: 20,
                                                                                  ),
                                                                                ],
                                                                              )
                                                                            ]),
                                                                      ),
                                                                      SizedBox(
                                                                        height:
                                                                            10,
                                                                      ),
                                                                      Padding(
                                                                          padding:
                                                                              const EdgeInsets.only(left: 25),
                                                                          child: Text('Fill Project Details.',
                                                                              style: TextStyle(
                                                                                fontFamily: 'Nunito Sans',
                                                                                fontSize: 15,
                                                                                color: Color.fromRGBO(78, 160, 193, 2),
                                                                                fontWeight: FontWeight.w500,
                                                                              ))),
                                                                      SizedBox(
                                                                        height:
                                                                            12,
                                                                      ),
                                                                      Padding(
                                                                        padding:
                                                                            const EdgeInsets.only(left: 25),
                                                                        child: Container(
                                                                            child: Row(mainAxisAlignment: MainAxisAlignment.start, children: [
                                                                          (themeflagForProject == true)
                                                                              ? Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
                                                                                  Text('Selected Theme',
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        color: Colors.black87,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      )),
                                                                                  SizedBox(
                                                                                    height: 6,
                                                                                  ),
                                                                                  Stack(children: [
                                                                                    Container(width: 300, height: 100, decoration: BoxDecoration(image: DecorationImage(fit: BoxFit.fill, image: AssetImage(themepathForProject)))),
                                                                                    IconButton(
                                                                                      icon: Icon(Icons.cancel, color: Colors.black),
                                                                                      onPressed: () {
                                                                                        setState(() {
                                                                                          themeflagForProject = false;
                                                                                          themepathForProject = "";
                                                                                        });
                                                                                      },
                                                                                    )
                                                                                  ])
                                                                                ])
                                                                              : SizedBox(
                                                                                  height: 1,
                                                                                ),
                                                                        ])),
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              20),
                                                                      Padding(
                                                                        padding: const EdgeInsets.only(
                                                                            left:
                                                                                25.0,
                                                                            right:
                                                                                25,
                                                                            bottom:
                                                                                10),
                                                                        child: Column(
                                                                            children: [
                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Text('Project Title',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 12),
                                                                              Container(
                                                                                  width: 400,
                                                                                  decoration: BoxDecoration(
                                                                                    border: Border.all(color: Colors.black26),
                                                                                    borderRadius: BorderRadius.circular(10),
                                                                                  ),
                                                                                  child: Padding(
                                                                                      padding: const EdgeInsets.all(5.0),
                                                                                      child: TextFormField(
                                                                                        maxLines: 2,
                                                                                        style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                        decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Enter Your Project title", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                        validator: (value) {
                                                                                          if (value!.isEmpty) {
                                                                                            return 'Please Enter Name.';
                                                                                          } else
                                                                                            return null;
                                                                                        },
                                                                                        onChanged: (value) {
                                                                                          setState(() {
                                                                                            title = value;
                                                                                          });
                                                                                        },
                                                                                      ))),
                                                                              SizedBox(
                                                                                height: 30,
                                                                              ),

                                                                              Row(mainAxisAlignment: MainAxisAlignment.spaceBetween, children: [
                                                                                Container(
                                                                                  child: Text('Class',
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        color: Colors.black87,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      )),
                                                                                ),
                                                                                SizedBox(width: 20),
                                                                                Container(
                                                                                    width: 60,
                                                                                    child: DropdownButton<String>(
                                                                                      value: dropdownValueClass,
                                                                                      icon: const Icon(Icons.expand_more),
                                                                                      iconSize: 24,
                                                                                      elevation: 16,
                                                                                      style: const TextStyle(color: Colors.black),
                                                                                      underline: Container(
                                                                                        height: 1,
                                                                                        color: Colors.black38,
                                                                                      ),
                                                                                      onChanged: (value) {
                                                                                        setState(() {
                                                                                          dropdownValueClass = value!;
                                                                                        });
                                                                                      },
                                                                                      items: <String>[
                                                                                        '5',
                                                                                        '6',
                                                                                        '7',
                                                                                        '8',
                                                                                        '9',
                                                                                        '10',
                                                                                        '11',
                                                                                        '12'
                                                                                      ].map<DropdownMenuItem<String>>((String value) {
                                                                                        return DropdownMenuItem<String>(
                                                                                          value: value,
                                                                                          child: Text(value),
                                                                                        );
                                                                                      }).toList(),
                                                                                    )),
                                                                              ]),

                                                                              // ]),
                                                                              SizedBox(height: 30),
                                                                              Row(mainAxisAlignment: MainAxisAlignment.spaceBetween, children: [
                                                                                Container(
                                                                                    child: Text('Subject',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        ))),
                                                                                SizedBox(width: 20),
                                                                                Container(
                                                                                    width: 120,
                                                                                    child: DropdownButton<String>(
                                                                                      value: dropdownValueSubject,
                                                                                      icon: const Icon(Icons.expand_more),
                                                                                      iconSize: 24,
                                                                                      elevation: 16,
                                                                                      style: const TextStyle(color: Colors.black),
                                                                                      underline: Container(
                                                                                        height: 1,
                                                                                        color: Colors.black38,
                                                                                      ),
                                                                                      onChanged: (value) {
                                                                                        setState(() {
                                                                                          dropdownValueSubject = value!;
                                                                                        });
                                                                                      },
                                                                                      items: <String>[
                                                                                        'Mathematics',
                                                                                        'Physics',
                                                                                        'Chemistry',
                                                                                        'English',
                                                                                        'Hindi',
                                                                                        'Moral Science',
                                                                                        'Social Studies'
                                                                                      ].map<DropdownMenuItem<String>>((String value) {
                                                                                        return DropdownMenuItem<String>(
                                                                                          value: value,
                                                                                          child: Text(value),
                                                                                        );
                                                                                      }).toList(),
                                                                                    )),
                                                                              ]),

                                                                              SizedBox(height: 30),
                                                                              Row(mainAxisAlignment: MainAxisAlignment.spaceBetween, children: [
                                                                                Container(
                                                                                    child: Text('Topic',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        ))),
                                                                                SizedBox(width: 20),
                                                                                Container(
                                                                                    width: 85,
                                                                                    child: DropdownButton<String>(
                                                                                      value: dropdownValueTopic,
                                                                                      icon: const Icon(Icons.expand_more),
                                                                                      iconSize: 24,
                                                                                      elevation: 16,
                                                                                      style: const TextStyle(color: Colors.black),
                                                                                      underline: Container(
                                                                                        height: 1,
                                                                                        color: Colors.black38,
                                                                                      ),
                                                                                      onChanged: (value) {
                                                                                        setState(() {
                                                                                          dropdownValueTopic = value!;
                                                                                          if (dropdownValueTopic == "Others") {
                                                                                            topicflag = true;
                                                                                          } else
                                                                                            topicflag = false;
                                                                                        });
                                                                                      },
                                                                                      items: <String>[
                                                                                        "None",
                                                                                        "Others"
                                                                                      ].map<DropdownMenuItem<String>>((String value) {
                                                                                        return DropdownMenuItem<String>(
                                                                                          value: value,
                                                                                          child: Text(value),
                                                                                        );
                                                                                      }).toList(),
                                                                                    )),
                                                                              ]),
                                                                              SizedBox(
                                                                                height: 20,
                                                                              ),
                                                                              (topicflag == true)
                                                                                  ? Container(
                                                                                      width: 400,
                                                                                      child: TextFormField(
                                                                                        decoration: InputDecoration(hintText: "Enter topic here", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500, color: Colors.black54)),
                                                                                        onChanged: (value) {
                                                                                          setState(() {
                                                                                            topic = value;
                                                                                          });
                                                                                        },
                                                                                      ))
                                                                                  : SizedBox(),
                                                                              SizedBox(height: 30),
                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                      child: Text('Team Members',
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 14,
                                                                                            color: Colors.black87,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          ))),
                                                                                ],
                                                                              ),
                                                                              SizedBox(
                                                                                width: 20,
                                                                              ),
                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    width: _width! > 600 ? 400 : _width! - 70,
                                                                                    height: 60,
                                                                                    padding: EdgeInsets.all(2),
                                                                                    child: FlutterMentions(
                                                                                      key: key,
                                                                                      keyboardType: TextInputType.text,
                                                                                      cursorColor: Color.fromRGBO(88, 165, 196, 1),
                                                                                      decoration: InputDecoration(
                                                                                        fillColor: Color.fromRGBO(245, 245, 245, 1),
                                                                                        filled: true,
                                                                                        counterText: '',
                                                                                        hintText: '@Tag someone here',
                                                                                        hintStyle: TextStyle(fontSize: 13, color: Colors.grey[400], fontWeight: FontWeight.w600),
                                                                                        alignLabelWithHint: false,
                                                                                        contentPadding: new EdgeInsets.symmetric(vertical: 10.0, horizontal: 10),
                                                                                        errorStyle: TextStyle(color: Color.fromRGBO(240, 20, 41, 1)),
                                                                                        focusColor: Color.fromRGBO(88, 165, 196, 1),
                                                                                        focusedBorder: OutlineInputBorder(
                                                                                          borderRadius: BorderRadius.circular(10),
                                                                                          borderSide: BorderSide(color: Color.fromRGBO(245, 245, 245, 1)),
                                                                                        ),
                                                                                        enabledBorder: OutlineInputBorder(
                                                                                          borderRadius: BorderRadius.circular(10),
                                                                                          borderSide: BorderSide(
                                                                                            color: Color.fromRGBO(245, 245, 245, 1),
                                                                                          ),
                                                                                        ),
                                                                                      ),
                                                                                      style: TextStyle(fontSize: 12, color: Color.fromRGBO(88, 165, 196, 1), fontWeight: FontWeight.w500),
                                                                                      suggestionPosition: SuggestionPosition.Bottom,
                                                                                      onMarkupChanged: (val) {
                                                                                        setState(() {
                                                                                          markuptext = val;
                                                                                        });
                                                                                      },
                                                                                      onEditingComplete: () {
                                                                                        setState(() {
                                                                                          tagids.clear();
                                                                                          for (int l = 0; l < markuptext.length; l++) {
                                                                                            int k = l;
                                                                                            if (markuptext.substring(k, k + 1) == "@") {
                                                                                              String test1 = markuptext.substring(k);
                                                                                              tagids.add(test1.substring(4, test1.indexOf("__]")));
                                                                                            }
                                                                                          }
                                                                                          print(tagids);
                                                                                        });
                                                                                      },
                                                                                      onSuggestionVisibleChanged: (val) {
                                                                                        setState(() {
                                                                                          _showList = val;
                                                                                        });
                                                                                      },
                                                                                      onChanged: (val) {},
                                                                                      onSearchChanged: (
                                                                                        trigger,
                                                                                        value,
                                                                                      ) {
                                                                                        print('again | $trigger | $value ');
                                                                                      },
                                                                                      hideSuggestionList: false,
                                                                                      minLines: 1,
                                                                                      maxLines: 5,
                                                                                      mentions: [
                                                                                        Mention(
                                                                                            trigger: r'@',
                                                                                            style: TextStyle(
                                                                                              color: Color.fromRGBO(88, 165, 196, 1),
                                                                                            ),
                                                                                            matchAll: false,
                                                                                            data: _users,
                                                                                            suggestionBuilder: (data) {
                                                                                              return Container(
                                                                                                decoration: BoxDecoration(color: Colors.white, border: Border(top: BorderSide(color: Color(0xFFE0E1E4)))),
                                                                                                padding: EdgeInsets.all(10.0),
                                                                                                child: Row(
                                                                                                  mainAxisAlignment: MainAxisAlignment.start,
                                                                                                  children: <Widget>[
                                                                                                    CircleAvatar(
                                                                                                      backgroundImage: NetworkImage(
                                                                                                        data['photo'],
                                                                                                      ),
                                                                                                    ),
                                                                                                    SizedBox(
                                                                                                      width: 20.0,
                                                                                                    ),
                                                                                                    Column(
                                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                                      crossAxisAlignment: CrossAxisAlignment.start,
                                                                                                      children: <Widget>[
                                                                                                        Row(
                                                                                                          mainAxisAlignment: MainAxisAlignment.start,
                                                                                                          children: [
                                                                                                            Text(data['display']),
                                                                                                          ],
                                                                                                        ),
                                                                                                        SizedBox(
                                                                                                          height: 3,
                                                                                                        ),
                                                                                                        Row(
                                                                                                          mainAxisAlignment: MainAxisAlignment.start,
                                                                                                          children: [
                                                                                                            Text(
                                                                                                              '${data['full_name']}',
                                                                                                              style: TextStyle(
                                                                                                                color: Color(0xFFAAABAD),
                                                                                                                fontSize: 11,
                                                                                                              ),
                                                                                                            ),
                                                                                                          ],
                                                                                                        ),
                                                                                                      ],
                                                                                                    )
                                                                                                  ],
                                                                                                ),
                                                                                              );
                                                                                            }),
                                                                                      ],
                                                                                    ),
                                                                                  ),
                                                                                ],
                                                                              ),

                                                                              SizedBox(height: 30),

                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Text("Material's Required",
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 12),
                                                                              ocruploaded1 == false
                                                                                  ? Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 120,
                                                                                            decoration: BoxDecoration(
                                                                                              border: Border.all(color: Colors.black26),
                                                                                              borderRadius: BorderRadius.circular(10),
                                                                                            ),
                                                                                            child: Padding(
                                                                                              padding: const EdgeInsets.all(5.0),
                                                                                              child: TextFormField(
                                                                                                maxLines: 7,
                                                                                                style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                                decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Enter text or scan", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                                keyboardType: TextInputType.multiline,
                                                                                                // validator: (value) {
                                                                                                //   if (value.isEmpty) {
                                                                                                //     return 'Please Enter Name.';
                                                                                                //   } else
                                                                                                //     return null;
                                                                                                // },
                                                                                                onTap: () async {
                                                                                                  setState(() {
                                                                                                    latexStep = 1;
                                                                                                  });

                                                                                                  // focusNode1.requestFocus();
                                                                                                },

                                                                                                onChanged: (value) {
                                                                                                  setState(() {
                                                                                                    requirement = value;
                                                                                                  });
                                                                                                },
                                                                                              ),
                                                                                            )),
                                                                                      ],
                                                                                    )
                                                                                  : Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 120,
                                                                                            child: ListView(children: [
                                                                                              TeXView(
                                                                                                child: TeXViewColumn(children: [
                                                                                                  TeXViewDocument(latex1,
                                                                                                      style: TeXViewStyle(
                                                                                                        fontStyle: TeXViewFontStyle(fontSize: 6, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                        padding: TeXViewPadding.all(10),
                                                                                                      )),
                                                                                                ]),
                                                                                                style: TeXViewStyle(
                                                                                                  elevation: 10,
                                                                                                  backgroundColor: Colors.white,
                                                                                                ),
                                                                                              )
                                                                                            ])),
                                                                                      ],
                                                                                    ),

                                                                              SizedBox(height: 30),

                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Text('Can be purchased from',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 12),
                                                                              ocruploaded2 == false
                                                                                  ? Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 100,
                                                                                            decoration: BoxDecoration(
                                                                                              border: Border.all(color: Colors.black26),
                                                                                              borderRadius: BorderRadius.circular(10),
                                                                                            ),
                                                                                            child: Padding(
                                                                                                padding: const EdgeInsets.all(5.0),
                                                                                                child: TextFormField(
                                                                                                  maxLines: 7,
                                                                                                  style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                                  decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Enter text or scan", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                                  keyboardType: TextInputType.multiline,
                                                                                                  onTap: () async {
                                                                                                    setState(() {
                                                                                                      latexStep = 2;
                                                                                                    });
                                                                                                  },
                                                                                                  onChanged: (value) {
                                                                                                    setState(() {
                                                                                                      purchasedfrom = value;
                                                                                                    });
                                                                                                  },
                                                                                                ))),
                                                                                      ],
                                                                                    )
                                                                                  : Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 100,
                                                                                            child: ListView(children: [
                                                                                              TeXView(
                                                                                                child: TeXViewColumn(children: [
                                                                                                  TeXViewDocument(latex2,
                                                                                                      style: TeXViewStyle(
                                                                                                        fontStyle: TeXViewFontStyle(fontSize: 6, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                        padding: TeXViewPadding.all(10),
                                                                                                      )),
                                                                                                ]),
                                                                                                style: TeXViewStyle(
                                                                                                  elevation: 10,
                                                                                                  backgroundColor: Colors.white,
                                                                                                ),
                                                                                              )
                                                                                            ])),
                                                                                      ],
                                                                                    ),

                                                                              SizedBox(height: 30),

                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Text('Procedure',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 12),
                                                                              ocruploaded3 == false
                                                                                  ? Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 120,
                                                                                            decoration: BoxDecoration(
                                                                                              border: Border.all(color: Colors.black26),
                                                                                              borderRadius: BorderRadius.circular(10),
                                                                                            ),
                                                                                            child: Padding(
                                                                                                padding: const EdgeInsets.all(5.0),
                                                                                                child: TextFormField(
                                                                                                  maxLines: 10,
                                                                                                  style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                                  keyboardType: TextInputType.multiline,
                                                                                                  decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Enter text or scan", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                                  // validator: (value) {
                                                                                                  //   if (value.isEmpty) {
                                                                                                  //     return 'Please Enter Name.';
                                                                                                  //   } else
                                                                                                  //     return null;
                                                                                                  // },
                                                                                                  onTap: () async {
                                                                                                    setState(() {
                                                                                                      latexStep = 3;
                                                                                                    });
                                                                                                  },
                                                                                                  onChanged: (value) {
                                                                                                    setState(() {
                                                                                                      procedure = value;
                                                                                                    });
                                                                                                  },
                                                                                                ))),
                                                                                      ],
                                                                                    )
                                                                                  : Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 120,
                                                                                            child: ListView(children: [
                                                                                              TeXView(
                                                                                                child: TeXViewColumn(children: [
                                                                                                  TeXViewDocument(latex3,
                                                                                                      style: TeXViewStyle(
                                                                                                        fontStyle: TeXViewFontStyle(fontSize: 6, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                        padding: TeXViewPadding.all(10),
                                                                                                      )),
                                                                                                ]),
                                                                                                style: TeXViewStyle(
                                                                                                  elevation: 10,
                                                                                                  backgroundColor: Colors.white,
                                                                                                ),
                                                                                              )
                                                                                            ])),
                                                                                      ],
                                                                                    ),

                                                                              SizedBox(height: 30),

                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Text('Theory',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 12),
                                                                              ocruploaded4 == false
                                                                                  ? Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 150,
                                                                                            decoration: BoxDecoration(
                                                                                              border: Border.all(color: Colors.black26),
                                                                                              borderRadius: BorderRadius.circular(10),
                                                                                            ),
                                                                                            child: Padding(
                                                                                                padding: const EdgeInsets.all(5.0),
                                                                                                child: TextFormField(
                                                                                                  maxLines: 10,
                                                                                                  style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                                  decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Enter text or scan", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                                  keyboardType: TextInputType.multiline,
                                                                                                  // validator: (value) {
                                                                                                  //   if (value.isEmpty) {
                                                                                                  //     return 'Please Enter Name.';
                                                                                                  //   } else
                                                                                                  //     return null;
                                                                                                  // },
                                                                                                  onTap: () async {
                                                                                                    setState(() {
                                                                                                      latexStep = 14;
                                                                                                    });
                                                                                                  },
                                                                                                  onChanged: (value) {
                                                                                                    setState(() {
                                                                                                      theory = value;
                                                                                                    });
                                                                                                  },
                                                                                                ))),
                                                                                      ],
                                                                                    )
                                                                                  : Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 150,
                                                                                            child: ListView(children: [
                                                                                              TeXView(
                                                                                                child: TeXViewColumn(children: [
                                                                                                  TeXViewDocument(latex4,
                                                                                                      style: TeXViewStyle(
                                                                                                        fontStyle: TeXViewFontStyle(fontSize: 6, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                        padding: TeXViewPadding.all(10),
                                                                                                      )),
                                                                                                ]),
                                                                                                style: TeXViewStyle(
                                                                                                  elevation: 10,
                                                                                                  backgroundColor: Colors.white,
                                                                                                ),
                                                                                              )
                                                                                            ])),
                                                                                      ],
                                                                                    ),

                                                                              SizedBox(height: 30),

                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Text('Findings',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 12),
                                                                              ocruploaded5 == false
                                                                                  ? Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 110,
                                                                                            decoration: BoxDecoration(
                                                                                              border: Border.all(color: Colors.black26),
                                                                                              borderRadius: BorderRadius.circular(10),
                                                                                            ),
                                                                                            child: Padding(
                                                                                                padding: const EdgeInsets.all(5.0),
                                                                                                child: TextFormField(
                                                                                                  maxLines: 7,
                                                                                                  style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                                  decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Enter text or scan", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                                  keyboardType: TextInputType.multiline,
                                                                                                  validator: (value) {
                                                                                                    if (value!.isEmpty) {
                                                                                                      return 'Please Enter Name.';
                                                                                                    } else
                                                                                                      return null;
                                                                                                  },
                                                                                                  onTap: () async {
                                                                                                    setState(() {
                                                                                                      latexStep = 5;
                                                                                                    });
                                                                                                  },
                                                                                                  onChanged: (value) {
                                                                                                    setState(() {
                                                                                                      findings = value;
                                                                                                    });
                                                                                                  },
                                                                                                ))),
                                                                                      ],
                                                                                    )
                                                                                  : Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 110,
                                                                                            child: ListView(children: [
                                                                                              TeXView(
                                                                                                child: TeXViewColumn(children: [
                                                                                                  TeXViewDocument(latex5,
                                                                                                      style: TeXViewStyle(
                                                                                                        fontStyle: TeXViewFontStyle(fontSize: 6, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                        padding: TeXViewPadding.all(10),
                                                                                                      )),
                                                                                                ]),
                                                                                                style: TeXViewStyle(
                                                                                                  elevation: 10,
                                                                                                  backgroundColor: Colors.white,
                                                                                                ),
                                                                                              )
                                                                                            ])),
                                                                                      ],
                                                                                    ),
                                                                              SizedBox(height: 30),

                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Text('Similar Projects',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 12),
                                                                              ocruploaded6 == false
                                                                                  ? Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 110,
                                                                                            decoration: BoxDecoration(
                                                                                              border: Border.all(color: Colors.black26),
                                                                                              borderRadius: BorderRadius.circular(10),
                                                                                            ),
                                                                                            child: Padding(
                                                                                                padding: const EdgeInsets.all(5.0),
                                                                                                child: TextFormField(
                                                                                                  maxLines: 7,
                                                                                                  style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                                  decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Enter text or scan", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                                  keyboardType: TextInputType.multiline,
                                                                                                  onTap: () async {
                                                                                                    setState(() {
                                                                                                      latexStep = 6;
                                                                                                    });
                                                                                                  },
                                                                                                  onChanged: (value) {
                                                                                                    setState(() {
                                                                                                      similartheory = value;
                                                                                                    });
                                                                                                  },
                                                                                                ))),
                                                                                      ],
                                                                                    )
                                                                                  : Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 110,
                                                                                            child: ListView(children: [
                                                                                              TeXView(
                                                                                                child: TeXViewColumn(children: [
                                                                                                  TeXViewDocument(latex6,
                                                                                                      style: TeXViewStyle(
                                                                                                        fontStyle: TeXViewFontStyle(fontSize: 6, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                        padding: TeXViewPadding.all(10),
                                                                                                      )),
                                                                                                ]),
                                                                                                style: TeXViewStyle(
                                                                                                  elevation: 10,
                                                                                                  backgroundColor: Colors.white,
                                                                                                ),
                                                                                              )
                                                                                            ])),
                                                                                      ],
                                                                                    ),

                                                                              SizedBox(height: 30),

                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Text('Upload Video of the project',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 12),
                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  videoUploaded1 == false
                                                                                      ? Container(
                                                                                          width: _width! > 600 ? 400 : _width! - 70,
                                                                                          child: TextFormField(
                                                                                            decoration: InputDecoration(hintText: "Click here to upload", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                            readOnly: true,
                                                                                            onTap: () async {
                                                                                              _pickVideo(context, 1);
                                                                                            },
                                                                                          ))
                                                                                      : Row(
                                                                                          mainAxisAlignment: MainAxisAlignment.start,
                                                                                          children: [
                                                                                            InkWell(
                                                                                              onTap: () {
                                                                                                _launchInBrowser(video1URL);
                                                                                              },
                                                                                              child: Container(
                                                                                                  height: 200,
                                                                                                  width: 400,
                                                                                                  child: Stack(children: [
                                                                                                    Container(
                                                                                                      color: Colors.grey[500],
                                                                                                      height: 200,
                                                                                                      width: 400,
                                                                                                    ),
                                                                                                    Center(
                                                                                                      child: Icon(Icons.play_circle_outline, color: Colors.white),
                                                                                                    )
                                                                                                  ])),
                                                                                            ),
                                                                                          ],
                                                                                        )
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 30),
                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Text('Video of assembly of parts',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 12),
                                                                              videoUploaded2 == false
                                                                                  ? Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            child: TextFormField(
                                                                                              decoration: InputDecoration(hintText: "Click here to upload", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                              readOnly: true,
                                                                                              onTap: () async {
                                                                                                _pickVideo(context, 2);
                                                                                              },
                                                                                            ))
                                                                                      ],
                                                                                    )
                                                                                  : Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        InkWell(
                                                                                          onTap: () {
                                                                                            _launchInBrowser(video2URL);
                                                                                          },
                                                                                          child: Container(
                                                                                              height: 200,
                                                                                              width: _width! > 600 ? 400 : _width! - 70,
                                                                                              child: Stack(children: [
                                                                                                Container(
                                                                                                  color: Colors.grey[500],
                                                                                                  height: 200,
                                                                                                  width: _width! > 600 ? 400 : _width! - 70,
                                                                                                ),
                                                                                                Center(
                                                                                                  child: Icon(Icons.play_circle_outline, color: Colors.white),
                                                                                                )
                                                                                              ])),
                                                                                        ),
                                                                                      ],
                                                                                    ),
                                                                              SizedBox(height: 30),

                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                    child: Text('Briefs and insights',
                                                                                        style: TextStyle(
                                                                                          fontFamily: 'Nunito Sans',
                                                                                          fontSize: 14,
                                                                                          color: Colors.black87,
                                                                                          fontWeight: FontWeight.w500,
                                                                                        )),
                                                                                  ),
                                                                                ],
                                                                              ),
                                                                              SizedBox(height: 12),
                                                                              ocruploaded7 == false
                                                                                  ? Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 110,
                                                                                            decoration: BoxDecoration(
                                                                                              border: Border.all(color: Colors.black26),
                                                                                              borderRadius: BorderRadius.circular(10),
                                                                                            ),
                                                                                            child: Padding(
                                                                                                padding: const EdgeInsets.all(5.0),
                                                                                                child: TextFormField(
                                                                                                  maxLines: 5,
                                                                                                  style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                                  decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Enter text or scan", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                                  keyboardType: TextInputType.multiline,
                                                                                                  onTap: () async {
                                                                                                    setState(() {
                                                                                                      latexStep = 7;
                                                                                                    });
                                                                                                  },
                                                                                                  onChanged: (value) {
                                                                                                    setState(() {});
                                                                                                  },
                                                                                                ))),
                                                                                      ],
                                                                                    )
                                                                                  : Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 110,
                                                                                            child: ListView(children: [
                                                                                              TeXView(
                                                                                                child: TeXViewColumn(children: [
                                                                                                  TeXViewDocument(latex7,
                                                                                                      style: TeXViewStyle(
                                                                                                        fontStyle: TeXViewFontStyle(fontSize: 6, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                        padding: TeXViewPadding.all(10),
                                                                                                      )),
                                                                                                ]),
                                                                                                style: TeXViewStyle(
                                                                                                  elevation: 10,
                                                                                                  backgroundColor: Colors.white,
                                                                                                ),
                                                                                              )
                                                                                            ])),
                                                                                      ],
                                                                                    ),

                                                                              SizedBox(height: 30),

                                                                              Row(
                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                children: [
                                                                                  Container(
                                                                                      child: Text("References",
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 14,
                                                                                            color: Colors.black87,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          ))),
                                                                                ],
                                                                              ),
                                                                              SizedBox(
                                                                                height: 12,
                                                                              ),
                                                                              ocruploaded8 == false
                                                                                  ? Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            decoration: BoxDecoration(
                                                                                              border: Border.all(color: Colors.black26),
                                                                                              borderRadius: BorderRadius.circular(10),
                                                                                            ),
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 110,
                                                                                            child: Padding(
                                                                                                padding: const EdgeInsets.all(5.0),
                                                                                                child: TextFormField(
                                                                                                    style: TextStyle(fontSize: 12, fontWeight: FontWeight.w400),
                                                                                                    keyboardType: TextInputType.multiline,
                                                                                                    maxLines: 4,
                                                                                                    decoration: InputDecoration(border: InputBorder.none, focusedBorder: InputBorder.none, enabledBorder: InputBorder.none, errorBorder: InputBorder.none, disabledBorder: InputBorder.none, hintText: "Enter text or scan", hintStyle: TextStyle(fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                                    onTap: () async {
                                                                                                      setState(() {
                                                                                                        latexStep = 8;
                                                                                                      });
                                                                                                    }))),
                                                                                      ],
                                                                                    )
                                                                                  : Row(
                                                                                      mainAxisAlignment: MainAxisAlignment.start,
                                                                                      children: [
                                                                                        Container(
                                                                                            width: _width! > 600 ? 400 : _width! - 70,
                                                                                            height: 110,
                                                                                            child: ListView(children: [
                                                                                              TeXView(
                                                                                                child: TeXViewColumn(children: [
                                                                                                  TeXViewDocument(latex8,
                                                                                                      style: TeXViewStyle(
                                                                                                        fontStyle: TeXViewFontStyle(fontSize: 6, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                        padding: TeXViewPadding.all(10),
                                                                                                      )),
                                                                                                ]),
                                                                                                style: TeXViewStyle(
                                                                                                  elevation: 10,
                                                                                                  backgroundColor: Colors.white,
                                                                                                ),
                                                                                              )
                                                                                            ])),
                                                                                      ],
                                                                                    ),
                                                                              SizedBox(height: 30),
                                                                            ]),
                                                                      ),
                                                                    ])),
                                                                Container(
                                                                    height: 80,
                                                                    width: _width! >
                                                                            600
                                                                        ? 450
                                                                        : _width! -
                                                                            70,
                                                                    color: Colors
                                                                        .white,
                                                                    child: Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.spaceBetween,
                                                                        children: [
                                                                          Container(
                                                                              padding: EdgeInsets.only(top: 5, bottom: 8, left: 8, right: 8),
                                                                              child: Row(mainAxisAlignment: MainAxisAlignment.spaceEvenly, children: [
                                                                                InkWell(
                                                                                    onTap: () {
                                                                                      _OCRConversion(context, latexStep);
                                                                                    },
                                                                                    child: Column(
                                                                                      children: [
                                                                                        Container(height: 50, width: 50, child: Image(image: AssetImage("assets/ocr1.gif"))),
                                                                                        SizedBox(height: 0.5),
                                                                                        Text("Upload OCR", style: TextStyle(fontSize: 8, fontWeight: FontWeight.w500))
                                                                                      ],
                                                                                    )),
                                                                                SizedBox(width: 10),
                                                                                Text("Themes : ", style: TextStyle(color: Colors.black54, fontSize: 12, fontWeight: FontWeight.w500)),
                                                                                SizedBox(width: 5),
                                                                                InkWell(
                                                                                    onTap: () {
                                                                                      setState(() {
                                                                                        themeflagForProject = true;
                                                                                        themepathForProject = "assets/projectbackg1.png";
                                                                                      });
                                                                                    },
                                                                                    child: CircleAvatar(backgroundImage: AssetImage("assets/projectbackg1.png"))),
                                                                                SizedBox(width: 8),
                                                                                InkWell(
                                                                                    onTap: () {
                                                                                      setState(() {
                                                                                        themeflagForProject = true;
                                                                                        themepathForProject = "assets/projectbackg2.png";
                                                                                      });
                                                                                    },
                                                                                    child: CircleAvatar(backgroundImage: AssetImage("assets/projectbackg2.png"))),
                                                                                SizedBox(width: 8),
                                                                                InkWell(
                                                                                    onTap: () {
                                                                                      setState(() {
                                                                                        themeflagForProject = true;
                                                                                        themepathForProject = "assets/projectbackg3.png";
                                                                                      });
                                                                                    },
                                                                                    child: CircleAvatar(backgroundImage: AssetImage("assets/projectbackg3.png"))),
                                                                                SizedBox(width: 8),
                                                                                InkWell(
                                                                                    onTap: () {
                                                                                      setState(() {
                                                                                        themeflagForProject = true;
                                                                                        themepathForProject = "assets/projectbackg4.png";
                                                                                      });
                                                                                    },
                                                                                    child: CircleAvatar(backgroundImage: AssetImage("assets/projectbackg4.png")))
                                                                              ]))
                                                                        ])),
                                                                // (filekeyboard == true)
                                                                //     ? Container(
                                                                //         height: 74,
                                                                //         width: 450,
                                                                //         color: Colors.white,
                                                                //         child: ListView(scrollDirection: Axis.horizontal, children: [
                                                                //           Row(
                                                                //               mainAxisAlignment: MainAxisAlignment.spaceBetween,
                                                                //               children: [
                                                                //                 Container(
                                                                //                     padding: EdgeInsets.only(
                                                                //                         top: 5, bottom: 8, left: 8, right: 8),
                                                                //                     child: Row(
                                                                //                         mainAxisAlignment:
                                                                //                             MainAxisAlignment.spaceEvenly,
                                                                //                         children: [
                                                                //                           InkWell(
                                                                //                               onTap: () {
                                                                //                                 latexStep
                                                                //                               },
                                                                //                               child: Column(
                                                                //                                 children: [
                                                                //                                   Container(
                                                                //                                       height: 50,
                                                                //                                       width: 50,
                                                                //                                       child: Image(
                                                                //                                           image: AssetImage(
                                                                //                                               "assets/ocr1.gif"))),
                                                                //                                   SizedBox(height: 0.5),
                                                                //                                   Text("Upload OCR",
                                                                //                                       style: TextStyle(
                                                                //                                           fontSize: 8,
                                                                //                                           fontWeight:
                                                                //                                               FontWeight.w500))
                                                                //                                 ],
                                                                //                               )),
                                                                //                           SizedBox(width: 10),
                                                                //                           Column(children: [
                                                                //                             InkWell(
                                                                //                               onTap: () {},
                                                                //                               child: Material(
                                                                //                                 elevation: 1,
                                                                //                                 borderRadius:
                                                                //                                     BorderRadius.circular(5),
                                                                //                                 child: Container(
                                                                //                                     height: 40,
                                                                //                                     width: 40,
                                                                //                                     padding: EdgeInsets.all(4),
                                                                //                                     decoration: BoxDecoration(
                                                                //                                       borderRadius:
                                                                //                                           BorderRadius.circular(5),
                                                                //                                       // color: Color(0xFFE9A81D)
                                                                //                                     ),
                                                                //                                     child: Center(
                                                                //                                         child: Icon(
                                                                //                                             Icons.picture_as_pdf,
                                                                //                                             color: Colors.red,
                                                                //                                             size: 20))),
                                                                //                               ),
                                                                //                             )
                                                                //                           ]),
                                                                //                           SizedBox(width: 10),
                                                                //                           Text("Themes : ",
                                                                //                               style: TextStyle(
                                                                //                                   color: Colors.black54,
                                                                //                                   fontSize: 12,
                                                                //                                   fontWeight: FontWeight.w500)),
                                                                //                           SizedBox(width: 5),
                                                                //                           InkWell(
                                                                //                               onTap: () {
                                                                //                                 setState(() {
                                                                //                                   themeflag = true;
                                                                //                                   themepath =
                                                                //                                       "assets/projectbackg1.png";
                                                                //                                 });
                                                                //                               },
                                                                //                               child: CircleAvatar(
                                                                //                                   backgroundImage: AssetImage(
                                                                //                                       "assets/projectbackg1.png"))),
                                                                //                           SizedBox(width: 8),
                                                                //                           InkWell(
                                                                //                               onTap: () {
                                                                //                                 setState(() {
                                                                //                                   themeflag = true;
                                                                //                                   themepath =
                                                                //                                       "assets/projectbackg2.png";
                                                                //                                 });
                                                                //                               },
                                                                //                               child: CircleAvatar(
                                                                //                                   backgroundImage: AssetImage(
                                                                //                                       "assets/projectbackg2.png"))),
                                                                //                           SizedBox(width: 8),
                                                                //                           InkWell(
                                                                //                               onTap: () {
                                                                //                                 setState(() {
                                                                //                                   themeflag = true;
                                                                //                                   themepath =
                                                                //                                       "assets/projectbackg3.png";
                                                                //                                 });
                                                                //                               },
                                                                //                               child: CircleAvatar(
                                                                //                                   backgroundImage: AssetImage(
                                                                //                                       "assets/projectbackg3.png"))),
                                                                //                           SizedBox(width: 8),
                                                                //                           InkWell(
                                                                //                               onTap: () {
                                                                //                                 setState(() {
                                                                //                                   themeflag = true;
                                                                //                                   themepath =
                                                                //                                       "assets/projectbackg4.png";
                                                                //                                 });
                                                                //                               },
                                                                //                               child: CircleAvatar(
                                                                //                                   backgroundImage: AssetImage(
                                                                //                                       "assets/projectbackg4.png")))
                                                                //                         ]))
                                                                //               ])
                                                                //         ]))
                                                                //     : SizedBox(),
                                                              ]))
                                                      : processStepSM ==
                                                              "upload1"
                                                          ? ListView(
                                                              shrinkWrap: true,
                                                              children: [
                                                                  Row(
                                                                    mainAxisAlignment:
                                                                        MainAxisAlignment
                                                                            .spaceBetween,
                                                                    children: [
                                                                      IconButton(
                                                                        onPressed:
                                                                            () {
                                                                          setState(
                                                                              () {
                                                                            processStepSM =
                                                                                "";
                                                                            post =
                                                                                "";
                                                                          });
                                                                        },
                                                                        icon: Tab(
                                                                            child: Icon(Icons.cancel,
                                                                                color: Colors.black45,
                                                                                size: 20)),
                                                                      ),
                                                                      Text(
                                                                        'Uploads',
                                                                        style:
                                                                            TextStyle(
                                                                          fontFamily:
                                                                              'Nunito Sans',
                                                                          fontSize:
                                                                              17,
                                                                          color:
                                                                              Colors.black87,
                                                                          fontWeight:
                                                                              FontWeight.w600,
                                                                        ),
                                                                      ),
                                                                      InkWell(
                                                                        onTap:
                                                                            () async {
                                                                          if (uploadFilesURLList
                                                                              .isNotEmpty) {
                                                                            Dialogs.showLoadingDialog(context,
                                                                                _keyLoader);
                                                                            String uploadID = "upd" +
                                                                                _currentUserId +
                                                                                comparedate;
                                                                            bool
                                                                                isPostDone =
                                                                                false;

                                                                            isPostDone =
                                                                                await networkCRUD.addsmUploadsDetails([
                                                                              uploadID,
                                                                              upload_type,
                                                                              _currentUserId,
                                                                              schoolname,
                                                                              examname,
                                                                              dropdownValueGrade,
                                                                              dropdownValueSubjectForUploads,
                                                                              chapter,
                                                                              topicUploads,
                                                                              term,
                                                                              year,
                                                                              tags,
                                                                              description,
                                                                              comparedate
                                                                            ]);
                                                                            if (isPostDone) {
                                                                              for (int j = 0; j < uploadFilesNameList.length; j++) {
                                                                                bool check = await networkCRUD.addsmUploadFilesDetails([
                                                                                  uploadID,
                                                                                  uploadFilesURLList[j],
                                                                                  uploadFilesExtList[j],
                                                                                  uploadFilesNameList[j]
                                                                                ]);
                                                                              }
                                                                              ElegantNotification.success(
                                                                                title: Text("Congrats,"),
                                                                                description: Text("Your post created successfully."),
                                                                              );
                                                                              processStepSM = "";
                                                                              dropdownValueGrade = 'Grade';
                                                                              dropdownValueSubjectForUploads = 'Subject';
                                                                              schoolname = "";
                                                                              examname = "";
                                                                              chapter = "";
                                                                              topicUploads = "";
                                                                              term = "";
                                                                              year = "";
                                                                              tags = "";
                                                                              description = "";
                                                                              upload_type = "";
                                                                              uploadFilesURLList = [];
                                                                              uploadFilesNameList = [];
                                                                              uploadFilesExtList = [];
                                                                              Navigator.of(_keyLoader.currentContext!, rootNavigator: true).pop();
                                                                              Navigator.of(context).pop();
                                                                            }
                                                                          }
                                                                        },
                                                                        child:
                                                                            Container(
                                                                          margin:
                                                                              EdgeInsets.only(right: 10),
                                                                          padding: EdgeInsets.only(
                                                                              left: 8,
                                                                              right: 8,
                                                                              top: 5,
                                                                              bottom: 5),
                                                                          decoration: BoxDecoration(
                                                                              color: ((uploadFilesURLList.isNotEmpty) && (schoolname != "")) ? Color.fromRGBO(88, 165, 196, 1) : Colors.black12,
                                                                              borderRadius: BorderRadius.circular(3)),
                                                                          child:
                                                                              Text(
                                                                            ((uploadFilesURLList.isNotEmpty) && (schoolname != ""))
                                                                                ? 'Upload'
                                                                                : "Wait",
                                                                            style:
                                                                                TextStyle(
                                                                              fontFamily: 'Nunito Sans',
                                                                              fontSize: 17,
                                                                              color: Colors.white,
                                                                              fontWeight: FontWeight.w500,
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      )
                                                                    ],
                                                                  ),
                                                                  SizedBox(
                                                                    height: 50,
                                                                  ),
                                                                  upload_type !=
                                                                          "Cometitve Exams"
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.center,
                                                                          children: [
                                                                            Container(
                                                                              width: 400,
                                                                              child: TextFormField(
                                                                                initialValue: schoolname,
                                                                                keyboardType: TextInputType.name,
                                                                                textCapitalization: TextCapitalization.sentences,
                                                                                validator: (val) => ((val!.isEmpty)) ? 'Enter your school name' : null,
                                                                                onChanged: (val) {
                                                                                  setState(() {
                                                                                    schoolname = val;
                                                                                  });
                                                                                },
                                                                                decoration: InputDecoration(
                                                                                  hintText: 'School name',
                                                                                  hintStyle: TextStyle(fontSize: 16),
                                                                                  filled: true,
                                                                                  fillColor: Colors.blueGrey[50],
                                                                                  labelStyle: TextStyle(fontSize: 14),
                                                                                  contentPadding: EdgeInsets.only(left: 30),
                                                                                  enabledBorder: OutlineInputBorder(
                                                                                    borderSide: BorderSide(
                                                                                      color: Colors.blueGrey.withOpacity(0.05),
                                                                                    ),
                                                                                    borderRadius: BorderRadius.circular(15),
                                                                                  ),
                                                                                  focusedBorder: OutlineInputBorder(
                                                                                    borderSide: BorderSide(
                                                                                      color: Colors.blueGrey.withOpacity(0.05),
                                                                                    ),
                                                                                    borderRadius: BorderRadius.circular(15),
                                                                                  ),
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                    height: upload_type !=
                                                                            "Cometitve Exams"
                                                                        ? 30
                                                                        : 0,
                                                                  ),
                                                                  ((upload_type ==
                                                                              "School Exams") ||
                                                                          (upload_type ==
                                                                              "Cometitve Exams"))
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.center,
                                                                          children: [
                                                                            Container(
                                                                              width: 400,
                                                                              child: TextFormField(
                                                                                initialValue: examname,
                                                                                keyboardType: TextInputType.name,
                                                                                textCapitalization: TextCapitalization.sentences,
                                                                                validator: (val) => ((val!.isEmpty)) ? 'Enter your exam name' : null,
                                                                                onChanged: (val) {
                                                                                  setState(() {
                                                                                    examname = val;
                                                                                  });
                                                                                },
                                                                                decoration: InputDecoration(
                                                                                  hintText: 'Exam name',
                                                                                  hintStyle: TextStyle(fontSize: 16),
                                                                                  filled: true,
                                                                                  fillColor: Colors.blueGrey[50],
                                                                                  labelStyle: TextStyle(fontSize: 14),
                                                                                  contentPadding: EdgeInsets.only(left: 30),
                                                                                  enabledBorder: OutlineInputBorder(
                                                                                    borderSide: BorderSide(
                                                                                      color: Colors.blueGrey.withOpacity(0.05),
                                                                                    ),
                                                                                    borderRadius: BorderRadius.circular(15),
                                                                                  ),
                                                                                  focusedBorder: OutlineInputBorder(
                                                                                    borderSide: BorderSide(
                                                                                      color: Colors.blueGrey.withOpacity(0.05),
                                                                                    ),
                                                                                    borderRadius: BorderRadius.circular(15),
                                                                                  ),
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                    height: ((upload_type ==
                                                                                "School Exams") ||
                                                                            (upload_type ==
                                                                                "Cometitve Exams"))
                                                                        ? 30
                                                                        : 0,
                                                                  ),
                                                                  Row(
                                                                    mainAxisAlignment:
                                                                        MainAxisAlignment
                                                                            .center,
                                                                    children: [
                                                                      Container(
                                                                          width:
                                                                              190,
                                                                          padding: EdgeInsets.only(
                                                                              left:
                                                                                  30),
                                                                          decoration:
                                                                              BoxDecoration(
                                                                            color:
                                                                                Colors.blueGrey[50],
                                                                            borderRadius:
                                                                                BorderRadius.circular(15),
                                                                          ),
                                                                          child:
                                                                              DropdownButton<String>(
                                                                            value:
                                                                                dropdownValueGrade,
                                                                            icon:
                                                                                Container(),
                                                                            elevation:
                                                                                7,
                                                                            style:
                                                                                const TextStyle(color: Colors.black, fontSize: 16),
                                                                            underline:
                                                                                Container(
                                                                              height: 0.0,
                                                                              color: Colors.blueGrey[50],
                                                                            ),
                                                                            onChanged:
                                                                                (value) {
                                                                              setState(() {
                                                                                dropdownValueGrade = value!;
                                                                              });
                                                                            },
                                                                            items:
                                                                                <String>[
                                                                              'Grade',
                                                                              '7',
                                                                              '8',
                                                                              '9',
                                                                              '10',
                                                                              '11',
                                                                              '12',
                                                                            ].map<DropdownMenuItem<String>>((String value) {
                                                                              return DropdownMenuItem<String>(
                                                                                value: value,
                                                                                child: Text(
                                                                                  value,
                                                                                  style: TextStyle(fontSize: 15),
                                                                                ),
                                                                              );
                                                                            }).toList(),
                                                                          )),
                                                                      SizedBox(
                                                                        width:
                                                                            20,
                                                                      ),
                                                                      Container(
                                                                          width:
                                                                              190,
                                                                          padding: EdgeInsets.only(
                                                                              left:
                                                                                  30),
                                                                          decoration:
                                                                              BoxDecoration(
                                                                            color:
                                                                                Colors.blueGrey[50],
                                                                            borderRadius:
                                                                                BorderRadius.circular(15),
                                                                          ),
                                                                          child:
                                                                              DropdownButton<String>(
                                                                            value:
                                                                                dropdownValueSubjectForUploads,
                                                                            icon:
                                                                                Container(),
                                                                            elevation:
                                                                                7,
                                                                            style:
                                                                                const TextStyle(color: Colors.black, fontSize: 16),
                                                                            underline:
                                                                                Container(
                                                                              height: 0.0,
                                                                              color: Colors.blueGrey[50],
                                                                            ),
                                                                            onChanged:
                                                                                (value) {
                                                                              setState(() {
                                                                                dropdownValueSubjectForUploads = value!;
                                                                              });
                                                                            },
                                                                            items:
                                                                                <String>[
                                                                              "Subject",
                                                                              'Mathematics',
                                                                              'Geography',
                                                                              'Physics',
                                                                              'Chemistry',
                                                                              'Biology',
                                                                              'History',
                                                                              'Political Science/Civics',
                                                                              'Economics',
                                                                              'Others'
                                                                            ].map<DropdownMenuItem<String>>((String value) {
                                                                              return DropdownMenuItem<String>(
                                                                                value: value,
                                                                                child: Text(
                                                                                  value,
                                                                                  style: TextStyle(fontSize: 15),
                                                                                ),
                                                                              );
                                                                            }).toList(),
                                                                          )),
                                                                    ],
                                                                  ),
                                                                  SizedBox(
                                                                    height: 30,
                                                                  ),
                                                                  Container(
                                                                    width: 400,
                                                                    child: Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .center,
                                                                      children: [
                                                                        Container(
                                                                          width:
                                                                              190,
                                                                          child:
                                                                              TextFormField(
                                                                            initialValue:
                                                                                chapter,
                                                                            keyboardType:
                                                                                TextInputType.name,
                                                                            textCapitalization:
                                                                                TextCapitalization.sentences,
                                                                            validator: (val) => ((val!.isEmpty))
                                                                                ? 'Enter Chapter'
                                                                                : null,
                                                                            onChanged:
                                                                                (val) {
                                                                              setState(() {
                                                                                chapter = val;
                                                                              });
                                                                            },
                                                                            decoration:
                                                                                InputDecoration(
                                                                              hintText: 'Chapter',
                                                                              hintStyle: TextStyle(fontSize: 16),
                                                                              filled: true,
                                                                              fillColor: Colors.blueGrey[50],
                                                                              labelStyle: TextStyle(fontSize: 14),
                                                                              contentPadding: EdgeInsets.only(left: 30),
                                                                              enabledBorder: OutlineInputBorder(
                                                                                borderSide: BorderSide(
                                                                                  color: Colors.blueGrey.withOpacity(0.05),
                                                                                ),
                                                                                borderRadius: BorderRadius.circular(15),
                                                                              ),
                                                                              focusedBorder: OutlineInputBorder(
                                                                                borderSide: BorderSide(
                                                                                  color: Colors.blueGrey.withOpacity(0.05),
                                                                                ),
                                                                                borderRadius: BorderRadius.circular(15),
                                                                              ),
                                                                            ),
                                                                          ),
                                                                        ),
                                                                        SizedBox(
                                                                          width:
                                                                              20,
                                                                        ),
                                                                        Container(
                                                                          width:
                                                                              190,
                                                                          child:
                                                                              TextFormField(
                                                                            initialValue:
                                                                                term,
                                                                            keyboardType:
                                                                                TextInputType.name,
                                                                            textCapitalization:
                                                                                TextCapitalization.sentences,
                                                                            validator: (val) => ((val!.isEmpty))
                                                                                ? 'Enter your term'
                                                                                : null,
                                                                            onChanged:
                                                                                (val) {
                                                                              setState(() {
                                                                                term = val;
                                                                              });
                                                                            },
                                                                            decoration:
                                                                                InputDecoration(
                                                                              hintText: 'Term',
                                                                              hintStyle: TextStyle(fontSize: 16),
                                                                              filled: true,
                                                                              fillColor: Colors.blueGrey[50],
                                                                              labelStyle: TextStyle(fontSize: 14),
                                                                              contentPadding: EdgeInsets.only(left: 30),
                                                                              enabledBorder: OutlineInputBorder(
                                                                                borderSide: BorderSide(
                                                                                  color: Colors.blueGrey.withOpacity(0.05),
                                                                                ),
                                                                                borderRadius: BorderRadius.circular(15),
                                                                              ),
                                                                              focusedBorder: OutlineInputBorder(
                                                                                borderSide: BorderSide(
                                                                                  color: Colors.blueGrey.withOpacity(0.05),
                                                                                ),
                                                                                borderRadius: BorderRadius.circular(15),
                                                                              ),
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                  ),
                                                                  SizedBox(
                                                                    height: 30,
                                                                  ),
                                                                  Container(
                                                                    width: 400,
                                                                    child: Row(
                                                                      mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .center,
                                                                      children: [
                                                                        Container(
                                                                          width:
                                                                              190,
                                                                          child:
                                                                              TextFormField(
                                                                            initialValue:
                                                                                year,
                                                                            keyboardType:
                                                                                TextInputType.number,
                                                                            textCapitalization:
                                                                                TextCapitalization.sentences,
                                                                            validator: (val) => ((val!.isEmpty))
                                                                                ? 'Enter your year'
                                                                                : null,
                                                                            onChanged:
                                                                                (val) {
                                                                              setState(() {
                                                                                year = val;
                                                                              });
                                                                            },
                                                                            decoration:
                                                                                InputDecoration(
                                                                              hintText: 'Year',
                                                                              hintStyle: TextStyle(fontSize: 16),
                                                                              filled: true,
                                                                              fillColor: Colors.blueGrey[50],
                                                                              labelStyle: TextStyle(fontSize: 14),
                                                                              contentPadding: EdgeInsets.only(left: 30),
                                                                              enabledBorder: OutlineInputBorder(
                                                                                borderSide: BorderSide(
                                                                                  color: Colors.blueGrey.withOpacity(0.05),
                                                                                ),
                                                                                borderRadius: BorderRadius.circular(15),
                                                                              ),
                                                                              focusedBorder: OutlineInputBorder(
                                                                                borderSide: BorderSide(
                                                                                  color: Colors.blueGrey.withOpacity(0.05),
                                                                                ),
                                                                                borderRadius: BorderRadius.circular(15),
                                                                              ),
                                                                            ),
                                                                          ),
                                                                        ),
                                                                        SizedBox(
                                                                          width:
                                                                              20,
                                                                        ),
                                                                        Container(
                                                                          width:
                                                                              190,
                                                                          child:
                                                                              TextFormField(
                                                                            initialValue:
                                                                                tags,
                                                                            keyboardType:
                                                                                TextInputType.text,
                                                                            textCapitalization:
                                                                                TextCapitalization.sentences,
                                                                            validator: (val) => ((val!.isEmpty))
                                                                                ? 'Enter tags'
                                                                                : null,
                                                                            onChanged:
                                                                                (val) {
                                                                              setState(() {
                                                                                tags = val;
                                                                              });
                                                                            },
                                                                            decoration:
                                                                                InputDecoration(
                                                                              hintText: 'Tags',
                                                                              hintStyle: TextStyle(fontSize: 16),
                                                                              filled: true,
                                                                              fillColor: Colors.blueGrey[50],
                                                                              labelStyle: TextStyle(fontSize: 14),
                                                                              contentPadding: EdgeInsets.only(left: 30),
                                                                              enabledBorder: OutlineInputBorder(
                                                                                borderSide: BorderSide(
                                                                                  color: Colors.blueGrey.withOpacity(0.05),
                                                                                ),
                                                                                borderRadius: BorderRadius.circular(15),
                                                                              ),
                                                                              focusedBorder: OutlineInputBorder(
                                                                                borderSide: BorderSide(
                                                                                  color: Colors.blueGrey.withOpacity(0.05),
                                                                                ),
                                                                                borderRadius: BorderRadius.circular(15),
                                                                              ),
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      ],
                                                                    ),
                                                                  ),
                                                                  SizedBox(
                                                                    height: 30,
                                                                  ),
                                                                  ((upload_type !=
                                                                          "School Exams"))
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.center,
                                                                          children: [
                                                                            Container(
                                                                              width: 400,
                                                                              child: TextFormField(
                                                                                initialValue: topicUploads,
                                                                                keyboardType: TextInputType.name,
                                                                                textCapitalization: TextCapitalization.sentences,
                                                                                validator: (val) => ((val!.isEmpty)) ? 'Enter topic' : null,
                                                                                onChanged: (val) {
                                                                                  setState(() {
                                                                                    topicUploads = val;
                                                                                  });
                                                                                },
                                                                                decoration: InputDecoration(
                                                                                  hintText: 'Topic',
                                                                                  hintStyle: TextStyle(fontSize: 16),
                                                                                  filled: true,
                                                                                  fillColor: Colors.blueGrey[50],
                                                                                  labelStyle: TextStyle(fontSize: 14),
                                                                                  contentPadding: EdgeInsets.only(left: 30),
                                                                                  enabledBorder: OutlineInputBorder(
                                                                                    borderSide: BorderSide(
                                                                                      color: Colors.blueGrey.withOpacity(0.05),
                                                                                    ),
                                                                                    borderRadius: BorderRadius.circular(15),
                                                                                  ),
                                                                                  focusedBorder: OutlineInputBorder(
                                                                                    borderSide: BorderSide(
                                                                                      color: Colors.blueGrey.withOpacity(0.05),
                                                                                    ),
                                                                                    borderRadius: BorderRadius.circular(15),
                                                                                  ),
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                    height: ((upload_type !=
                                                                            "School Exams"))
                                                                        ? 30
                                                                        : 0,
                                                                  ),
                                                                  Row(
                                                                    mainAxisAlignment:
                                                                        MainAxisAlignment
                                                                            .center,
                                                                    children: [
                                                                      Container(
                                                                        width:
                                                                            400,
                                                                        child:
                                                                            TextFormField(
                                                                          initialValue:
                                                                              description,
                                                                          keyboardType:
                                                                              TextInputType.multiline,
                                                                          minLines:
                                                                              4,
                                                                          maxLines:
                                                                              7,
                                                                          textCapitalization:
                                                                              TextCapitalization.sentences,
                                                                          validator: (val) => ((val!.isEmpty))
                                                                              ? 'Enter description'
                                                                              : null,
                                                                          onChanged:
                                                                              (val) {
                                                                            setState(() {
                                                                              description = val;
                                                                            });
                                                                          },
                                                                          decoration:
                                                                              InputDecoration(
                                                                            hintText:
                                                                                'Description',
                                                                            hintStyle:
                                                                                TextStyle(fontSize: 16),
                                                                            filled:
                                                                                true,
                                                                            fillColor:
                                                                                Colors.blueGrey[50],
                                                                            labelStyle:
                                                                                TextStyle(fontSize: 14),
                                                                            contentPadding:
                                                                                EdgeInsets.only(left: 30, top: 30),
                                                                            enabledBorder:
                                                                                OutlineInputBorder(
                                                                              borderSide: BorderSide(
                                                                                color: Colors.blueGrey.withOpacity(0.05),
                                                                              ),
                                                                              borderRadius: BorderRadius.circular(15),
                                                                            ),
                                                                            focusedBorder:
                                                                                OutlineInputBorder(
                                                                              borderSide: BorderSide(
                                                                                color: Colors.blueGrey.withOpacity(0.05),
                                                                              ),
                                                                              borderRadius: BorderRadius.circular(15),
                                                                            ),
                                                                          ),
                                                                        ),
                                                                      ),
                                                                    ],
                                                                  ),
                                                                  SizedBox(
                                                                    height: 30,
                                                                  ),
                                                                  Container(
                                                                      width:
                                                                          430,
                                                                      height:
                                                                          50,
                                                                      child: ListView.builder(
                                                                          shrinkWrap: true,
                                                                          itemCount: uploadFilesNameList.length,
                                                                          scrollDirection: Axis.horizontal,
                                                                          itemBuilder: (context, index) {
                                                                            return Padding(
                                                                              padding: const EdgeInsets.all(8.0),
                                                                              child: IconButton(
                                                                                  onPressed: () {
                                                                                    _launchInBrowser(uploadFilesURLList[index]);
                                                                                  },
                                                                                  icon: Icon(Icons.file_present, size: 35)),
                                                                            );
                                                                          })),
                                                                  Column(
                                                                      mainAxisSize:
                                                                          MainAxisSize
                                                                              .min,
                                                                      children: [
                                                                        IconButton(
                                                                            onPressed:
                                                                                () {
                                                                              _uploadFiles(context);
                                                                            },
                                                                            icon:
                                                                                Icon(
                                                                              Icons.upload,
                                                                              size: 30,
                                                                            )),
                                                                        SizedBox(
                                                                          height:
                                                                              15,
                                                                        ),
                                                                        Text(
                                                                            "Upload File",
                                                                            style:
                                                                                TextStyle(fontSize: 14, fontWeight: FontWeight.w500)),
                                                                        SizedBox(
                                                                          height:
                                                                              30,
                                                                        ),
                                                                      ])
                                                                ])
                                                          : processStepSM ==
                                                                  "blog"
                                                              ? ListView(
                                                                  shrinkWrap:
                                                                      true,
                                                                  children: [
                                                                      Row(
                                                                        mainAxisAlignment:
                                                                            MainAxisAlignment.spaceBetween,
                                                                        children: [
                                                                          IconButton(
                                                                            onPressed:
                                                                                () {
                                                                              setState(() {
                                                                                processStepSM = "";
                                                                                post = "";
                                                                              });
                                                                            },
                                                                            icon:
                                                                                Tab(child: Icon(Icons.arrow_back_ios, color: Colors.black45, size: 20)),
                                                                          ),
                                                                          Text(
                                                                            'Blog',
                                                                            style:
                                                                                TextStyle(
                                                                              fontFamily: 'Nunito Sans',
                                                                              fontSize: 17,
                                                                              color: Colors.black87,
                                                                              fontWeight: FontWeight.w600,
                                                                            ),
                                                                          ),
                                                                          InkWell(
                                                                            onTap:
                                                                                () async {
                                                                              if (blogtitle == "") {
                                                                                ElegantNotification.info(
                                                                                  title: Text(""),
                                                                                  description: Text("Please write blog title."),
                                                                                );
                                                                              } else if (blogintro == "") {
                                                                                ElegantNotification.info(
                                                                                  title: Text(""),
                                                                                  description: Text("Please write blog introduction."),
                                                                                );
                                                                              } else if (choosedTopics.isEmpty) {
                                                                                ElegantNotification.info(
                                                                                  title: Text(""),
                                                                                  description: Text("Please choose one or more option which describe your blog content."),
                                                                                );
                                                                              }
                                                                              if ((choosedTopics.isNotEmpty) && (blogtitle != "") && (blogintro != "")) {
                                                                                String postID = "blog" + _currentUserId + comparedate;
                                                                                bool isPostDone = false;

                                                                                if (blogContent == "") {
                                                                                  var content = await Navigator.push(
                                                                                    context,
                                                                                    MaterialPageRoute(
                                                                                      builder: (ctx) => HtmlEditorExample(),
                                                                                    ),
                                                                                  );
                                                                                  var bgcontent = await content;
                                                                                  if (bgcontent != null) {
                                                                                    setState(() {
                                                                                      blogContent = bgcontent;
                                                                                      print(blogContent);
                                                                                    });
                                                                                    Dialogs.showLoadingDialog(context, _keyLoader);
                                                                                    bool ispostIDCreated = await networkCRUD.addsmPostDetails([
                                                                                      postID,
                                                                                      _currentUserId,
                                                                                      "blog",
                                                                                      sharecomment,
                                                                                      comparedate
                                                                                    ]);
                                                                                    allPostData.insert(0, {
                                                                                      "first_name": userDataDB!.get("first_name"),
                                                                                      "last_name": userDataDB!.get("last_name"),
                                                                                      "profilepic": userDataDB!.get("profilepic"),
                                                                                      "school_name": userDataDB!.get("school_name"),
                                                                                      "post_id": postID,
                                                                                      "user_id": _currentUserId,
                                                                                      "post_type": "blog",
                                                                                      "comment": sharecomment,
                                                                                      "compare_date": comparedate
                                                                                    });
                                                                                    allSocialPostLocalDB!.put("allpost", allPostData);
                                                                                    if (ispostIDCreated = true) {
                                                                                      List<dynamic> data = [
                                                                                        postID,
                                                                                        _currentUserId,
                                                                                        name,
                                                                                        blogtitle,
                                                                                        blogintro,
                                                                                        blogContent,
                                                                                        0,
                                                                                        0,
                                                                                        0,
                                                                                        0,
                                                                                        comparedate
                                                                                      ];
                                                                                      isPostDone = await networkCRUD.addsmBlogPostDetails(data);
                                                                                      allBlogPostData.insert(0, {
                                                                                        "first_name": userDataDB!.get("first_name"),
                                                                                        "last_name": userDataDB!.get("last_name"),
                                                                                        "profilepic": userDataDB!.get("profilepic"),
                                                                                        "school_name": userDataDB!.get("school_name"),
                                                                                        "post_id": data[0],
                                                                                        "user_id": data[1],
                                                                                        "blogger_name": data[2],
                                                                                        "blog_title": data[3],
                                                                                        "blog_intro": data[4],
                                                                                        "blog_content": data[5],
                                                                                        "like_count": data[6],
                                                                                        "comment_count": data[7],
                                                                                        "view_count": data[8],
                                                                                        "impression_count": data[9],
                                                                                        "compare_date": data[10]
                                                                                      });
                                                                                      allSocialPostLocalDB!.put("blogpost", allBlogPostData);
                                                                                      for (int i = 0; i < choosedTopics.length; i++) {
                                                                                        networkCRUD.addsmBlogCategoryDetails([
                                                                                          postID,
                                                                                          choosedTopics[i],
                                                                                          comparedate
                                                                                        ]);
                                                                                      }
                                                                                    }
                                                                                    _call_apis();
                                                                                  }
                                                                                }
                                                                                ElegantNotification.success(
                                                                                  title: Text("Congrats,"),
                                                                                  description: Text("You posted blog successfully."),
                                                                                );

                                                                                processStepSM = "";
                                                                                Navigator.of(_keyLoader.currentContext!, rootNavigator: true).pop();
                                                                                Navigator.of(context).pop();
                                                                              }
                                                                            },
                                                                            child:
                                                                                Container(
                                                                              margin: EdgeInsets.only(right: 10),
                                                                              padding: EdgeInsets.only(left: 8, right: 8, top: 5, bottom: 5),
                                                                              decoration: BoxDecoration(color: ((choosedTopics.isNotEmpty) && (blogtitle != "") && (blogintro != "")) ? Color.fromRGBO(88, 165, 196, 1) : Colors.black12, borderRadius: BorderRadius.circular(3)),
                                                                              child: Text(
                                                                                'Create Blog',
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 17,
                                                                                  color: Colors.white,
                                                                                  fontWeight: FontWeight.w500,
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          )
                                                                        ],
                                                                      ),
                                                                      SizedBox(
                                                                        height:
                                                                            20,
                                                                      ),
                                                                      Center(
                                                                          child:
                                                                              Container(
                                                                        child: Image
                                                                            .asset(
                                                                          "assets/bloglogo.png",
                                                                          height:
                                                                              100,
                                                                          width:
                                                                              150,
                                                                        ),
                                                                      )),
                                                                      SizedBox(
                                                                        height:
                                                                            40,
                                                                      ),
                                                                      Padding(
                                                                        padding:
                                                                            const EdgeInsets.all(11.0),
                                                                        child:
                                                                            Text(
                                                                          'Create Your Own Blog.',
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                16,
                                                                            color:
                                                                                Colors.black87,
                                                                            fontWeight:
                                                                                FontWeight.w800,
                                                                          ),
                                                                        ),
                                                                      ),
                                                                      Padding(
                                                                          padding: const EdgeInsets.all(
                                                                              11.0),
                                                                          child:
                                                                              Text(
                                                                            'Would you like your name to be used on your blog?',
                                                                            style:
                                                                                TextStyle(
                                                                              fontFamily: 'Nunito Sans',
                                                                              fontSize: 15,
                                                                              color: Colors.black87,
                                                                              fontWeight: FontWeight.w600,
                                                                            ),
                                                                          )),
                                                                      RadioGroup<
                                                                          String>.builder(
                                                                        direction:
                                                                            Axis.vertical,
                                                                        groupValue:
                                                                            _verticalGroupValue,
                                                                        onChanged:
                                                                            (value) =>
                                                                                setState(() {
                                                                          print(
                                                                              value);
                                                                          _verticalGroupValue =
                                                                              value!;
                                                                          if (_verticalGroupValue ==
                                                                              "Nick Name") {
                                                                            setState(() {
                                                                              flag = true;
                                                                            });
                                                                          } else if (_verticalGroupValue ==
                                                                              "Full Name") {
                                                                            setState(() {
                                                                              flag = false;
                                                                              name = userDataDB!.get('first_name') + " " + userDataDB!.get('last_name');
                                                                            });
                                                                          } else if (_verticalGroupValue ==
                                                                              "First Name") {
                                                                            setState(() {
                                                                              flag = false;
                                                                              name = userDataDB!.get('first_name');
                                                                            });
                                                                          } else if (_verticalGroupValue ==
                                                                              "Publish Anonymously") {
                                                                            setState(() {
                                                                              flag = false;
                                                                              name = "Unknown";
                                                                            });
                                                                          }
                                                                        }),
                                                                        items: [
                                                                          "Full Name",
                                                                          "First Name",
                                                                          "Publish Anonymously",
                                                                          "Nick Name"
                                                                        ],
                                                                        itemBuilder:
                                                                            (item) =>
                                                                                RadioButtonBuilder(
                                                                          item,
                                                                        ),
                                                                      ),
                                                                      (flag ==
                                                                              true)
                                                                          ? Row(
                                                                              children: [
                                                                                Padding(
                                                                                    padding: EdgeInsets.only(left: 73),
                                                                                    child: Container(
                                                                                        height: 20,
                                                                                        width: 150,
                                                                                        child: TextFormField(
                                                                                          validator: (value) {
                                                                                            if (value!.isEmpty) {
                                                                                              return 'Please Enter Name.';
                                                                                            } else
                                                                                              return null;
                                                                                          },
                                                                                          onChanged: (value) {
                                                                                            setState(() {
                                                                                              name = value;
                                                                                            });
                                                                                          },
                                                                                        )))
                                                                              ],
                                                                            )
                                                                          : SizedBox(),
                                                                      SizedBox(
                                                                          height:
                                                                              20),
                                                                      Padding(
                                                                        padding: const EdgeInsets.only(
                                                                            left:
                                                                                11,
                                                                            top:
                                                                                11),
                                                                        child: RichText(
                                                                            text: TextSpan(text: 'Blog Title', style: TextStyle(fontFamily: 'Nunito Sans', fontSize: 15, fontWeight: FontWeight.w600, color: Colors.black87), children: [
                                                                          TextSpan(
                                                                              text: ' *',
                                                                              style: TextStyle(fontFamily: 'Nunito Sans', fontSize: 15, fontWeight: FontWeight.w600, color: Color.fromRGBO(205, 61, 61, 1))),
                                                                          TextSpan(
                                                                              text: '  (max 10 words)',
                                                                              style: TextStyle(color: Colors.black87, fontFamily: 'Nunito Sans', fontSize: 12, fontWeight: FontWeight.w500))
                                                                        ])),
                                                                      ),
                                                                      Padding(
                                                                        padding: const EdgeInsets.only(
                                                                            left:
                                                                                11,
                                                                            top:
                                                                                7,
                                                                            bottom:
                                                                                11),
                                                                        child:
                                                                            Text(
                                                                          'Title to encourage viewers to read more.',
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                11,
                                                                            color:
                                                                                Colors.black87,
                                                                            fontWeight:
                                                                                FontWeight.w400,
                                                                          ),
                                                                        ),
                                                                      ),
                                                                      Container(
                                                                        padding: EdgeInsets.only(
                                                                            left:
                                                                                11,
                                                                            right:
                                                                                11,
                                                                            bottom:
                                                                                11,
                                                                            top:
                                                                                5),
                                                                        child:
                                                                            TextFormField(
                                                                          validator:
                                                                              (value) {
                                                                            if (value!.isEmpty) {
                                                                              return 'Please Enter title of blog.';
                                                                            } else
                                                                              return null;
                                                                          },
                                                                          onChanged:
                                                                              (value) {
                                                                            setState(() {
                                                                              blogtitle = value;
                                                                            });
                                                                          },
                                                                          keyboardType:
                                                                              TextInputType.multiline,
                                                                          maxLines:
                                                                              null,
                                                                        ),
                                                                        width: MediaQuery.of(context).size.width -
                                                                            26,
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              20),
                                                                      Padding(
                                                                        padding: const EdgeInsets.only(
                                                                            left:
                                                                                11,
                                                                            top:
                                                                                11),
                                                                        child: RichText(
                                                                            text: TextSpan(text: 'Blog Introduction', style: TextStyle(fontFamily: 'Nunito Sans', fontSize: 15, fontWeight: FontWeight.w600, color: Colors.black87), children: [
                                                                          TextSpan(
                                                                              text: ' *',
                                                                              style: TextStyle(fontFamily: 'Nunito Sans', fontSize: 15, fontWeight: FontWeight.w600, color: Color.fromRGBO(205, 61, 61, 1))),
                                                                          TextSpan(
                                                                              text: '  (max 25 words)',
                                                                              style: TextStyle(color: Colors.black87, fontFamily: 'Nunito Sans', fontSize: 12, fontWeight: FontWeight.w500))
                                                                        ])),
                                                                      ),
                                                                      Padding(
                                                                        padding: const EdgeInsets.only(
                                                                            left:
                                                                                11,
                                                                            top:
                                                                                7,
                                                                            bottom:
                                                                                11),
                                                                        child:
                                                                            Text(
                                                                          'A third person, brief introduction to explain what the blog is about.',
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                11,
                                                                            color:
                                                                                Colors.black87,
                                                                            fontWeight:
                                                                                FontWeight.w400,
                                                                          ),
                                                                        ),
                                                                      ),
                                                                      Container(
                                                                        padding: EdgeInsets.only(
                                                                            left:
                                                                                11,
                                                                            right:
                                                                                11,
                                                                            bottom:
                                                                                11,
                                                                            top:
                                                                                5),
                                                                        child: TextFormField(
                                                                            validator: (value) {
                                                                              if (value!.isEmpty) {
                                                                                return 'Please Enter a short introduction of your Blog.';
                                                                              } else
                                                                                return null;
                                                                            },
                                                                            onChanged: (value) {
                                                                              setState(() {
                                                                                blogintro = value;
                                                                              });
                                                                            },
                                                                            keyboardType: TextInputType.multiline,
                                                                            maxLines: 2),
                                                                        width: MediaQuery.of(context).size.width -
                                                                            26,
                                                                      ),
                                                                      SizedBox(
                                                                          height:
                                                                              20),
                                                                      Padding(
                                                                        padding: const EdgeInsets.only(
                                                                            left:
                                                                                11,
                                                                            top:
                                                                                11),
                                                                        child: RichText(
                                                                            text: TextSpan(
                                                                                text: 'What is your Blog about?',
                                                                                style: TextStyle(
                                                                                  fontFamily: 'Nunito Sans',
                                                                                  fontSize: 15,
                                                                                  fontWeight: FontWeight.w600,
                                                                                  color: Colors.black87,
                                                                                ),
                                                                                children: [
                                                                              TextSpan(text: ' *', style: TextStyle(fontFamily: 'Nunito Sans', fontSize: 15, fontWeight: FontWeight.w600, color: Color.fromRGBO(205, 61, 61, 1))),
                                                                            ])),
                                                                      ),
                                                                      Padding(
                                                                        padding: const EdgeInsets.only(
                                                                            left:
                                                                                11,
                                                                            top:
                                                                                7,
                                                                            bottom:
                                                                                11),
                                                                        child:
                                                                            Text(
                                                                          'You can select more than one.',
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                11,
                                                                            color:
                                                                                Colors.black87,
                                                                            fontWeight:
                                                                                FontWeight.w400,
                                                                          ),
                                                                        ),
                                                                      ),
                                                                      MultiSelectFormField(
                                                                        chipBackGroundColor:
                                                                            active,
                                                                        chipLabelStyle:
                                                                            TextStyle(fontWeight: FontWeight.bold),
                                                                        dialogTextStyle:
                                                                            TextStyle(fontWeight: FontWeight.bold),
                                                                        checkBoxActiveColor:
                                                                            active,
                                                                        checkBoxCheckColor:
                                                                            Colors.black87,
                                                                        dialogShapeBorder:
                                                                            RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(12.0))),
                                                                        title:
                                                                            Text(
                                                                          "Choose topics",
                                                                          style:
                                                                              TextStyle(fontSize: 16),
                                                                        ),
                                                                        dataSource: [
                                                                          {
                                                                            "display":
                                                                                "Management",
                                                                            "value":
                                                                                "Management",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Strategy",
                                                                            "value":
                                                                                "Strategy",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Anxiety",
                                                                            "value":
                                                                                "Anxiety",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Stress",
                                                                            "value":
                                                                                "Stress",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Friendship",
                                                                            "value":
                                                                                "Friendship",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Relationships",
                                                                            "value":
                                                                                "Relationships",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Exam and Results",
                                                                            "value":
                                                                                "Exam and Results",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Careers",
                                                                            "value":
                                                                                "Careers",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Healthy LifeStyle",
                                                                            "value":
                                                                                "Healthy LifeStyle",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Environment",
                                                                            "value":
                                                                                "Environment",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Depression",
                                                                            "value":
                                                                                "Depression",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Eating Disorder",
                                                                            "value":
                                                                                "Eating Disorder",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Stay Fit",
                                                                            "value":
                                                                                "Stay Fit",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Finding Supoort",
                                                                            "value":
                                                                                "Finding Supoort",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Looking after yourself",
                                                                            "value":
                                                                                "Looking after yourself",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Love to write",
                                                                            "value":
                                                                                "Love to write",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Business Ideas",
                                                                            "value":
                                                                                "Business Ideas",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Wierd Experience",
                                                                            "value":
                                                                                "Wierd Experience",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Most Funny Person",
                                                                            "value":
                                                                                "Most Funny Person",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Best Friends",
                                                                            "value":
                                                                                "Best Friends",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Science",
                                                                            "value":
                                                                                "Science",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Supproting Loved Ones",
                                                                            "value":
                                                                                "Supproting Loved Ones",
                                                                          },
                                                                          {
                                                                            "display":
                                                                                "Study Abroad",
                                                                            "value":
                                                                                "Study Abroad",
                                                                          },
                                                                        ],
                                                                        textField:
                                                                            'display',
                                                                        valueField:
                                                                            'value',
                                                                        okButtonLabel:
                                                                            'OK',
                                                                        cancelButtonLabel:
                                                                            'CANCEL',
                                                                        initialValue:
                                                                            choosedTopics,
                                                                        onSaved:
                                                                            (value) {
                                                                          if (value ==
                                                                              null)
                                                                            return;
                                                                          setState(
                                                                              () {
                                                                            choosedTopics =
                                                                                value;
                                                                            print(choosedTopics);
                                                                          });
                                                                        },
                                                                      ),
                                                                      SizedBox(
                                                                        height:
                                                                            60,
                                                                      ),
                                                                    ])
                                                              : SizedBox(),
                ),
              );
            }));
  }

  String sharecomment = "";
  String markupptext = "";
  void _shareSocialPostDialog(int i, int allPostIndex) {
    bool whiteflag = false;
    List selectedImages = [];
    for (int j = 0; j < allImagesData.length; j++) {
      if (allImagesData[j]["imagelist_id"] ==
          allCausePostData[i]["imagelist_id"]) {
        selectedImages.add(allImagesData[j]["image"]);
      }
    }
    if (allCausePostData[i]["themeindex"] == 0 ||
        allCausePostData[i]["themeindex"] == 2 ||
        allCausePostData[i]["themeindex"] == 4 ||
        allCausePostData[i]["themeindex"] == 5) {
      whiteflag = true;
    }
    List taggedUsers = [];
    String allMembers = '';
    for (int j = 0; j < allTaggedUsersData.length; j++) {
      if (allTaggedUsersData[j]["usertaglist_id"] ==
          allProjectsPostData[i]["memberlist_id"]) {
        for (int k = 0; k < taggingData.length; k++) {
          if (allTaggedUsersData[j]["user_id"] == taggingData[k]["user_id"]) {
            taggedUsers.add(taggingData[k]["first_name"] +
                " " +
                taggingData[k]["last_name"] +
                " , ");
            allMembers = allMembers +
                taggingData[k]["first_name"] +
                " " +
                taggingData[k]["last_name"] +
                " , ";
          }
        }
      }
    }
    for (int j = 0; j < allTaggedUsersData.length; j++) {
      if (allTaggedUsersData[j]["usertaglist_id"] ==
          allProjectsPostData[i]["memberlist_id"]) {
        for (int k = 0; k < taggingData.length; k++) {
          if (allTaggedUsersData[j]["user_id"] == taggingData[k]["user_id"]) {
            taggedUsers.add(taggingData[k]["first_name"] +
                " " +
                taggingData[k]["last_name"] +
                " , ");
            allMembers = allMembers +
                taggingData[k]["first_name"] +
                " " +
                taggingData[k]["last_name"] +
                " , ";
          }
        }
      }
    }
    showDialog(
        context: context,
        barrierColor: Colors.grey.withOpacity(0.2),
        barrierDismissible: false,
        builder: (_) => StatefulBuilder(builder: (context, setState) {
              return AlertDialog(
                contentPadding: EdgeInsets.all(20),
                shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(10.0)),
                title: Column(
                  mainAxisSize: MainAxisSize.min,
                  children: [
                    Row(
                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
                      children: [
                        SizedBox(width: 30),
                        Text(
                          "Share post",
                          style: TextStyle(
                            fontSize: 20,
                            color: Color(0xCB000000),
                            fontWeight: FontWeight.w900,
                          ),
                        ),
                        IconButton(
                          onPressed: () {
                            Navigator.pop(context);
                          },
                          icon: Tab(
                              child: Icon(Icons.cancel_rounded,
                                  color: Colors.black45, size: 25)),
                        )
                      ],
                    ),
                    SizedBox(height: 20),
                    Container(height: 1, width: 500, color: Colors.grey[200]),
                  ],
                ),
                content: Container(
                  height: 470,
                  width: 500,
                  child: ListView(
                    children: [
                      Row(
                        mainAxisAlignment: MainAxisAlignment.end,
                        children: [
                          Container(
                            decoration: BoxDecoration(
                              color: Colors.white,
                              borderRadius: BorderRadius.circular(5),
                              boxShadow: [
                                BoxShadow(
                                  color: Colors.deepPurple.withOpacity(0.1),
                                  spreadRadius: 5,
                                  blurRadius: 10,
                                ),
                              ],
                            ),
                            child: ElevatedButton(
                              child: Container(
                                  width: 100,
                                  height: 40,
                                  child: Center(
                                      child: Text("Post",
                                          style: TextStyle(
                                              fontSize: 15,
                                              fontWeight: FontWeight.bold,
                                              color: (sharecomment != "")
                                                  ? Colors.white
                                                  : Colors.grey[400])))),
                              onPressed: () async {
                                if (sharecomment != "") {
                                  Dialogs.showLoadingDialog(
                                      context, _keyLoader);
                                  comparedate = DateFormat('yyyyMMddkkmm')
                                      .format(DateTime.now());
                                  String postID =
                                      "sm${_currentUserId}${comparedate}";

                                  bool ispostIDCreated =
                                      await networkCRUD.addsmPostDetails([
                                    postID,
                                    _currentUserId,
                                    "shared|${allPostData[allPostIndex]["post_id"]}",
                                    sharecomment,
                                    comparedate
                                  ]);
                                  _call_apis();
                                  Navigator.of(_keyLoader.currentContext!,
                                          rootNavigator: true)
                                      .pop();
                                  Navigator.of(context).pop();
                                } else {
                                  ElegantNotification.error(
                                    title: Text("Error..."),
                                    description: Text("Something wrong."),
                                  );
                                }
                              },
                              style: ElevatedButton.styleFrom(
                                primary: (sharecomment != "")
                                    ? active
                                    : Colors.white54,
                                onPrimary: Colors.white,
                                shape: RoundedRectangleBorder(
                                  borderRadius: BorderRadius.circular(5),
                                ),
                              ),
                            ),
                          ),
                          SizedBox(width: 20)
                        ],
                      ),
                      SizedBox(height: 30),
                      Row(
                        mainAxisAlignment: MainAxisAlignment.start,
                        children: [
                          CircleAvatar(
                            child: ClipOval(
                              child: Container(
                                width:
                                    MediaQuery.of(context).size.width / 10.34,
                                height:
                                    MediaQuery.of(context).size.width / 10.34,
                                child: CachedNetworkImage(
                                  imageUrl: (userDataDB!.get("profilepic"))
                                      .toString(),
                                  fit: BoxFit.cover,
                                  placeholder: (context, url) => Container(
                                      height: 30,
                                      width: 30,
                                      child: Image.network(
                                        "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                      )),
                                  errorWidget: (context, url, error) =>
                                      Icon(Icons.error),
                                ),
                              ),
                            ),
                          ),
                          SizedBox(
                            width: 10,
                          ),
                          RichText(
                              text: TextSpan(
                                  text: (userDataDB!.get("first_name"))
                                          .toString() +
                                      " " +
                                      (userDataDB!.get("last_name")).toString(),
                                  style: TextStyle(
                                    fontFamily: 'Nunito Sans',
                                    fontSize: 14,
                                    color: Color.fromRGBO(0, 0, 0, 0.7),
                                    fontWeight: FontWeight.bold,
                                  ),
                                  children: <TextSpan>[
                                TextSpan(
                                  text: '  shared',
                                  style: TextStyle(
                                    fontFamily: 'Nunito Sans',
                                    fontSize: 12,
                                    color: Color.fromRGBO(0, 0, 0, 0.7),
                                    fontWeight: FontWeight.w500,
                                  ),
                                )
                              ])),
                        ],
                      ),
                      Container(
                        padding: const EdgeInsets.only(
                            left: (20.0), right: 10, top: 10, bottom: 10),
                        child: FlutterMentions(
                          key: key,
                          autofocus: true,
                          keyboardType: TextInputType.text,
                          cursorColor: Color(0xff0962ff),
                          style: TextStyle(
                              fontSize: 15,
                              color: Color(0xff0962ff),
                              fontWeight: FontWeight.w500),
                          decoration: new InputDecoration(
                              border: InputBorder.none,
                              focusedBorder: InputBorder.none,
                              enabledBorder: InputBorder.none,
                              errorBorder: InputBorder.none,
                              disabledBorder: InputBorder.none,
                              hintText: "What do you want to talk about?",
                              hintStyle: TextStyle(
                                  color: Colors.black45, fontSize: 15)),
                          suggestionPosition: SuggestionPosition.Bottom,
                          onMarkupChanged: (val) {
                            setState(() {
                              markupptext = val;
                            });
                          },
                          onEditingComplete: () {
                            setState(() {
                              tagids.clear();
                              for (int l = 0; l < markupptext.length; l++) {
                                int k = l;
                                if (markupptext.substring(k, k + 1) == "@") {
                                  String test1 = markupptext.substring(k);
                                  tagids.add(
                                      test1.substring(4, test1.indexOf("__]")));
                                }
                              }
                              print(tagids);
                            });
                          },
                          onSuggestionVisibleChanged: (val) {
                            setState(() {
                              _showList = val;
                            });
                          },
                          onChanged: (val) {
                            setState(() {
                              sharecomment = val;
                            });
                          },
                          onSearchChanged: (
                            trigger,
                            value,
                          ) {
                            print('again | $trigger | $value ');
                          },
                          hideSuggestionList: false,
                          minLines: 1,
                          maxLines: 3,
                          mentions: [
                            Mention(
                                trigger: r'@',
                                style: TextStyle(
                                  color: Color(0xff0C2551),
                                ),
                                matchAll: false,
                                data: _users,
                                suggestionBuilder: (data) {
                                  return Container(
                                    decoration: BoxDecoration(
                                        color: Colors.white,
                                        border: Border(
                                            top: BorderSide(
                                                color: Color(0xFFE0E1E4)))),
                                    padding: EdgeInsets.all(10.0),
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: <Widget>[
                                        CircleAvatar(
                                          backgroundImage: NetworkImage(
                                            data['photo'],
                                          ),
                                        ),
                                        SizedBox(
                                          width: 20.0,
                                        ),
                                        Column(
                                          mainAxisAlignment:
                                              MainAxisAlignment.start,
                                          crossAxisAlignment:
                                              CrossAxisAlignment.start,
                                          children: <Widget>[
                                            Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              children: [
                                                Text(data['display']),
                                              ],
                                            ),
                                            SizedBox(
                                              height: 3,
                                            ),
                                            Row(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              children: [
                                                Text(
                                                  '${data['full_name']}',
                                                  style: TextStyle(
                                                    color: Color(0xFFAAABAD),
                                                    fontSize: 11,
                                                  ),
                                                ),
                                              ],
                                            ),
                                          ],
                                        )
                                      ],
                                    ),
                                  );
                                }),
                          ],
                        ),
                      ),
                      allPostData[allPostIndex]["post_type"] == "Mood"
                          ? Container(
                              padding: EdgeInsets.all(10),
                              decoration: BoxDecoration(
                                  color: Color.fromRGBO(242, 246, 248, 1),
                                  borderRadius: BorderRadius.circular(10)),
                              width: 450,
                              child: Column(children: [
                                Padding(
                                  padding: const EdgeInsets.only(
                                      left: (15.0), right: 10),
                                  child: Row(
                                    mainAxisAlignment:
                                        MainAxisAlignment.spaceBetween,
                                    children: [
                                      Container(
                                        child: Row(
                                          children: [
                                            InkWell(
                                              child: CircleAvatar(
                                                child: ClipOval(
                                                  child: Container(
                                                    child: CachedNetworkImage(
                                                      imageUrl:
                                                          allMoodPostData[i]
                                                              ["profilepic"],
                                                      width: 40,
                                                      height: 40,
                                                      fit: BoxFit.cover,
                                                      placeholder: (context,
                                                              url) =>
                                                          Container(
                                                              width: 40,
                                                              height: 40,
                                                              color:
                                                                  Colors.white,
                                                              child:
                                                                  Image.network(
                                                                "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                                                              )),
                                                      errorWidget: (context,
                                                              url, error) =>
                                                          Icon(Icons.error),
                                                    ),
                                                  ),
                                                ),
                                              ),
                                            ),
                                            SizedBox(
                                              width: 10,
                                            ),
                                            _chooseHeaderToViewSMPost(
                                                allMoodPostData[i]["user_mood"],
                                                i, [], []),
                                          ],
                                        ),
                                      ),
                                      IconButton(
                                          icon: Icon(FontAwesome5.ellipsis_h,
                                              color:
                                                  Color.fromRGBO(0, 0, 0, 0.8),
                                              size: 13),
                                          onPressed: () {}),
                                    ],
                                  ),
                                ),
                                InkWell(
                                  onTap: () {
                                    setState(() {
                                      isPostExpanded[allPostIndex] =
                                          !isPostExpanded[allPostIndex];
                                    });
                                  },
                                  child: Container(
                                    width:
                                        MediaQuery.of(context).size.width - 30,
                                    margin: EdgeInsets.fromLTRB(10, 10, 0, 2),
                                    child: ReadMoreText(
                                      isPostExpanded[allPostIndex] == false
                                          ? allMoodPostData[i]["message"]
                                                      .toString()
                                                      .length <
                                                  40
                                              ? allMoodPostData[i]["message"]
                                              : "${allMoodPostData[i]["message"].toString().substring(0, 40)}..."
                                          : allMoodPostData[i]["message"],
                                      textAlign: TextAlign.left,
                                      trimLines: 4,
                                      colorClickableText: Color(0xff0962ff),
                                      trimMode: TrimMode.Line,
                                      trimCollapsedText: 'read more',
                                      trimExpandedText: 'Show less',
                                      style: TextStyle(
                                        fontFamily: 'Nunito Sans',
                                        fontSize: 14,
                                        color: Color.fromRGBO(0, 0, 0, 0.8),
                                        fontWeight: FontWeight.w400,
                                      ),
                                      lessStyle: TextStyle(
                                        fontFamily: 'Nunito Sans',
                                        fontSize: 12,
                                        color: Color(0xff0962ff),
                                        fontWeight: FontWeight.w700,
                                      ),
                                      moreStyle: TextStyle(
                                        fontFamily: 'Nunito Sans',
                                        fontSize: 12,
                                        color: Color(0xff0962ff),
                                        fontWeight: FontWeight.w700,
                                      ),
                                    ),
                                  ),
                                ),
                              ]))
                          : allPostData[allPostIndex]["post_type"] ==
                                  "cause|teachunprevilagedKids"
                              ? Container(
                                  padding: EdgeInsets.all(10),
                                  decoration: BoxDecoration(
                                      color: Color.fromRGBO(242, 246, 248, 1),
                                      borderRadius: BorderRadius.circular(10)),
                                  width: 450,
                                  child: Column(children: [
                                    InkWell(
                                      onTap: () {},
                                      child: Container(
                                        width:
                                            MediaQuery.of(context).size.width -
                                                30,
                                        margin:
                                            EdgeInsets.fromLTRB(10, 10, 0, 2),
                                        child: ReadMoreText(
                                          allCausePostData[i]["message"],
                                          textAlign: TextAlign.left,
                                          trimLines: 4,
                                          colorClickableText: Color(0xff0962ff),
                                          trimMode: TrimMode.Line,
                                          trimCollapsedText: 'read more',
                                          trimExpandedText: 'Show less',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 14,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            fontWeight: FontWeight.w400,
                                          ),
                                          lessStyle: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 12,
                                            color: Color(0xff0962ff),
                                            fontWeight: FontWeight.w700,
                                          ),
                                          moreStyle: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 12,
                                            color: Color(0xff0962ff),
                                            fontWeight: FontWeight.w700,
                                          ),
                                        ),
                                      ),
                                    ),
                                    SizedBox(height: 10),
                                    (selectedImages.isNotEmpty)
                                        ? Container(
                                            height: 250,
                                            width: MediaQuery.of(context)
                                                .size
                                                .width,
                                            child: Image.network(
                                                selectedImages[0],
                                                fit: BoxFit.contain))
                                        : SizedBox(),
                                    Container(
                                      decoration: BoxDecoration(
                                          image: DecorationImage(
                                              colorFilter: new ColorFilter.mode(
                                                  Colors.black.withOpacity(0.8),
                                                  BlendMode.dstATop),
                                              image: AssetImage(
                                                  allCausePostData[i]["theme"]),
                                              fit: BoxFit.fill)),
                                      child: Padding(
                                        padding: const EdgeInsets.all(8.0),
                                        child: Row(children: [
                                          Column(
                                              mainAxisAlignment:
                                                  MainAxisAlignment.start,
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                Container(
                                                  height: 20,
                                                  child: Text('Class :',
                                                      style: TextStyle(
                                                          fontSize: 13,
                                                          fontWeight:
                                                              FontWeight.w700,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors
                                                                  .black87)),
                                                ),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                                Container(
                                                  height: 20,
                                                  child: Text('Subject :',
                                                      style: TextStyle(
                                                          fontSize: 13,
                                                          fontWeight:
                                                              FontWeight.w700,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors
                                                                  .black87)),
                                                ),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                                Container(
                                                  height: 20,
                                                  child: Text('Frequency :',
                                                      style: TextStyle(
                                                          fontSize: 13,
                                                          fontWeight:
                                                              FontWeight.w700,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors
                                                                  .black87)),
                                                ),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                                Container(
                                                  height: 20,
                                                  child: Text('Date :',
                                                      style: TextStyle(
                                                          fontSize: 13,
                                                          fontWeight:
                                                              FontWeight.w700,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors
                                                                  .black87)),
                                                ),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                                Container(
                                                  height: 20,
                                                  child: Text('Time :',
                                                      style: TextStyle(
                                                          fontSize: 13,
                                                          fontWeight:
                                                              FontWeight.w700,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors
                                                                  .black87)),
                                                ),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                                Container(
                                                  height: 20,
                                                  child: Text('Venue :',
                                                      style: TextStyle(
                                                          fontSize: 13,
                                                          fontWeight:
                                                              FontWeight.w700,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors
                                                                  .black87)),
                                                ),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                              ]),
                                          SizedBox(width: 4),
                                          Column(
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                SizedBox(height: 5),
                                                Container(
                                                    width: 100,
                                                    height: 20,
                                                    child: Text(
                                                      allCausePostData[i]
                                                              ["grade"]
                                                          .toString(),
                                                      textAlign:
                                                          TextAlign.start,
                                                      style: TextStyle(
                                                          fontWeight:
                                                              FontWeight.w600,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors.black87),
                                                    )),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                                Container(
                                                    height: 20,
                                                    width: 100,
                                                    child: Text(
                                                      allCausePostData[i]
                                                          ["subject"],
                                                      style: TextStyle(
                                                          fontWeight:
                                                              FontWeight.w600,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors.black87),
                                                      textAlign:
                                                          TextAlign.start,
                                                    )),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                                Container(
                                                    height: 20,
                                                    width: 100,
                                                    child: Text(
                                                      allCausePostData[i]
                                                          ["frequency"],
                                                      style: TextStyle(
                                                          fontWeight:
                                                              FontWeight.w600,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors.black87),
                                                      textAlign:
                                                          TextAlign.start,
                                                    )),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                                Container(
                                                    height: 20,
                                                    width: 100,
                                                    child: Text(
                                                      allCausePostData[i]
                                                          ["date"],
                                                      style: TextStyle(
                                                          fontWeight:
                                                              FontWeight.w600,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors.black87),
                                                      textAlign:
                                                          TextAlign.start,
                                                    )),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                                Container(
                                                    width: 150,
                                                    child: Text(
                                                      allCausePostData[i]
                                                              ["from_"] +
                                                          ' to ' +
                                                          allCausePostData[i]
                                                              ["to_"],
                                                      style: TextStyle(
                                                          fontWeight:
                                                              FontWeight.w600,
                                                          color: whiteflag ==
                                                                  true
                                                              ? Colors.white
                                                              : Colors.black87),
                                                      textAlign:
                                                          TextAlign.start,
                                                    )),
                                                SizedBox(
                                                  height: 5,
                                                ),
                                                Row(children: [
                                                  allCausePostData[i]
                                                              ["eventtype"] ==
                                                          "offline"
                                                      ? Container(
                                                          width: 150,
                                                          child: Text(
                                                            allCausePostData[i]
                                                                ["address"],
                                                            style: TextStyle(
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w600,
                                                                color: whiteflag ==
                                                                        true
                                                                    ? Colors
                                                                        .white
                                                                    : Colors
                                                                        .black87),
                                                            textAlign:
                                                                TextAlign.start,
                                                          ))
                                                      : Container(
                                                          width: 150,
                                                          child: Text(
                                                            "HyS Online Meet",
                                                            style: TextStyle(
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w600,
                                                                color: whiteflag ==
                                                                        true
                                                                    ? Colors
                                                                        .white
                                                                    : Colors
                                                                        .black87),
                                                            textAlign:
                                                                TextAlign.start,
                                                          )),
                                                  allCausePostData[i]
                                                              ["eventtype"] ==
                                                          "offline"
                                                      ? InkWell(
                                                          onTap: () {},
                                                          child: Text(
                                                            '(Map to Venue)',
                                                            style: TextStyle(
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w600,
                                                                color: Colors
                                                                    .blue),
                                                          ))
                                                      : SizedBox(),
                                                ]),
                                                SizedBox(height: 10),
                                              ]),
                                        ]),
                                      ),
                                    ),
                                    SizedBox(
                                      height: 10,
                                    ),
                                    Row(
                                        mainAxisAlignment:
                                            MainAxisAlignment.spaceBetween,
                                        children: [
                                          Text(allCausePostData[i]["eventname"],
                                              style: TextStyle(
                                                  fontWeight: FontWeight.w700,
                                                  fontSize: 15,
                                                  color: Color.fromRGBO(
                                                      88, 165, 196, 1))),
                                          Container(
                                              child: Row(children: [
                                            Text(
                                                allCausePostData[i]["date"]
                                                        .toString() +
                                                    ' ' +
                                                    allCausePostData[i]["from_"]
                                                        .toString() +
                                                    ' to ' +
                                                    allCausePostData[i]["to_"]
                                                        .toString(),
                                                style: TextStyle(
                                                    fontWeight: FontWeight.w700,
                                                    fontSize: 14,
                                                    color: Color.fromRGBO(
                                                        88, 165, 196, 1))),
                                          ]))
                                        ]),
                                  ]))
                              : allPostData[allPostIndex]["post_type"] ==
                                      "businessideas"
                                  ? Container(
                                      decoration: BoxDecoration(
                                        borderRadius: BorderRadius.all(
                                            Radius.circular(10)),
                                        image: DecorationImage(
                                            colorFilter: new ColorFilter.mode(
                                                Colors.black.withOpacity(0.3),
                                                BlendMode.dstATop),
                                            image: AssetImage(
                                                allBIdeasPostData[i]["theme"]),
                                            fit: BoxFit.cover),
                                      ),
                                      width: 460,
                                      margin: EdgeInsets.fromLTRB(10, 10, 0, 2),
                                      child: Padding(
                                        padding: const EdgeInsets.all(10.0),
                                        child: Column(
                                          children: [
                                            SizedBox(
                                              height: 3,
                                            ),
                                            Container(
                                              margin:
                                                  EdgeInsets.only(bottom: 17),
                                              width: 400,
                                              child: Row(
                                                mainAxisAlignment:
                                                    MainAxisAlignment.start,
                                                children: [
                                                  Text(
                                                    "Title : ",
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.w700,
                                                    ),
                                                  ),
                                                  Text(
                                                    allBIdeasPostData[i]
                                                        ["title"],
                                                    style: TextStyle(
                                                      fontFamily: 'Nunito Sans',
                                                      fontSize: 14,
                                                      fontWeight:
                                                          FontWeight.w500,
                                                    ),
                                                  ),
                                                ],
                                              ),
                                            ),
                                            SizedBox(
                                              height: 17,
                                            ),
                                            Container(
                                              margin:
                                                  EdgeInsets.only(bottom: 17),
                                              width: 400,
                                              child: Row(
                                                  mainAxisAlignment:
                                                      MainAxisAlignment.end,
                                                  children: [
                                                    InkWell(
                                                      onTap: () {
                                                        setState(() {
                                                          isBIdeasPostExpanded[
                                                                  i] =
                                                              !isBIdeasPostExpanded[
                                                                  i];
                                                        });
                                                      },
                                                      child: Container(
                                                        child: Text(
                                                            isBIdeasPostExpanded[
                                                                        i] ==
                                                                    false
                                                                ? "....See more"
                                                                : "Hide",
                                                            style: TextStyle(
                                                                fontFamily:
                                                                    'Nunito Sans',
                                                                fontSize: 14,
                                                                fontWeight:
                                                                    FontWeight
                                                                        .w600,
                                                                color: Colors
                                                                    .blue)),
                                                      ),
                                                    )
                                                  ]),
                                            ),
                                            isBIdeasPostExpanded[i] == true
                                                ? Container(
                                                    child: Column(children: [
                                                    (allBIdeasPostData[i][
                                                                "identification"] !=
                                                            "")
                                                        ? Container(
                                                            margin:
                                                                EdgeInsets.only(
                                                                    bottom: 17),
                                                            width: 400,
                                                            child: Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              children: [
                                                                Text(
                                                                  "Identifiction of problem : ",
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w700,
                                                                  ),
                                                                ),
                                                                Container(
                                                                  width: 170,
                                                                  child: Text(
                                                                    allBIdeasPostData[
                                                                            i][
                                                                        "identification"],
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          14,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ),
                                                                  ),
                                                                ),
                                                              ],
                                                            ),
                                                          )
                                                        : SizedBox(),
                                                    (allBIdeasPostData[i]
                                                                ["solution"] !=
                                                            "")
                                                        ? Container(
                                                            margin:
                                                                EdgeInsets.only(
                                                                    bottom: 17),
                                                            child: Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              children: [
                                                                Text(
                                                                  "Solution to identified Problem : ",
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w700,
                                                                  ),
                                                                ),
                                                                Container(
                                                                  width: 170,
                                                                  child: Text(
                                                                    allBIdeasPostData[
                                                                            i][
                                                                        "solution"],
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          14,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ),
                                                                  ),
                                                                ),
                                                              ],
                                                            ),
                                                          )
                                                        : SizedBox(),
                                                    (allBIdeasPostData[i]
                                                                ["target"] !=
                                                            "")
                                                        ? Container(
                                                            width: 400,
                                                            margin:
                                                                EdgeInsets.only(
                                                                    bottom: 17),
                                                            child: Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              children: [
                                                                Text(
                                                                  "Target market : ",
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w700,
                                                                  ),
                                                                ),
                                                                Container(
                                                                  width: 250,
                                                                  child: Text(
                                                                    allBIdeasPostData[
                                                                            i][
                                                                        "target"],
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          14,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ),
                                                                  ),
                                                                ),
                                                              ],
                                                            ),
                                                          )
                                                        : SizedBox(),
                                                    (allBIdeasPostData[i][
                                                                "competitors"] !=
                                                            "")
                                                        ? Container(
                                                            width: 400,
                                                            margin:
                                                                EdgeInsets.only(
                                                                    bottom: 17),
                                                            child: Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              children: [
                                                                Text(
                                                                  "Competitors : ",
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w700,
                                                                  ),
                                                                ),
                                                                Container(
                                                                  width: 250,
                                                                  child: Text(
                                                                    allBIdeasPostData[
                                                                            i][
                                                                        "competitors"],
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          14,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ),
                                                                  ),
                                                                ),
                                                              ],
                                                            ),
                                                          )
                                                        : SizedBox(),
                                                    (allBIdeasPostData[i]
                                                                ["swot"] !=
                                                            "")
                                                        ? Container(
                                                            width: 400,
                                                            margin:
                                                                EdgeInsets.only(
                                                                    bottom: 17),
                                                            child: Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              children: [
                                                                Text(
                                                                  "SWOT Analysis : ",
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w700,
                                                                  ),
                                                                ),
                                                                Container(
                                                                  width: 250,
                                                                  child: Text(
                                                                    allBIdeasPostData[
                                                                            i][
                                                                        "swot"],
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          14,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ),
                                                                  ),
                                                                ),
                                                              ],
                                                            ),
                                                          )
                                                        : SizedBox(),
                                                    (allBIdeasPostData[i]
                                                                ["funds"] !=
                                                            "")
                                                        ? Container(
                                                            width: 400,
                                                            margin:
                                                                EdgeInsets.only(
                                                                    bottom: 17),
                                                            child: Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              children: [
                                                                Text(
                                                                  "Funds required : ",
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w700,
                                                                  ),
                                                                ),
                                                                Container(
                                                                  width: 250,
                                                                  child: Text(
                                                                    allBIdeasPostData[
                                                                            i][
                                                                        "funds"],
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          14,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ),
                                                                  ),
                                                                ),
                                                              ],
                                                            ),
                                                          )
                                                        : SizedBox(),
                                                    (allMembers != "")
                                                        ? Container(
                                                            width: 400,
                                                            margin:
                                                                EdgeInsets.only(
                                                                    bottom: 17),
                                                            child: Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              mainAxisSize:
                                                                  MainAxisSize
                                                                      .min,
                                                              children: [
                                                                Text(
                                                                  "Team members : ",
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w700,
                                                                  ),
                                                                ),
                                                                Container(
                                                                  width: 250,
                                                                  child: Text(
                                                                    allMembers,
                                                                    style:
                                                                        TextStyle(
                                                                      fontFamily:
                                                                          'Nunito Sans',
                                                                      fontSize:
                                                                          14,
                                                                      fontWeight:
                                                                          FontWeight
                                                                              .w500,
                                                                    ),
                                                                  ),
                                                                ),
                                                              ],
                                                            ),
                                                          )
                                                        : SizedBox(),
                                                    (allBIdeasPostData[i][
                                                                "documentlist_id"] !=
                                                            "")
                                                        ? Row(
                                                            children: [
                                                              Text(
                                                                "Attachments :    ",
                                                                style:
                                                                    TextStyle(
                                                                  fontFamily:
                                                                      'Nunito Sans',
                                                                  fontSize: 14,
                                                                  fontWeight:
                                                                      FontWeight
                                                                          .w700,
                                                                ),
                                                              ),
                                                              IconButton(
                                                                  onPressed:
                                                                      () {
                                                                    _launchInBrowser(
                                                                        selectedImages[
                                                                            0]);
                                                                  },
                                                                  icon: Icon(Icons
                                                                      .file_download)),
                                                            ],
                                                          )
                                                        : SizedBox()
                                                  ]))
                                                : SizedBox()
                                          ],
                                        ),
                                      ))
                                  : allPostData[allPostIndex]["post_type"] ==
                                          "projectdiscuss"
                                      ? Container(
                                          padding: EdgeInsets.all(10),
                                          decoration: BoxDecoration(
                                              color: Color.fromRGBO(
                                                  242, 246, 248, 1),
                                              borderRadius:
                                                  BorderRadius.circular(10)),
                                          width: 450,
                                          child: Column(children: [
                                            Container(
                                                width: 400,
                                                child: Text(
                                                    allProjectsPostData[i]
                                                        ["content"])),
                                            SizedBox(
                                              height: 5,
                                            ),
                                            Container(
                                                decoration: BoxDecoration(
                                                  borderRadius:
                                                      BorderRadius.all(
                                                          Radius.circular(10)),
                                                  image: DecorationImage(
                                                      colorFilter:
                                                          new ColorFilter.mode(
                                                              Colors.black
                                                                  .withOpacity(
                                                                      0.3),
                                                              BlendMode
                                                                  .dstATop),
                                                      image: AssetImage(
                                                          allProjectsPostData[i]
                                                              ["theme"]),
                                                      fit: BoxFit.cover),
                                                ),
                                                width: 450,
                                                margin: EdgeInsets.fromLTRB(
                                                    10, 10, 0, 2),
                                                child: Padding(
                                                  padding: const EdgeInsets.all(
                                                      10.0),
                                                  child: Column(
                                                    children: [
                                                      SizedBox(
                                                        height: 3,
                                                      ),
                                                      Row(
                                                        mainAxisAlignment:
                                                            MainAxisAlignment
                                                                .start,
                                                        children: [
                                                          Text(
                                                            "Title : ",
                                                            style: TextStyle(
                                                              fontFamily:
                                                                  'Nunito Sans',
                                                              fontSize: 14,
                                                              fontWeight:
                                                                  FontWeight
                                                                      .w700,
                                                            ),
                                                          ),
                                                          Text(
                                                            allProjectsPostData[
                                                                i]["title"],
                                                            style: TextStyle(
                                                              fontFamily:
                                                                  'Nunito Sans',
                                                              fontSize: 14,
                                                              fontWeight:
                                                                  FontWeight
                                                                      .w500,
                                                            ),
                                                          ),
                                                        ],
                                                      ),
                                                      SizedBox(
                                                        height: 4,
                                                      ),
                                                      Row(
                                                        mainAxisAlignment:
                                                            MainAxisAlignment
                                                                .start,
                                                        children: [
                                                          Text(
                                                            "Class : ",
                                                            style: TextStyle(
                                                              fontFamily:
                                                                  'Nunito Sans',
                                                              fontSize: 14,
                                                              fontWeight:
                                                                  FontWeight
                                                                      .w700,
                                                            ),
                                                          ),
                                                          Text(
                                                            allProjectsPostData[
                                                                i]["grade"],
                                                            style: TextStyle(
                                                              fontFamily:
                                                                  'Nunito Sans',
                                                              fontSize: 14,
                                                              fontWeight:
                                                                  FontWeight
                                                                      .w500,
                                                            ),
                                                          ),
                                                        ],
                                                      ),
                                                      SizedBox(
                                                        height: 4,
                                                      ),
                                                      Row(
                                                        mainAxisAlignment:
                                                            MainAxisAlignment
                                                                .start,
                                                        children: [
                                                          Text(
                                                            "Subject : ",
                                                            style: TextStyle(
                                                              fontFamily:
                                                                  'Nunito Sans',
                                                              fontSize: 14,
                                                              fontWeight:
                                                                  FontWeight
                                                                      .w700,
                                                            ),
                                                          ),
                                                          Text(
                                                            allProjectsPostData[
                                                                i]["subject"],
                                                            style: TextStyle(
                                                              fontFamily:
                                                                  'Nunito Sans',
                                                              fontSize: 14,
                                                              fontWeight:
                                                                  FontWeight
                                                                      .w500,
                                                            ),
                                                          ),
                                                        ],
                                                      ),
                                                      SizedBox(
                                                        height: 4,
                                                      ),
                                                      allProjectsPostData[i]
                                                                  ["topic"] !=
                                                              ""
                                                          ? Row(
                                                              mainAxisAlignment:
                                                                  MainAxisAlignment
                                                                      .start,
                                                              children: [
                                                                Text(
                                                                  "Topic : ",
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w700,
                                                                  ),
                                                                ),
                                                                Text(
                                                                  allProjectsPostData[
                                                                          i]
                                                                      ["topic"],
                                                                  style:
                                                                      TextStyle(
                                                                    fontFamily:
                                                                        'Nunito Sans',
                                                                    fontSize:
                                                                        14,
                                                                    fontWeight:
                                                                        FontWeight
                                                                            .w500,
                                                                  ),
                                                                ),
                                                              ],
                                                            )
                                                          : SizedBox(),
                                                      isProjectPostExpanded[
                                                                  i] ==
                                                              true
                                                          ? Container(
                                                              child: Column(
                                                                  children: [
                                                                  SizedBox(
                                                                    height: 10,
                                                                  ),
                                                                  Row(
                                                                    mainAxisAlignment:
                                                                        MainAxisAlignment
                                                                            .start,
                                                                    crossAxisAlignment:
                                                                        CrossAxisAlignment
                                                                            .start,
                                                                    children: [
                                                                      Text(
                                                                        "Content : ",
                                                                        style:
                                                                            TextStyle(
                                                                          fontFamily:
                                                                              'Nunito Sans',
                                                                          fontSize:
                                                                              14,
                                                                          fontWeight:
                                                                              FontWeight.w700,
                                                                        ),
                                                                      ),
                                                                      Container(
                                                                        width:
                                                                            300,
                                                                        child:
                                                                            Text(
                                                                          allProjectsPostData[i]
                                                                              [
                                                                              "content"],
                                                                          style:
                                                                              TextStyle(
                                                                            fontFamily:
                                                                                'Nunito Sans',
                                                                            fontSize:
                                                                                14,
                                                                            fontWeight:
                                                                                FontWeight.w500,
                                                                          ),
                                                                        ),
                                                                      ),
                                                                    ],
                                                                  ),
                                                                  SizedBox(
                                                                    height: 10,
                                                                  ),
                                                                  allProjectsPostData[i]["requirements"]
                                                                              .toString() !=
                                                                          ""
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.start,
                                                                          crossAxisAlignment:
                                                                              CrossAxisAlignment.start,
                                                                          children: [
                                                                            Text(
                                                                              "requirements : ",
                                                                              style: TextStyle(
                                                                                fontFamily: 'Nunito Sans',
                                                                                fontSize: 14,
                                                                                fontWeight: FontWeight.w700,
                                                                              ),
                                                                            ),
                                                                            allProjectsPostData[i]["requirements"].toString().length > 5
                                                                                ? allProjectsPostData[i]["requirements"].toString().substring(0, 5) != "latex"
                                                                                    ? Container(
                                                                                        width: 300,
                                                                                        child: Text(
                                                                                          allProjectsPostData[i]["requirements"],
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 14,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                    : Container(
                                                                                        height: 110,
                                                                                        width: 300,
                                                                                        child: TeXView(
                                                                                          child: TeXViewColumn(children: [
                                                                                            TeXViewDocument(allProjectsPostData[i]["requirements"].toString().substring(6),
                                                                                                style: TeXViewStyle(
                                                                                                  fontStyle: TeXViewFontStyle(fontSize: 10, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                  padding: TeXViewPadding.all(10),
                                                                                                )),
                                                                                          ]),
                                                                                          style: TeXViewStyle(
                                                                                            elevation: 10,
                                                                                            backgroundColor: Colors.transparent,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                : Container(
                                                                                    width: 300,
                                                                                    child: Text(
                                                                                      allProjectsPostData[i]["requirements"],
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      ),
                                                                                    ),
                                                                                  ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                    height: 10,
                                                                  ),
                                                                  allProjectsPostData[i]["purchasedfrom"]
                                                                              .toString() !=
                                                                          ""
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.start,
                                                                          crossAxisAlignment:
                                                                              CrossAxisAlignment.start,
                                                                          children: [
                                                                            Text(
                                                                              "Purchaed from : ",
                                                                              style: TextStyle(
                                                                                fontFamily: 'Nunito Sans',
                                                                                fontSize: 14,
                                                                                fontWeight: FontWeight.w700,
                                                                              ),
                                                                            ),
                                                                            allProjectsPostData[i]["purchasedfrom"].toString().length > 5
                                                                                ? allProjectsPostData[i]["purchasedfrom"].toString().substring(0, 5) != "latex"
                                                                                    ? Container(
                                                                                        width: 300,
                                                                                        child: Text(
                                                                                          allProjectsPostData[i]["purchasedfrom"],
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 14,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                    : Container(
                                                                                        height: 110,
                                                                                        width: 300,
                                                                                        child: TeXView(
                                                                                          child: TeXViewColumn(children: [
                                                                                            TeXViewDocument(allProjectsPostData[i]["purchasedfrom"].toString().substring(6),
                                                                                                style: TeXViewStyle(
                                                                                                  fontStyle: TeXViewFontStyle(fontSize: 10, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                  padding: TeXViewPadding.all(10),
                                                                                                )),
                                                                                          ]),
                                                                                          style: TeXViewStyle(
                                                                                            elevation: 10,
                                                                                            backgroundColor: Colors.transparent,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                : Container(
                                                                                    width: 300,
                                                                                    child: Text(
                                                                                      allProjectsPostData[i]["purchasedfrom"],
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      ),
                                                                                    ),
                                                                                  ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                    height: 10,
                                                                  ),
                                                                  allProjectsPostData[i]["procedure_"]
                                                                              .toString() !=
                                                                          ""
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.start,
                                                                          crossAxisAlignment:
                                                                              CrossAxisAlignment.start,
                                                                          children: [
                                                                            Text(
                                                                              "Procedure : ",
                                                                              style: TextStyle(
                                                                                fontFamily: 'Nunito Sans',
                                                                                fontSize: 14,
                                                                                fontWeight: FontWeight.w700,
                                                                              ),
                                                                            ),
                                                                            allProjectsPostData[i]["procedure_"].toString().length > 5
                                                                                ? allProjectsPostData[i]["procedure_"].toString().substring(0, 5) != "latex"
                                                                                    ? Container(
                                                                                        width: 300,
                                                                                        child: Text(
                                                                                          allProjectsPostData[i]["procedure_"],
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 14,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                    : Container(
                                                                                        height: 110,
                                                                                        width: 300,
                                                                                        child: TeXView(
                                                                                          child: TeXViewColumn(children: [
                                                                                            TeXViewDocument(allProjectsPostData[i]["procedure_"].toString().substring(6),
                                                                                                style: TeXViewStyle(
                                                                                                  fontStyle: TeXViewFontStyle(fontSize: 10, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                  padding: TeXViewPadding.all(10),
                                                                                                )),
                                                                                          ]),
                                                                                          style: TeXViewStyle(
                                                                                            elevation: 10,
                                                                                            backgroundColor: Colors.transparent,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                : Container(
                                                                                    width: 300,
                                                                                    child: Text(
                                                                                      allProjectsPostData[i]["procedure_"],
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      ),
                                                                                    ),
                                                                                  ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                    height: 10,
                                                                  ),
                                                                  allProjectsPostData[i]["theory"]
                                                                              .toString() !=
                                                                          ""
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.start,
                                                                          crossAxisAlignment:
                                                                              CrossAxisAlignment.start,
                                                                          children: [
                                                                            Text(
                                                                              "Theory : ",
                                                                              style: TextStyle(
                                                                                fontFamily: 'Nunito Sans',
                                                                                fontSize: 14,
                                                                                fontWeight: FontWeight.w700,
                                                                              ),
                                                                            ),
                                                                            allProjectsPostData[i]["theory"].toString().length > 5
                                                                                ? allProjectsPostData[i]["theory"].toString().substring(0, 5) != "latex"
                                                                                    ? Container(
                                                                                        width: 300,
                                                                                        child: Text(
                                                                                          allProjectsPostData[i]["theory"],
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 14,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                    : Container(
                                                                                        height: 110,
                                                                                        width: 300,
                                                                                        child: TeXView(
                                                                                          child: TeXViewColumn(children: [
                                                                                            TeXViewDocument(allProjectsPostData[i]["theory"].toString().substring(6),
                                                                                                style: TeXViewStyle(
                                                                                                  fontStyle: TeXViewFontStyle(fontSize: 10, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                  padding: TeXViewPadding.all(10),
                                                                                                )),
                                                                                          ]),
                                                                                          style: TeXViewStyle(
                                                                                            elevation: 10,
                                                                                            backgroundColor: Colors.transparent,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                : Container(
                                                                                    width: 300,
                                                                                    child: Text(
                                                                                      allProjectsPostData[i]["theory"],
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      ),
                                                                                    ),
                                                                                  ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                    height: 10,
                                                                  ),
                                                                  allProjectsPostData[i]["findings"]
                                                                              .toString() !=
                                                                          ""
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.start,
                                                                          crossAxisAlignment:
                                                                              CrossAxisAlignment.start,
                                                                          children: [
                                                                            Text(
                                                                              "Findings : ",
                                                                              style: TextStyle(
                                                                                fontFamily: 'Nunito Sans',
                                                                                fontSize: 14,
                                                                                fontWeight: FontWeight.w700,
                                                                              ),
                                                                            ),
                                                                            allProjectsPostData[i]["findings"].toString().length > 5
                                                                                ? allProjectsPostData[i]["findings"].toString().substring(0, 5) != "latex"
                                                                                    ? Container(
                                                                                        width: 300,
                                                                                        child: Text(
                                                                                          allProjectsPostData[i]["findings"],
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 14,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                    : Container(
                                                                                        height: 110,
                                                                                        width: 300,
                                                                                        child: TeXView(
                                                                                          child: TeXViewColumn(children: [
                                                                                            TeXViewDocument(allProjectsPostData[i]["findings"].toString().substring(6),
                                                                                                style: TeXViewStyle(
                                                                                                  fontStyle: TeXViewFontStyle(fontSize: 10, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                  padding: TeXViewPadding.all(10),
                                                                                                )),
                                                                                          ]),
                                                                                          style: TeXViewStyle(
                                                                                            elevation: 10,
                                                                                            backgroundColor: Colors.transparent,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                : Container(
                                                                                    width: 300,
                                                                                    child: Text(
                                                                                      allProjectsPostData[i]["findings"],
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      ),
                                                                                    ),
                                                                                  ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                    height: 10,
                                                                  ),
                                                                  allProjectsPostData[i]["similartheory"]
                                                                              .toString() !=
                                                                          ""
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.start,
                                                                          crossAxisAlignment:
                                                                              CrossAxisAlignment.start,
                                                                          children: [
                                                                            Text(
                                                                              "Similar Projects : ",
                                                                              style: TextStyle(
                                                                                fontFamily: 'Nunito Sans',
                                                                                fontSize: 14,
                                                                                fontWeight: FontWeight.w700,
                                                                              ),
                                                                            ),
                                                                            allProjectsPostData[i]["similartheory"].toString().length > 5
                                                                                ? allProjectsPostData[i]["similartheory"].toString().substring(0, 5) != "latex"
                                                                                    ? Container(
                                                                                        width: 300,
                                                                                        child: Text(
                                                                                          allProjectsPostData[i]["similartheory"],
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 14,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                    : Container(
                                                                                        height: 110,
                                                                                        width: 300,
                                                                                        child: TeXView(
                                                                                          child: TeXViewColumn(children: [
                                                                                            TeXViewDocument(allProjectsPostData[i]["similartheory"].toString().substring(6),
                                                                                                style: TeXViewStyle(
                                                                                                  fontStyle: TeXViewFontStyle(fontSize: 10, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                  padding: TeXViewPadding.all(10),
                                                                                                )),
                                                                                          ]),
                                                                                          style: TeXViewStyle(
                                                                                            elevation: 10,
                                                                                            backgroundColor: Colors.transparent,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                : Container(
                                                                                    width: 300,
                                                                                    child: Text(
                                                                                      allProjectsPostData[i]["similartheory"],
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      ),
                                                                                    ),
                                                                                  ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                    height: 10,
                                                                  ),
                                                                  allProjectsPostData[i]["summarydoc"]
                                                                              .toString() !=
                                                                          ""
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.start,
                                                                          crossAxisAlignment:
                                                                              CrossAxisAlignment.start,
                                                                          children: [
                                                                            Text(
                                                                              "Briefs and insights : ",
                                                                              style: TextStyle(
                                                                                fontFamily: 'Nunito Sans',
                                                                                fontSize: 14,
                                                                                fontWeight: FontWeight.w700,
                                                                              ),
                                                                            ),
                                                                            allProjectsPostData[i]["summarydoc"].toString().length > 5
                                                                                ? allProjectsPostData[i]["summarydoc"].toString().substring(0, 5) != "latex"
                                                                                    ? Container(
                                                                                        width: 300,
                                                                                        child: Text(
                                                                                          allProjectsPostData[i]["summarydoc"],
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 14,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                    : Container(
                                                                                        height: 110,
                                                                                        width: 300,
                                                                                        child: TeXView(
                                                                                          child: TeXViewColumn(children: [
                                                                                            TeXViewDocument(allProjectsPostData[i]["summarydoc"].toString().substring(6),
                                                                                                style: TeXViewStyle(
                                                                                                  fontStyle: TeXViewFontStyle(fontSize: 10, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                  padding: TeXViewPadding.all(10),
                                                                                                )),
                                                                                          ]),
                                                                                          style: TeXViewStyle(
                                                                                            elevation: 10,
                                                                                            backgroundColor: Colors.transparent,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                : Container(
                                                                                    width: 300,
                                                                                    child: Text(
                                                                                      allProjectsPostData[i]["summarydoc"],
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      ),
                                                                                    ),
                                                                                  ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                    height: 10,
                                                                  ),
                                                                  allProjectsPostData[i]["otherdoc"]
                                                                              .toString() !=
                                                                          ""
                                                                      ? Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.start,
                                                                          crossAxisAlignment:
                                                                              CrossAxisAlignment.start,
                                                                          children: [
                                                                            Text(
                                                                              "References : ",
                                                                              style: TextStyle(
                                                                                fontFamily: 'Nunito Sans',
                                                                                fontSize: 14,
                                                                                fontWeight: FontWeight.w700,
                                                                              ),
                                                                            ),
                                                                            allProjectsPostData[i]["otherdoc"].toString().length > 5
                                                                                ? allProjectsPostData[i]["otherdoc"].toString().substring(0, 5) != "latex"
                                                                                    ? Container(
                                                                                        width: 300,
                                                                                        child: Text(
                                                                                          allProjectsPostData[i]["otherdoc"],
                                                                                          style: TextStyle(
                                                                                            fontFamily: 'Nunito Sans',
                                                                                            fontSize: 14,
                                                                                            fontWeight: FontWeight.w500,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                    : Container(
                                                                                        height: 110,
                                                                                        width: 300,
                                                                                        child: TeXView(
                                                                                          child: TeXViewColumn(children: [
                                                                                            TeXViewDocument(allProjectsPostData[i]["otherdoc"].toString().substring(6),
                                                                                                style: TeXViewStyle(
                                                                                                  fontStyle: TeXViewFontStyle(fontSize: 10, sizeUnit: TeXViewSizeUnit.pt),
                                                                                                  padding: TeXViewPadding.all(10),
                                                                                                )),
                                                                                          ]),
                                                                                          style: TeXViewStyle(
                                                                                            elevation: 10,
                                                                                            backgroundColor: Colors.transparent,
                                                                                          ),
                                                                                        ),
                                                                                      )
                                                                                : Container(
                                                                                    width: 300,
                                                                                    child: Text(
                                                                                      allProjectsPostData[i]["otherdoc"],
                                                                                      style: TextStyle(
                                                                                        fontFamily: 'Nunito Sans',
                                                                                        fontSize: 14,
                                                                                        fontWeight: FontWeight.w500,
                                                                                      ),
                                                                                    ),
                                                                                  ),
                                                                          ],
                                                                        )
                                                                      : SizedBox(),
                                                                ]))
                                                          : SizedBox(),
                                                      SizedBox(
                                                        height: 17,
                                                      ),
                                                      Row(
                                                          mainAxisAlignment:
                                                              MainAxisAlignment
                                                                  .spaceBetween,
                                                          children: [
                                                            Container(
                                                                child: Row(
                                                                    children: [
                                                                  (allProjectsPostData[i]
                                                                              [
                                                                              "projectvideourl"] !=
                                                                          null)
                                                                      ? InkWell(
                                                                          onTap:
                                                                              () {
                                                                            playVideo('http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_30fps_normal.mp4');
                                                                          },
                                                                          child:
                                                                              Material(
                                                                            elevation:
                                                                                1,
                                                                            borderRadius:
                                                                                BorderRadius.circular(5),
                                                                            child: Container(
                                                                                padding: EdgeInsets.all(4),
                                                                                decoration: BoxDecoration(borderRadius: BorderRadius.circular(5), color: Color(0xFFE9A81D)),
                                                                                child: Center(child: Icon(Icons.play_arrow, color: Colors.white, size: 15))),
                                                                          ),
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                      width: 5),
                                                                  (allProjectsPostData[i]
                                                                              [
                                                                              "reqvideourl"] !=
                                                                          null)
                                                                      ? InkWell(
                                                                          onTap:
                                                                              () {
                                                                            playVideo('http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_30fps_normal.mp4');
                                                                          },
                                                                          child:
                                                                              Material(
                                                                            elevation:
                                                                                1,
                                                                            borderRadius:
                                                                                BorderRadius.circular(5),
                                                                            child: Container(
                                                                                padding: EdgeInsets.all(4),
                                                                                decoration: BoxDecoration(borderRadius: BorderRadius.circular(5), color: Color(0xFFE9A81D)),
                                                                                child: Center(child: Icon(Icons.play_arrow, color: Colors.white, size: 15))),
                                                                          ),
                                                                        )
                                                                      : SizedBox(),
                                                                  SizedBox(
                                                                      width: 5),
                                                                  (allProjectsPostData[i]
                                                                              [
                                                                              "otherdoc"] !=
                                                                          null)
                                                                      ? InkWell(
                                                                          onTap:
                                                                              () {
                                                                            playVideo('http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_30fps_normal.mp4');
                                                                          },
                                                                          child:
                                                                              Material(
                                                                            elevation:
                                                                                1,
                                                                            borderRadius:
                                                                                BorderRadius.circular(5),
                                                                            child: Container(
                                                                                padding: EdgeInsets.all(4),
                                                                                decoration: BoxDecoration(
                                                                                  borderRadius: BorderRadius.circular(5),
                                                                                  // color: Color(0xFFE9A81D)
                                                                                ),
                                                                                child: Center(child: Icon(Icons.picture_as_pdf, color: Colors.red, size: 15))),
                                                                          ),
                                                                        )
                                                                      : SizedBox()
                                                                ])),
                                                            InkWell(
                                                              onTap: () {
                                                                setState(() {
                                                                  isProjectPostExpanded[
                                                                          i] =
                                                                      !isProjectPostExpanded[
                                                                          i];
                                                                });
                                                              },
                                                              child: Container(
                                                                child: Text(
                                                                    isProjectPostExpanded[
                                                                                i] ==
                                                                            false
                                                                        ? "....See More"
                                                                        : "....hide",
                                                                    style: TextStyle(
                                                                        fontFamily:
                                                                            'Nunito Sans',
                                                                        fontSize:
                                                                            14,
                                                                        fontWeight:
                                                                            FontWeight
                                                                                .w600,
                                                                        color: Colors
                                                                            .blue)),
                                                              ),
                                                            )
                                                          ])
                                                    ],
                                                  ),
                                                )),
                                          ]))
                                      : SizedBox(),
                    ],
                  ),
                ),
              );
            }));
  }

  List<String> uploadFilesURLList = [];
  List<String> uploadFilesNameList = [];
  List<String> uploadFilesExtList = [];
  void _uploadFiles(BuildContext context) async {
    FilePickerResult? result =
        await FilePicker.platform.pickFiles(allowMultiple: true);

    if (result != null) {
      Dialogs.showLoadingDialog(context, _keyLoader);
      print("Total Fies to Uploads: ${result.files.length}");
      for (int i = 0; i < result.files.length; i++) {
        double checkProgress = 0.0;
        print(result.files[i].name);
        Uint8List? file = result.files[i].bytes;
        String fileName = result.files[i].name;
        uploadFilesNameList.add(fileName);
        uploadFilesExtList.add((result.files[i].extension).toString());
        UploadTask task = FirebaseStorage.instance
            .ref()
            .child("userUploads/$_currentUserId/$fileName")
            .putData(file!);

        task.snapshotEvents.listen((event) async {
          setState(() {
            checkProgress = ((event.bytesTransferred.toDouble() /
                        event.totalBytes.toDouble()) *
                    100)
                .roundToDouble();
          });
          if (checkProgress == 100) {
            String downloadURL = await FirebaseStorage.instance
                .ref("userUploads/$_currentUserId/$fileName")
                .getDownloadURL();
            if (downloadURL != null) {
              Navigator.of(_keyLoader.currentContext!, rootNavigator: true)
                  .pop(); //close the dialoge
              setState(() {
                uploadFilesURLList.add(downloadURL);
              });
              if (i == result.files.length - 1) {
                ElegantNotification.success(
                  title: Text("Congrats,"),
                  description: Text("You attached file successfully."),
                );
              }
            }
          }
        });
      }
      Navigator.of(context).pop();
      _addSocialPostDialog();
    }
  }

  void _showDiscardDialog() {
    AlertDialog alertDialog = AlertDialog(
        backgroundColor: Color(0xFFFFFFFF),
        shape:
            RoundedRectangleBorder(borderRadius: BorderRadius.circular(20.0)),
        content: Container(
          height: 180,
          child: Column(
            children: [
              SizedBox(
                height: 20,
              ),
              Text(
                'Save this post as a draft?',
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 16,
                  color: Colors.black87,
                  fontWeight: FontWeight.w800,
                ),
              ),
              Text(
                'If you discard now, you\'ll lose this post.',
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 13,
                  color: Colors.black87,
                  fontWeight: FontWeight.w400,
                ),
              ),
              SizedBox(
                height: 10,
              ),
              Container(height: 1, color: Colors.black26),
              SizedBox(
                height: 10,
              ),
              InkWell(
                onTap: () {},
                child: Container(
                  child: Text(
                    'Save Draft',
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 14,
                      color: Color.fromRGBO(88, 165, 196, 1),
                      fontWeight: FontWeight.w600,
                    ),
                  ),
                ),
              ),
              SizedBox(
                height: 10,
              ),
              Container(height: 1, color: Colors.black26),
              SizedBox(
                height: 10,
              ),
              InkWell(
                onTap: () {},
                child: Container(
                  child: Text(
                    'Discard Post',
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 14,
                      color: Colors.red,
                      fontWeight: FontWeight.w600,
                    ),
                  ),
                ),
              ),
              SizedBox(
                height: 10,
              ),
              Container(height: 1, color: Colors.black26),
              SizedBox(
                height: 10,
              ),
              InkWell(
                onTap: () {
                  Navigator.pop(context);
                },
                child: Container(
                  child: Text(
                    'Keep Editing',
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 14,
                      color: Color.fromRGBO(88, 165, 196, 1),
                      fontWeight: FontWeight.w600,
                    ),
                  ),
                ),
              ),
              SizedBox(
                height: 10,
              ),
              Container(height: 1, color: Colors.black26),
            ],
          ),
        ));
    showDialog(
        context: context,
        barrierDismissible: false,
        builder: (_) => alertDialog);
  }

  _chooseHeaderAccordingToMood(
      String mood, int i, List selectedUserName, List selectedUserID) {
    String gender = userDataDB!.get("gender") == "MALE" ? "him" : "her";
    if ((mood != "projectdiscuss") &&
        (mood != "businessideas") &&
        ((mood != "podcast")) &&
        ((mood != "blog"))) {
      if (mood == "") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + userDataDB!.get("city"),
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${userDataDB!.get("school_name")}" +
                    ", " +
                    "Grade " +
                    userDataDB!.get("grade").toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
            ],
          ),
        );
      } else if (mood == "Excited") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + userDataDB!.get("city"),
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${userDataDB!.get("school_name")}" +
                    ", " +
                    "Grade " +
                    userDataDB!.get("grade").toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              RichText(
                text: TextSpan(
                    text: "is feeling ",
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 12,
                      color: Color.fromRGBO(0, 0, 0, 0.7),
                      fontWeight: FontWeight.w400,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: 'excited ',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.8),
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: 'with ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 1))
                          ? TextSpan(
                              text: ' and ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} others',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length == 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} other',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "Good") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + userDataDB!.get("city"),
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${userDataDB!.get("school_name")}" +
                    ", " +
                    "Grade " +
                    userDataDB!.get("grade").toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              RichText(
                text: TextSpan(
                    text: "is feeling ",
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 12,
                      color: Color.fromRGBO(0, 0, 0, 0.7),
                      fontWeight: FontWeight.w400,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: 'good ',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.8),
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: 'with ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 1))
                          ? TextSpan(
                              text: ' and ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} others',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length == 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} other',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "Need people around me") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + userDataDB!.get("city"),
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${userDataDB!.get("school_name")}" +
                    ", " +
                    "Grade " +
                    userDataDB!.get("grade").toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              Row(
                children: [
                  RichText(
                    text: TextSpan(
                      text: 'need people around ${gender} ',
                      style: TextStyle(
                        fontFamily: 'Nunito Sans',
                        fontSize: 12,
                        color: Color.fromRGBO(0, 0, 0, 0.8),
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                  ),
                  Image.network(
                      "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fgroup.png?alt=media&token=3d1de769-bf7c-46cb-9b46-0ddbaa49a049",
                      height: 20,
                      width: 20),
                ],
              ),
              Row(
                children: [
                  ((selectedUserName != null) && (selectedUserName.length > 0))
                      ? Icon(FontAwesome5.user_tag,
                          size: 10, color: Color.fromRGBO(0, 0, 0, 0.8))
                      : SizedBox(),
                  SizedBox(width: 5),
                  RichText(
                      text: ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                              children: <TextSpan>[
                                  ((selectedUserName != null) &&
                                          (selectedUserName.length > 1))
                                      ? TextSpan(
                                          text: ' and ',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 12,
                                            color: Color.fromRGBO(0, 0, 0, 0.7),
                                            fontWeight: FontWeight.w400,
                                          ),
                                        )
                                      : TextSpan(),
                                  ((selectedUserName != null) &&
                                          (selectedUserName.length > 2))
                                      ? TextSpan(
                                          text:
                                              '${selectedUserName.length - 1} others',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 12,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            fontWeight: FontWeight.bold,
                                          ),
                                        )
                                      : TextSpan(),
                                  ((selectedUserName != null) &&
                                          (selectedUserName.length == 2))
                                      ? TextSpan(
                                          text:
                                              '${selectedUserName.length - 1} other',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 12,
                                            color: Color.fromRGBO(0, 0, 0, 0.8),
                                            fontWeight: FontWeight.bold,
                                          ),
                                        )
                                      : TextSpan(),
                                ])
                          : TextSpan()),
                ],
              )
            ],
          ),
        );
      } else if (mood == "Certificate") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + userDataDB!.get("city"),
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${userDataDB!.get("school_name")}" +
                    ", " +
                    "Grade " +
                    userDataDB!.get("grade").toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              RichText(
                text: TextSpan(
                    text: "is celebrating her ",
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 12,
                      color: Color.fromRGBO(0, 0, 0, 0.7),
                      fontWeight: FontWeight.w400,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: 'achievement ',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.8),
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: 'with ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 1))
                          ? TextSpan(
                              text: ' and ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} others',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length == 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} other',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "Performance") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + userDataDB!.get("city"),
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${userDataDB!.get("school_name")}" +
                    ", " +
                    "Grade " +
                    userDataDB!.get("grade").toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              RichText(
                text: TextSpan(
                    text: "is celebrating her ",
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 12,
                      color: Color.fromRGBO(0, 0, 0, 0.7),
                      fontWeight: FontWeight.w400,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: 'performance ',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.8),
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: 'with ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 1))
                          ? TextSpan(
                              text: ' and ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} others',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length == 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} other',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "Friends") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ' + userDataDB!.get("city"),
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "${userDataDB!.get("school_name")}" +
                    ", " +
                    "Grade " +
                    userDataDB!.get("grade").toString(),
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
              RichText(
                text: TextSpan(
                    text: "is feeling ",
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 12,
                      color: Color.fromRGBO(0, 0, 0, 0.7),
                      fontWeight: FontWeight.w400,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: 'friends ',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.8),
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: 'with ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 0))
                          ? TextSpan(
                              text: selectedUserName[0],
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 1))
                          ? TextSpan(
                              text: ' and ',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.7),
                                fontWeight: FontWeight.w400,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length > 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} others',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                      ((selectedUserName != null) &&
                              (selectedUserName.length == 2))
                          ? TextSpan(
                              text: '${selectedUserName.length - 1} other',
                              style: TextStyle(
                                fontFamily: 'Nunito Sans',
                                fontSize: 12,
                                color: Color.fromRGBO(0, 0, 0, 0.8),
                                fontWeight: FontWeight.bold,
                              ),
                            )
                          : TextSpan(),
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "projectdiscuss") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: <TextSpan>[
                      TextSpan(
                        text: ', ${userDataDB!.get("city")},',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
              Text(
                "Bhikamchand Khandelwal Vidyalaya" + ", " + "Grade " + "9",
                style: TextStyle(
                  fontFamily: 'Nunito Sans',
                  fontSize: 12,
                  color: Color.fromRGBO(0, 0, 0, 0.7),
                  fontWeight: FontWeight.normal,
                ),
              ),
            ],
          ),
        );
      } else if (mood == "businessideas") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: const <TextSpan>[
                      TextSpan(
                        text: ' has Discussed a Business Idea',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "podcast") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: const <TextSpan>[
                      TextSpan(
                        text: ' hosted a Podcast.',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
            ],
          ),
        );
      } else if (mood == "blog") {
        return Container(
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              RichText(
                text: TextSpan(
                    text: userDataDB!.get("first_name") +
                        userDataDB!.get("last_name"),
                    style: TextStyle(
                      fontFamily: 'Nunito Sans',
                      fontSize: 15,
                      color: Color.fromRGBO(0, 0, 0, 0.8),
                      fontWeight: FontWeight.bold,
                    ),
                    children: const <TextSpan>[
                      TextSpan(
                        text: ' has created a Blog.',
                        style: TextStyle(
                          fontFamily: 'Nunito Sans',
                          fontSize: 12,
                          color: Color.fromRGBO(0, 0, 0, 0.7),
                          fontWeight: FontWeight.w500,
                        ),
                      )
                    ]),
              ),
            ],
          ),
        );
      }
    }
  }

  Future<void> _launchInBrowser(String url) async {
    if (await canLaunch(url)) {
      await launch(
        url,
        forceSafariVC: false,
        forceWebView: false,
      );
    } else {
      throw 'Could not launch $url';
    }
  }

  double progress = 0.0;
  List imageList = [];
  List videoList = [];

  void _pickFilesForBusinessIdea(BuildContext context, String forWhich) async {
    FilePickerResult? result = await FilePicker.platform.pickFiles();
    if (result != null) {
      Dialogs.showLoadingDialog(context, _keyLoader);
      Uint8List? _image = result.files.first.bytes;
      String fileName = result.files.first.name;

      if (_image != null) {
        UploadTask task = FirebaseStorage.instance
            .ref()
            .child("SocialFeedPost/images/$_currentUserId/$fileName")
            .putData(_image);

        task.snapshotEvents.listen((event) async {
          setState(() {
            progress = ((event.bytesTransferred.toDouble() /
                        event.totalBytes.toDouble()) *
                    100)
                .roundToDouble();
          });
          if (progress == 100) {
            String downloadURL = await FirebaseStorage.instance
                .ref("SocialFeedPost/images/$_currentUserId/$fileName")
                .getDownloadURL();
            if (downloadURL != null) {
              Navigator.of(_keyLoader.currentContext!, rootNavigator: true)
                  .pop(); //close the dialoge
              setState(() {
                imageList.add(downloadURL);
                progress = 0.0;
                businessFileUploaded = true;
              });
              Navigator.of(context).pop();
              ElegantNotification.success(
                title: Text("Congrats,"),
                description: Text("You attached image successfully."),
              );

              forWhich == "post"
                  ? _addSocialPostDialog()
                  : _addCommentDialogBox();
            }
          }
        });
      }
    }
  }

  void _pickImages(BuildContext context, String forWhich) async {
    FilePickerResult? result = await FilePicker.platform.pickFiles();
    if (result != null) {
      Dialogs.showLoadingDialog(context, _keyLoader);
      Uint8List? _image = result.files.first.bytes;
      String fileName = result.files.first.name;

      if (_image != null) {
        UploadTask task = FirebaseStorage.instance
            .ref()
            .child("SocialFeedPost/images/$_currentUserId/$fileName")
            .putData(_image);

        task.snapshotEvents.listen((event) async {
          setState(() {
            progress = ((event.bytesTransferred.toDouble() /
                        event.totalBytes.toDouble()) *
                    100)
                .roundToDouble();
          });
          if (progress == 100) {
            print(progress);
            String downloadURL = await FirebaseStorage.instance
                .ref("SocialFeedPost/images/$_currentUserId/$fileName")
                .getDownloadURL();
            if (downloadURL != null) {
              Navigator.of(_keyLoader.currentContext!, rootNavigator: true)
                  .pop(); //close the dialoge
              setState(() {
                print(downloadURL);
                imageList.add(downloadURL);
                progress = 0.0;
              });
              Navigator.of(context).pop();
              ElegantNotification.success(
                title: Text("Congrats,"),
                description: Text("You attached image successfully."),
              );

              forWhich == "post"
                  ? _addSocialPostDialog()
                  : _addCommentDialogBox();
            }
          }
        });
      }
    }
  }

  Widget buildGridView() {
    return imageList.length == 1
        ? InkWell(
            onLongPress: () {
              setState(() {
                if (imageList.length == imageList.length) {
                  // _showImageEditDialog(0);
                } else {
                  //  _checkbothImageArraylengthDialog();
                }
              });
            },
            onTap: () {
              // Navigator.push(
              //     context,
              //     MaterialPageRoute(
              //         builder: (context) =>
              //             SingleImageView(imageList[0].path, "AssetImage")));
            },
            child: Container(
              child: CachedNetworkImage(
                imageUrl: imageList[0],
                width: 300,
                fit: BoxFit.fitHeight,
                placeholder: (context, url) => Container(
                    width: 150,
                    height: 150,
                    child: Image.network(
                      "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                    )),
                errorWidget: (context, url, error) => Icon(Icons.error),
              ),
            ),
          )
        : Container(
            height: imageList.length > 3 ? (200 * (imageList.length / 3)) : 300,
            child: GridView.count(
              crossAxisCount: 3,
              children: List.generate(imageList.length, (index) {
                return InkWell(
                  onTap: () {
                    // Navigator.push(
                    //     context,
                    //     MaterialPageRoute(
                    //         builder: (context) => SingleImageView(
                    //             imageList[index].path, "AssetImage")));
                  },
                  onLongPress: () {
                    // if (imageList.length == finalImagesUrl.length) {
                    //   _showImageEditDialog(index);
                    // } else {
                    //   _checkbothImageArraylengthDialog();
                    // }
                  },
                  child: Container(
                    child: CachedNetworkImage(
                      imageUrl: imageList[index],
                      width: 300,
                      fit: BoxFit.fitHeight,
                      placeholder: (context, url) => Container(
                          width: 200,
                          height: 200,
                          child: Image.network(
                            "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Floadingimg.gif?alt=media&token=4ca910f2-c584-4b3a-bbcb-2f1c01d93f67",
                          )),
                      errorWidget: (context, url, error) => Icon(Icons.error),
                    ),
                  ),
                );
              }),
            ),
          );
  }

  void _pickVideos(BuildContext context, String forWhich) async {
    FilePickerResult? result = await FilePicker.platform.pickFiles();
    if (result != null) {
      Dialogs.showLoadingDialog(context, _keyLoader);

      Uint8List? file = result.files.first.bytes;
      String fileName = result.files.first.name;
      UploadTask task = FirebaseStorage.instance
          .ref()
          .child("SocialFeedPost/videos/$_currentUserId/$fileName")
          .putData(file!);

      task.snapshotEvents.listen((event) async {
        setState(() {
          progress = ((event.bytesTransferred.toDouble() /
                      event.totalBytes.toDouble()) *
                  100)
              .roundToDouble();
        });
        if (progress == 100) {
          print(progress);
          String downloadURL = await FirebaseStorage.instance
              .ref("SocialFeedPost/videos/$_currentUserId/$fileName")
              .getDownloadURL();
          if (downloadURL != null) {
            Navigator.of(_keyLoader.currentContext!, rootNavigator: true)
                .pop(); //close the dialoge
            setState(() {
              print(downloadURL);
              videoList.add(downloadURL);
              progress = 0.0;
            });
            Navigator.of(context).pop();
            ElegantNotification.success(
              title: Text("Congrats,"),
              description: Text("You attached video successfully."),
            );

            _addSocialPostDialog();
          }
        }
      });
    }
  }

//add comment

  String commentStep = "";
  String comment = '';
  List commentUserTag = [];
  int selectedPostIndexToComment = -1;

  void _addCommentDialogBox() {
    showDialog(
        context: context,
        barrierColor: Colors.grey.withOpacity(0.2),
        barrierDismissible: false,
        builder: (_) => StatefulBuilder(builder: (context, setState) {
              return AlertDialog(
                contentPadding: EdgeInsets.all(20),
                shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(10.0)),
                title: Column(
                  mainAxisSize: MainAxisSize.min,
                  children: [
                    Row(
                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
                      children: [
                        SizedBox(width: 30),
                        Text(
                          "Comment",
                          style: TextStyle(
                            fontSize: 20,
                            color: Color(0xCB000000),
                            fontWeight: FontWeight.w900,
                          ),
                        ),
                        IconButton(
                          onPressed: () {
                            comparedate = DateFormat('yyyyMMddkkmm')
                                .format(DateTime.now());
                            setState(() {
                              commentStep = "";
                              comment = "";
                              selectedPostIndexToComment = -1;
                              imageList = [];
                              videoList = [];
                              commentUserTag = [];
                            });
                            for (int k = 0; k < selectedUserflag.length; k++) {
                              setState(() {
                                selectedUserflag[k] = false;
                              });
                            }
                            Navigator.of(context).pop();
                          },
                          icon: Tab(
                              child: Icon(Icons.cancel_rounded,
                                  color: Colors.black45, size: 25)),
                        )
                      ],
                    ),
                    SizedBox(height: 20),
                    Container(height: 1, width: 500, color: Colors.grey[200]),
                  ],
                ),
                content: Container(
                  height: 470,
                  width: 500,
                  child: commentStep == ""
                      ? Column(
                          crossAxisAlignment: CrossAxisAlignment.stretch,
                          children: [
                            Expanded(
                              child: ListView(
                                physics: BouncingScrollPhysics(),
                                children: [
                                  SizedBox(
                                    height: 10,
                                  ),
                                  Row(
                                    mainAxisAlignment:
                                        MainAxisAlignment.spaceBetween,
                                    children: [
                                      SizedBox(width: 30),
                                      SizedBox(width: 30),
                                      InkWell(
                                        onTap: () async {
                                          if ((comment != "")) {
                                            Dialogs.showLoadingDialog(
                                                context, _keyLoader);
                                            comparedate =
                                                DateFormat('yyyyMMddkkmm')
                                                    .format(DateTime.now());
                                            String cmntID =
                                                "cmnt${_currentUserId}${comparedate}";
                                            String imgID =
                                                "imgcmntsm${_currentUserId}${comparedate}";
                                            String videoID =
                                                "vdocmntsm${_currentUserId}${comparedate}";
                                            String userTagID =
                                                "usrtgcmntsm${_currentUserId}${comparedate}";
                                            bool isImagesPosted = false;
                                            bool isVideosPosted = false;
                                            bool isUserTaggedPosted = false;
                                            bool isFinalPostDone = false;

                                            if (imageList.isNotEmpty) {
                                              for (int i = 0;
                                                  i < imageList.length;
                                                  i++) {
                                                isImagesPosted =
                                                    await networkCRUD
                                                        .addsmPostImageDetails([
                                                  imgID,
                                                  imageList[i]
                                                ]);
                                              }
                                            }
                                            if (videoList.isNotEmpty) {
                                              for (int i = 0;
                                                  i < videoList.length;
                                                  i++) {
                                                isVideosPosted =
                                                    await networkCRUD
                                                        .addsmPostVideoDetails([
                                                  videoID,
                                                  videoList[i],
                                                  ""
                                                ]);
                                              }
                                            }
                                            if (commentUserTag.isNotEmpty) {
                                              for (int i = 0;
                                                  i < commentUserTag.length;
                                                  i++) {
                                                isUserTaggedPosted =
                                                    await networkCRUD
                                                        .addsmPostUserTaggedDetails([
                                                  userTagID,
                                                  commentUserTag[i]
                                                ]);
                                              }
                                            }
                                            isFinalPostDone = await networkCRUD
                                                .addsmCommentPostDetails([
                                              cmntID,
                                              allPostData[
                                                      selectedPostIndexToComment]
                                                  ["post_id"],
                                              _currentUserId,
                                              comment,
                                              imageList.isNotEmpty ? imgID : "",
                                              videoList.isNotEmpty
                                                  ? videoID
                                                  : "",
                                              commentUserTag.isNotEmpty
                                                  ? userTagID
                                                  : "",
                                              0,
                                              0,
                                              comparedate
                                            ]);
                                            if (isFinalPostDone == true) {
                                              for (int k = 0;
                                                  k < selectedUserflag.length;
                                                  k++) {
                                                setState(() {
                                                  selectedUserflag[k] = false;
                                                });
                                              }
                                              _call_apis();
                                              ////////////////////////////notification//////////////////////////////////////
                                              String notify_id =
                                                  "ntf${allPostData[selectedPostIndexToComment]["post_id"]}$comparedate";
                                              notifyCRUD.sendNotification([
                                                notify_id,
                                                "commentpost",
                                                "social",
                                                _currentUserId,
                                                allPostData[
                                                        selectedPostIndexToComment]
                                                    ["user_id"],
                                                countData!.value[
                                                    "usertoken"][allPostData[
                                                        selectedPostIndexToComment]
                                                    ["user_id"]]["tokenid"],
                                                "You got one comment!",
                                                "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} commented on your post.",
                                                allPostData[
                                                        selectedPostIndexToComment]
                                                    ["user_id"],
                                                "allpost",
                                                "false",
                                                comparedate,
                                                "add"
                                              ]);
                                              //////////////////////////////////////////////////////////////////////////
                                              ElegantNotification.success(
                                                title: Text("Congrats,"),
                                                description: Text(
                                                    "Your comment posted successfully."),
                                              );
                                            } else {
                                              ElegantNotification.error(
                                                title: Text("Error..."),
                                                description:
                                                    Text("Sometning wrong."),
                                              );
                                            }
                                          }
                                          setState(() {
                                            commentStep = "";
                                            comment = "";
                                            selectedPostIndexToComment = -1;
                                            imageList = [];
                                            videoList = [];
                                            commentUserTag = [];
                                          });
                                          for (int k = 0;
                                              k < selectedUserflag.length;
                                              k++) {
                                            setState(() {
                                              selectedUserflag[k] = false;
                                            });
                                          }
                                          Navigator.of(
                                                  _keyLoader.currentContext!,
                                                  rootNavigator: true)
                                              .pop();
                                          Navigator.of(context).pop();
                                        },
                                        child: Container(
                                          margin: EdgeInsets.only(right: 10),
                                          padding: EdgeInsets.only(
                                              left: 8,
                                              right: 8,
                                              top: 5,
                                              bottom: 5),
                                          decoration: BoxDecoration(
                                              color: (comment != "")
                                                  ? Color.fromRGBO(
                                                      88, 165, 196, 1)
                                                  : Colors.black12,
                                              borderRadius:
                                                  BorderRadius.circular(3)),
                                          child: Text(
                                            (comment != "")
                                                ? 'Comment'
                                                : "Wait",
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 17,
                                              color: Colors.white,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      )
                                    ],
                                  ),
                                  SizedBox(
                                    height: 20,
                                  ),
                                  Container(
                                      padding: const EdgeInsets.only(
                                          left: (10.0),
                                          right: 10,
                                          top: 10,
                                          bottom: 10),
                                      margin: EdgeInsets.all(5),
                                      decoration: BoxDecoration(
                                          color:
                                              Color.fromRGBO(242, 246, 248, 1),
                                          borderRadius: BorderRadius.all(
                                              Radius.circular(20))),
                                      child: Column(
                                        children: [
                                          Row(
                                            mainAxisAlignment:
                                                MainAxisAlignment.spaceBetween,
                                            children: [
                                              Container(
                                                child: Row(
                                                  crossAxisAlignment:
                                                      CrossAxisAlignment.start,
                                                  children: [
                                                    InkWell(
                                                      onTap: () {},
                                                      child: CircleAvatar(
                                                        backgroundImage:
                                                            NetworkImage(
                                                                userDataDB!.get(
                                                                    "profilepic")),
                                                        radius: 22,
                                                      ),
                                                    ),
                                                    SizedBox(
                                                      width: 10,
                                                    ),
                                                    Container(
                                                      child: Column(
                                                        crossAxisAlignment:
                                                            CrossAxisAlignment
                                                                .start,
                                                        children: [
                                                          _chooseHeaderAccordingToMood(
                                                              "", 0, [], []),
                                                        ],
                                                      ),
                                                    ),
                                                  ],
                                                ),
                                              ),
                                            ],
                                          ),
                                          SizedBox(height: 20),
                                          Row(
                                            mainAxisAlignment:
                                                MainAxisAlignment.start,
                                            children: [
                                              Container(
                                                width: 400,
                                                child: TextField(
                                                  enableInteractiveSelection:
                                                      true,
                                                  minLines: 2,
                                                  maxLines: 15,
                                                  keyboardType:
                                                      TextInputType.multiline,
                                                  cursorColor:
                                                      const Color.fromRGBO(
                                                          88, 165, 196, 1),
                                                  style: TextStyle(
                                                      fontSize: 17,
                                                      color: Colors.black87,
                                                      fontWeight:
                                                          FontWeight.w400),
                                                  onChanged: (val) {
                                                    setState(
                                                        () => comment = val);
                                                  },
                                                  decoration:
                                                      const InputDecoration(
                                                          border:
                                                              InputBorder.none,
                                                          focusedBorder:
                                                              InputBorder.none,
                                                          enabledBorder:
                                                              InputBorder.none,
                                                          errorBorder:
                                                              InputBorder.none,
                                                          disabledBorder:
                                                              InputBorder.none,
                                                          hintText:
                                                              'Comment here...',
                                                          hintStyle: TextStyle(
                                                            fontFamily:
                                                                'Nunito Sans',
                                                            fontSize: 17,
                                                            color:
                                                                Colors.black26,
                                                            fontWeight:
                                                                FontWeight.w800,
                                                          )),
                                                ),
                                              ),
                                            ],
                                          ),
                                          ((imageList.length > 0))
                                              ? buildGridView()
                                              : SizedBox(),
                                          // finalVideos.length > 0
                                          //     ? showSelectedVideos()
                                          //     : SizedBox(),
                                          const SizedBox(
                                            height: 20,
                                          ),
                                        ],
                                      )),
                                ],
                              ),
                            ),
                            Container(
                              color: Colors.white,
                              child: Row(
                                mainAxisAlignment:
                                    MainAxisAlignment.spaceBetween,
                                children: [
                                  Container(
                                    padding: EdgeInsets.only(bottom: 10),
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: [
                                        InkWell(
                                          onTap: () async {
                                            //  _pickVideos(context);
                                          },
                                          child: Container(
                                            padding: EdgeInsets.only(
                                                top: 10, left: 20),
                                            child: Center(
                                              child: Image.network(
                                                  "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fvideorecord.jpg?alt=media&token=f2f0b22d-020e-47e9-b8bb-6e2321f956fd",
                                                  height: 25,
                                                  width: 25),
                                            ),
                                          ),
                                        ),
                                        InkWell(
                                          onTap: () async {
                                            _pickImages(context, "comment");
                                          },
                                          child: Container(
                                            padding: EdgeInsets.only(
                                                top: 10, left: 15, right: 15),
                                            child: Center(
                                              child: Image.network(
                                                  "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fgallery.png?alt=media&token=09a32fa6-5e7c-4139-94e5-d4d74e5f5d6a",
                                                  height: 22,
                                                  width: 21),
                                            ),
                                          ),
                                        ),
                                        InkWell(
                                          onTap: () async {
                                            setState(() {
                                              commentStep = 'tag';
                                            });
                                          },
                                          child: Container(
                                            padding: EdgeInsets.only(
                                                top: 10, right: 15),
                                            child: Center(
                                              child: Icon(FontAwesome5.user_tag,
                                                  size: 18,
                                                  color: Colors.deepPurple),
                                            ),
                                          ),
                                        ),
                                      ],
                                    ),
                                  ),
                                ],
                              ),
                            ),
                          ],
                        )
                      : commentStep == 'tag'
                          ? Column(
                              children: [
                                Row(
                                  mainAxisAlignment:
                                      MainAxisAlignment.spaceBetween,
                                  children: [
                                    IconButton(
                                      onPressed: () {
                                        setState(() {
                                          commentStep = '';
                                        });
                                      },
                                      icon: Tab(
                                          child: Icon(MfgLabs.cancel,
                                              color: Colors.black45, size: 20)),
                                    ),
                                    Container(
                                      padding: EdgeInsets.all(10),
                                      child: Text(
                                        "Tag friends",
                                        style: TextStyle(
                                          fontFamily: 'Nunito Sans',
                                          fontSize: 17,
                                          color:
                                              Color.fromRGBO(88, 165, 196, 1),
                                          fontWeight: FontWeight.w800,
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          commentStep = '';
                                        });
                                      },
                                      child: Container(
                                        margin: EdgeInsets.only(right: 10),
                                        padding: EdgeInsets.only(
                                            left: 8,
                                            right: 8,
                                            top: 5,
                                            bottom: 5),
                                        decoration: BoxDecoration(
                                            color:
                                                Color.fromRGBO(88, 165, 196, 1),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        child: Text(
                                          'Done',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 17,
                                            color: Colors.white,
                                            fontWeight: FontWeight.w500,
                                          ),
                                        ),
                                      ),
                                    )
                                  ],
                                ),
                                SizedBox(
                                  height: 10,
                                ),
                                Container(height: 1, color: Colors.black26),
                                Container(
                                  height: 400,
                                  child: ListView.builder(
                                    physics: BouncingScrollPhysics(),
                                    itemCount: _users.length - 1,
                                    itemBuilder: (context, i) {
                                      return Column(
                                        children: [
                                          SizedBox(
                                            height: 10,
                                          ),
                                          InkWell(
                                            onTap: () {
                                              setState(() {
                                                selectedUserflag[i] =
                                                    !selectedUserflag[i];
                                                if (selectedUserflag[i] ==
                                                    true) {
                                                  commentUserTag
                                                      .add(_users[i]["id"]);
                                                } else {
                                                  if (commentUserTag.length ==
                                                      1) {
                                                    commentUserTag.clear();
                                                  } else {
                                                    for (int j = 0;
                                                        j <
                                                            commentUserTag
                                                                .length;
                                                        j++) {
                                                      if (_users[i]["id"] ==
                                                          commentUserTag[j]) {
                                                        commentUserTag
                                                            .removeAt(j);
                                                      }
                                                    }
                                                  }
                                                }
                                                print(commentUserTag);
                                              });
                                            },
                                            child: Container(
                                              decoration: BoxDecoration(
                                                  color: selectedUserflag[i] ==
                                                          false
                                                      ? Colors.white
                                                      : Color.fromRGBO(
                                                          88, 165, 196, 1),
                                                  borderRadius:
                                                      BorderRadius.circular(5)),
                                              padding: EdgeInsets.all(10),
                                              child: Row(
                                                crossAxisAlignment:
                                                    CrossAxisAlignment.start,
                                                children: [
                                                  SizedBox(
                                                    width: 20,
                                                  ),
                                                  InkWell(
                                                    onTap: () {},
                                                    child: CircleAvatar(
                                                      child: ClipOval(
                                                        child: Container(
                                                          width: MediaQuery.of(
                                                                      context)
                                                                  .size
                                                                  .width /
                                                              10.34,
                                                          height: MediaQuery.of(
                                                                      context)
                                                                  .size
                                                                  .width /
                                                              10.34,
                                                          child: Image.network(
                                                            _users[i]["photo"]!,
                                                          ),
                                                        ),
                                                      ),
                                                    ),
                                                  ),
                                                  SizedBox(
                                                    width: 15,
                                                  ),
                                                  Column(
                                                    mainAxisAlignment:
                                                        MainAxisAlignment.start,
                                                    crossAxisAlignment:
                                                        CrossAxisAlignment
                                                            .start,
                                                    children: [
                                                      RichText(
                                                        text: TextSpan(
                                                            text: _users[i]
                                                                ["display"],
                                                            style: TextStyle(
                                                              fontFamily:
                                                                  'Nunito Sans',
                                                              fontSize: 15,
                                                              color: selectedUserflag[
                                                                          i] ==
                                                                      true
                                                                  ? Colors.white
                                                                  : Color
                                                                      .fromRGBO(
                                                                          0,
                                                                          0,
                                                                          0,
                                                                          0.8),
                                                              fontWeight:
                                                                  FontWeight
                                                                      .bold,
                                                            ),
                                                            children: <
                                                                TextSpan>[
                                                              TextSpan(
                                                                text: ', Delhi',
                                                                style:
                                                                    TextStyle(
                                                                  fontFamily:
                                                                      'Nunito Sans',
                                                                  fontSize: 12,
                                                                  color: selectedUserflag[
                                                                              i] ==
                                                                          true
                                                                      ? Colors
                                                                          .white
                                                                      : Color.fromRGBO(
                                                                          0,
                                                                          0,
                                                                          0,
                                                                          0.7),
                                                                  fontWeight:
                                                                      FontWeight
                                                                          .w500,
                                                                ),
                                                              )
                                                            ]),
                                                      ),
                                                      Text(
                                                        _users[i]["full_name"]!,
                                                        style: TextStyle(
                                                          fontFamily:
                                                              'Nunito Sans',
                                                          fontSize: 12,
                                                          color:
                                                              selectedUserflag[
                                                                          i] ==
                                                                      true
                                                                  ? Colors.white
                                                                  : Color
                                                                      .fromRGBO(
                                                                          0,
                                                                          0,
                                                                          0,
                                                                          0.7),
                                                          fontWeight:
                                                              FontWeight.normal,
                                                        ),
                                                      ),
                                                    ],
                                                  ),
                                                ],
                                              ),
                                            ),
                                          ),
                                          SizedBox(
                                            height: 10,
                                          ),
                                          Container(
                                              height: 1, color: Colors.black26),
                                        ],
                                      );
                                    },
                                  ),
                                ),
                              ],
                            )
                          : SizedBox(),
                ),
              );
            }));
  }

//add reply
  String replyStep = "";
  String reply = '';
  List replyUserTag = [];
  String selectedPostIDToreply = "";
  String commentUserIDToreply = "";
  String selectedCommentIDToreply = "";
  void _addReplyDialogBox() {
    showDialog(
        context: context,
        barrierColor: Colors.grey.withOpacity(0.2),
        barrierDismissible: false,
        builder: (_) => StatefulBuilder(builder: (context, setState) {
              return AlertDialog(
                contentPadding: EdgeInsets.all(20),
                shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(10.0)),
                title: Column(
                  mainAxisSize: MainAxisSize.min,
                  children: [
                    Row(
                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
                      children: [
                        SizedBox(width: 30),
                        Text(
                          "Reply",
                          style: TextStyle(
                            fontSize: 20,
                            color: Color(0xCB000000),
                            fontWeight: FontWeight.w900,
                          ),
                        ),
                        IconButton(
                          onPressed: () {
                            comparedate = DateFormat('yyyyMMddkkmm')
                                .format(DateTime.now());
                            setState(() {
                              replyStep = "";
                              reply = "";
                              selectedPostIDToreply = "";
                              selectedCommentIDToreply = "";
                              imageList = [];
                              videoList = [];
                              replyUserTag = [];
                            });
                            for (int k = 0; k < selectedUserflag.length; k++) {
                              setState(() {
                                selectedUserflag[k] = false;
                              });
                            }
                            Navigator.of(context).pop();
                          },
                          icon: Tab(
                              child: Icon(Icons.cancel_rounded,
                                  color: Colors.black45, size: 25)),
                        )
                      ],
                    ),
                    SizedBox(height: 20),
                    Container(height: 1, width: 500, color: Colors.grey[200]),
                  ],
                ),
                content: Container(
                  height: 470,
                  width: 500,
                  child: replyStep == ""
                      ? Column(
                          crossAxisAlignment: CrossAxisAlignment.stretch,
                          children: [
                            Expanded(
                              child: ListView(
                                physics: BouncingScrollPhysics(),
                                children: [
                                  SizedBox(
                                    height: 10,
                                  ),
                                  Row(
                                    mainAxisAlignment:
                                        MainAxisAlignment.spaceBetween,
                                    children: [
                                      SizedBox(width: 30),
                                      SizedBox(width: 30),
                                      InkWell(
                                        onTap: () async {
                                          if ((reply != "")) {
                                            Dialogs.showLoadingDialog(
                                                context, _keyLoader);
                                            comparedate =
                                                DateFormat('yyyyMMddkkmm')
                                                    .format(DateTime.now());
                                            String replyID =
                                                "rply${_currentUserId}${comparedate}";
                                            String imgID =
                                                "imgrplysm${_currentUserId}${comparedate}";
                                            String videoID =
                                                "vdorplysm${_currentUserId}${comparedate}";
                                            String userTagID =
                                                "usrtgrplysm${_currentUserId}${comparedate}";
                                            bool isImagesPosted = false;
                                            bool isVideosPosted = false;
                                            bool isUserTaggedPosted = false;
                                            bool isFinalPostDone = false;

                                            if (imageList.isNotEmpty) {
                                              for (int i = 0;
                                                  i < imageList.length;
                                                  i++) {
                                                isImagesPosted =
                                                    await networkCRUD
                                                        .addsmPostImageDetails([
                                                  imgID,
                                                  imageList[i]
                                                ]);
                                              }
                                            }
                                            if (videoList.isNotEmpty) {
                                              for (int i = 0;
                                                  i < videoList.length;
                                                  i++) {
                                                isVideosPosted =
                                                    await networkCRUD
                                                        .addsmPostVideoDetails([
                                                  videoID,
                                                  videoList[i],
                                                  ""
                                                ]);
                                              }
                                            }
                                            if (commentUserTag.isNotEmpty) {
                                              for (int i = 0;
                                                  i < commentUserTag.length;
                                                  i++) {
                                                isUserTaggedPosted =
                                                    await networkCRUD
                                                        .addsmPostUserTaggedDetails([
                                                  userTagID,
                                                  commentUserTag[i]
                                                ]);
                                              }
                                            }
                                            isFinalPostDone = await networkCRUD
                                                .addsmReplyPostDetails([
                                              replyID,
                                              selectedCommentIDToreply,
                                              selectedPostIDToreply,
                                              _currentUserId,
                                              reply,
                                              imageList.isNotEmpty ? imgID : "",
                                              videoList.isNotEmpty
                                                  ? videoID
                                                  : "",
                                              commentUserTag.isNotEmpty
                                                  ? userTagID
                                                  : "",
                                              0,
                                              comparedate
                                            ]);
                                            if (isFinalPostDone == true) {
                                              for (int k = 0;
                                                  k < selectedUserflag.length;
                                                  k++) {
                                                setState(() {
                                                  selectedUserflag[k] = false;
                                                });
                                              }
                                              _call_apis();
                                              ////////////////////////////notification//////////////////////////////////////
                                              String notify_id =
                                                  "ntf${selectedPostIDToreply}$comparedate";
                                              notifyCRUD.sendNotification([
                                                notify_id,
                                                "replypost",
                                                "comment",
                                                _currentUserId,
                                                commentUserIDToreply,
                                                countData!.value["usertoken"]
                                                        [commentUserIDToreply]
                                                    ["tokenid"],
                                                "You got one reply!",
                                                "${userDataDB!.get("first_name")} ${userDataDB!.get("last_name")} replied on your comment.",
                                                selectedPostIDToreply,
                                                "allpost",
                                                "false",
                                                comparedate,
                                                "add"
                                              ]);
                                              //////////////////////////////////////////////////////////////////////////
                                              ElegantNotification.success(
                                                title: Text("Congrats,"),
                                                description: Text(
                                                    "Your reply posted successfully."),
                                              );
                                            } else {
                                              ElegantNotification.error(
                                                title: Text("Error..."),
                                                description:
                                                    Text("Something wrong."),
                                              );
                                            }
                                          }
                                          setState(() {
                                            commentStep = "";
                                            comment = "";
                                            selectedPostIndexToComment = -1;
                                            selectedCommentIDToreply = "";
                                            selectedPostIDToreply = "";
                                            imageList = [];
                                            videoList = [];
                                            commentUserTag = [];
                                          });
                                          for (int k = 0;
                                              k < selectedUserflag.length;
                                              k++) {
                                            setState(() {
                                              selectedUserflag[k] = false;
                                            });
                                          }
                                          Navigator.of(
                                                  _keyLoader.currentContext!,
                                                  rootNavigator: true)
                                              .pop();
                                          Navigator.of(context).pop();
                                        },
                                        child: Container(
                                          margin: EdgeInsets.only(right: 10),
                                          padding: EdgeInsets.only(
                                              left: 8,
                                              right: 8,
                                              top: 5,
                                              bottom: 5),
                                          decoration: BoxDecoration(
                                              color: (reply != "")
                                                  ? Color.fromRGBO(
                                                      88, 165, 196, 1)
                                                  : Colors.black12,
                                              borderRadius:
                                                  BorderRadius.circular(3)),
                                          child: Text(
                                            (reply != "") ? 'Reply' : "Wait",
                                            style: TextStyle(
                                              fontFamily: 'Nunito Sans',
                                              fontSize: 17,
                                              color: Colors.white,
                                              fontWeight: FontWeight.w500,
                                            ),
                                          ),
                                        ),
                                      )
                                    ],
                                  ),
                                  SizedBox(
                                    height: 20,
                                  ),
                                  Container(
                                      padding: const EdgeInsets.only(
                                          left: (10.0),
                                          right: 10,
                                          top: 10,
                                          bottom: 10),
                                      margin: EdgeInsets.all(5),
                                      decoration: BoxDecoration(
                                          color:
                                              Color.fromRGBO(242, 246, 248, 1),
                                          borderRadius: BorderRadius.all(
                                              Radius.circular(20))),
                                      child: Column(
                                        children: [
                                          Row(
                                            mainAxisAlignment:
                                                MainAxisAlignment.spaceBetween,
                                            children: [
                                              Container(
                                                child: Row(
                                                  crossAxisAlignment:
                                                      CrossAxisAlignment.start,
                                                  children: [
                                                    InkWell(
                                                      onTap: () {},
                                                      child: CircleAvatar(
                                                        backgroundImage:
                                                            NetworkImage(
                                                                userDataDB!.get(
                                                                    "profilepic")),
                                                        radius: 22,
                                                      ),
                                                    ),
                                                    SizedBox(
                                                      width: 10,
                                                    ),
                                                    Container(
                                                      child: Column(
                                                        crossAxisAlignment:
                                                            CrossAxisAlignment
                                                                .start,
                                                        children: [
                                                          _chooseHeaderAccordingToMood(
                                                              "", 0, [], []),
                                                        ],
                                                      ),
                                                    ),
                                                  ],
                                                ),
                                              ),
                                            ],
                                          ),
                                          SizedBox(height: 20),
                                          Row(
                                            mainAxisAlignment:
                                                MainAxisAlignment.start,
                                            children: [
                                              Container(
                                                width: 400,
                                                child: TextField(
                                                  enableInteractiveSelection:
                                                      true,
                                                  minLines: 2,
                                                  maxLines: 15,
                                                  keyboardType:
                                                      TextInputType.multiline,
                                                  cursorColor:
                                                      const Color.fromRGBO(
                                                          88, 165, 196, 1),
                                                  style: TextStyle(
                                                      fontSize: 17,
                                                      color: Colors.black87,
                                                      fontWeight:
                                                          FontWeight.w400),
                                                  onChanged: (val) {
                                                    setState(() => reply = val);
                                                  },
                                                  decoration:
                                                      const InputDecoration(
                                                          border:
                                                              InputBorder.none,
                                                          focusedBorder:
                                                              InputBorder.none,
                                                          enabledBorder:
                                                              InputBorder.none,
                                                          errorBorder:
                                                              InputBorder.none,
                                                          disabledBorder:
                                                              InputBorder.none,
                                                          hintText:
                                                              'Reply here...',
                                                          hintStyle: TextStyle(
                                                            fontFamily:
                                                                'Nunito Sans',
                                                            fontSize: 17,
                                                            color:
                                                                Colors.black26,
                                                            fontWeight:
                                                                FontWeight.w800,
                                                          )),
                                                ),
                                              ),
                                            ],
                                          ),
                                          ((imageList.length > 0))
                                              ? buildGridView()
                                              : SizedBox(),
                                          // finalVideos.length > 0
                                          //     ? showSelectedVideos()
                                          //     : SizedBox(),
                                          const SizedBox(
                                            height: 20,
                                          ),
                                        ],
                                      )),
                                ],
                              ),
                            ),
                            Container(
                              color: Colors.white,
                              child: Row(
                                mainAxisAlignment:
                                    MainAxisAlignment.spaceBetween,
                                children: [
                                  Container(
                                    padding: EdgeInsets.only(bottom: 10),
                                    child: Row(
                                      mainAxisAlignment:
                                          MainAxisAlignment.start,
                                      children: [
                                        InkWell(
                                          onTap: () async {
                                            //  _pickVideos(context);
                                          },
                                          child: Container(
                                            padding: EdgeInsets.only(
                                                top: 10, left: 20),
                                            child: Center(
                                              child: Image.network(
                                                  "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fvideorecord.jpg?alt=media&token=f2f0b22d-020e-47e9-b8bb-6e2321f956fd",
                                                  height: 25,
                                                  width: 25),
                                            ),
                                          ),
                                        ),
                                        InkWell(
                                          onTap: () async {
                                            _pickImages(context, "reply");
                                          },
                                          child: Container(
                                            padding: EdgeInsets.only(
                                                top: 10, left: 15, right: 15),
                                            child: Center(
                                              child: Image.network(
                                                  "https://firebasestorage.googleapis.com/v0/b/hys-pro-41c66.appspot.com/o/assets%2Fgallery.png?alt=media&token=09a32fa6-5e7c-4139-94e5-d4d74e5f5d6a",
                                                  height: 22,
                                                  width: 21),
                                            ),
                                          ),
                                        ),
                                        InkWell(
                                          onTap: () async {
                                            setState(() {
                                              replyStep = 'tag';
                                            });
                                          },
                                          child: Container(
                                            padding: EdgeInsets.only(
                                                top: 10, right: 15),
                                            child: Center(
                                              child: Icon(FontAwesome5.user_tag,
                                                  size: 18,
                                                  color: Colors.deepPurple),
                                            ),
                                          ),
                                        ),
                                      ],
                                    ),
                                  ),
                                ],
                              ),
                            ),
                          ],
                        )
                      : replyStep == 'tag'
                          ? Column(
                              children: [
                                Row(
                                  mainAxisAlignment:
                                      MainAxisAlignment.spaceBetween,
                                  children: [
                                    IconButton(
                                      onPressed: () {
                                        setState(() {
                                          replyStep = '';
                                        });
                                      },
                                      icon: Tab(
                                          child: Icon(MfgLabs.cancel,
                                              color: Colors.black45, size: 20)),
                                    ),
                                    Container(
                                      padding: EdgeInsets.all(10),
                                      child: Text(
                                        "Tag friends",
                                        style: TextStyle(
                                          fontFamily: 'Nunito Sans',
                                          fontSize: 17,
                                          color:
                                              Color.fromRGBO(88, 165, 196, 1),
                                          fontWeight: FontWeight.w800,
                                        ),
                                      ),
                                    ),
                                    InkWell(
                                      onTap: () {
                                        setState(() {
                                          replyStep = '';
                                        });
                                      },
                                      child: Container(
                                        margin: EdgeInsets.only(right: 10),
                                        padding: EdgeInsets.only(
                                            left: 8,
                                            right: 8,
                                            top: 5,
                                            bottom: 5),
                                        decoration: BoxDecoration(
                                            color:
                                                Color.fromRGBO(88, 165, 196, 1),
                                            borderRadius:
                                                BorderRadius.circular(3)),
                                        child: Text(
                                          'Done',
                                          style: TextStyle(
                                            fontFamily: 'Nunito Sans',
                                            fontSize: 17,
                                            color: Colors.white,
                                            fontWeight: FontWeight.w500,
                                          ),
                                        ),
                                      ),
                                    )
                                  ],
                                ),
                                SizedBox(
                                  height: 10,
                                ),
                                Container(height: 1, color: Colors.black26),
                                Container(
                                  height: 400,
                                  child: ListView.builder(
                                    physics: BouncingScrollPhysics(),
                                    itemCount: _users.length - 1,
                                    itemBuilder: (context, i) {
                                      return Column(
                                        children: [
                                          SizedBox(
                                            height: 10,
                                          ),
                                          InkWell(
                                            onTap: () {
                                              setState(() {
                                                selectedUserflag[i] =
                                                    !selectedUserflag[i];
                                                if (selectedUserflag[i] ==
                                                    true) {
                                                  commentUserTag
                                                      .add(_users[i]["id"]);
                                                } else {
                                                  if (commentUserTag.length ==
                                                      1) {
                                                    commentUserTag.clear();
                                                  } else {
                                                    for (int j = 0;
                                                        j <
                                                            commentUserTag
                                                                .length;
                                                        j++) {
                                                      if (_users[i]["id"] ==
                                                          commentUserTag[j]) {
                                                        commentUserTag
                                                            .removeAt(j);
                                                      }
                                                    }
                                                  }
                                                }
                                                print(commentUserTag);
                                              });
                                            },
                                            child: Container(
                                              decoration: BoxDecoration(
                                                  color: selectedUserflag[i] ==
                                                          false
                                                      ? Colors.white
                                                      : Color.fromRGBO(
                                                          88, 165, 196, 1),
                                                  borderRadius:
                                                      BorderRadius.circular(5)),
                                              padding: EdgeInsets.all(10),
                                              child: Row(
                                                crossAxisAlignment:
                                                    CrossAxisAlignment.start,
                                                children: [
                                                  SizedBox(
                                                    width: 20,
                                                  ),
                                                  InkWell(
                                                    onTap: () {},
                                                    child: CircleAvatar(
                                                      child: ClipOval(
                                                        child: Container(
                                                          width: MediaQuery.of(
                                                                      context)
                                                                  .size
                                                                  .width /
                                                              10.34,
                                                          height: MediaQuery.of(
                                                                      context)
                                                                  .size
                                                                  .width /
                                                              10.34,
                                                          child: Image.network(
                                                            _users[i]["photo"]!,
                                                          ),
                                                        ),
                                                      ),
                                                    ),
                                                  ),
                                                  SizedBox(
                                                    width: 15,
                                                  ),
                                                  Column(
                                                    mainAxisAlignment:
                                                        MainAxisAlignment.start,
                                                    crossAxisAlignment:
                                                        CrossAxisAlignment
                                                            .start,
                                                    children: [
                                                      RichText(
                                                        text: TextSpan(
                                                            text: _users[i]
                                                                ["display"],
                                                            style: TextStyle(
                                                              fontFamily:
                                                                  'Nunito Sans',
                                                              fontSize: 15,
                                                              color: selectedUserflag[
                                                                          i] ==
                                                                      true
                                                                  ? Colors.white
                                                                  : Color
                                                                      .fromRGBO(
                                                                          0,
                                                                          0,
                                                                          0,
                                                                          0.8),
                                                              fontWeight:
                                                                  FontWeight
                                                                      .bold,
                                                            ),
                                                            children: <
                                                                TextSpan>[
                                                              TextSpan(
                                                                text: ', Delhi',
                                                                style:
                                                                    TextStyle(
                                                                  fontFamily:
                                                                      'Nunito Sans',
                                                                  fontSize: 12,
                                                                  color: selectedUserflag[
                                                                              i] ==
                                                                          true
                                                                      ? Colors
                                                                          .white
                                                                      : Color.fromRGBO(
                                                                          0,
                                                                          0,
                                                                          0,
                                                                          0.7),
                                                                  fontWeight:
                                                                      FontWeight
                                                                          .w500,
                                                                ),
                                                              )
                                                            ]),
                                                      ),
                                                      Text(
                                                        _users[i]["full_name"]!,
                                                        style: TextStyle(
                                                          fontFamily:
                                                              'Nunito Sans',
                                                          fontSize: 12,
                                                          color:
                                                              selectedUserflag[
                                                                          i] ==
                                                                      true
                                                                  ? Colors.white
                                                                  : Color
                                                                      .fromRGBO(
                                                                          0,
                                                                          0,
                                                                          0,
                                                                          0.7),
                                                          fontWeight:
                                                              FontWeight.normal,
                                                        ),
                                                      ),
                                                    ],
                                                  ),
                                                ],
                                              ),
                                            ),
                                          ),
                                          SizedBox(
                                            height: 10,
                                          ),
                                          Container(
                                              height: 1, color: Colors.black26),
                                        ],
                                      );
                                    },
                                  ),
                                ),
                              ],
                            )
                          : SizedBox(),
                ),
              );
            }));
  }

  Widget _loading() {
    return Center(
      child: Container(
          height: 50.0,
          margin: EdgeInsets.only(left: 10.0, right: 10.0),
          child: Center(
              child: CircularProgressIndicator(
            valueColor:
                AlwaysStoppedAnimation<Color>(Color.fromRGBO(88, 165, 196, 1)),
          ))),
    );
  }

  void onError(places.PlacesAutocompleteResponse response) {
    print(response.errorMessage);
  }

  Future<void> _handlePressButton() async {
    try {
      places.Prediction? p = await PlacesAutocomplete.show(
        context: context,
        apiKey: kGoogleApiKey,
        onError: onError,
        mode: Mode.fullscreen,
        language: "en",
      );
      places.PlacesDetailsResponse place =
          await _places.getDetailsByPlaceId(p!.placeId!);
      final placeDetail = place.result;
      setState(() {
        curr_lat = placeDetail.geometry!.location.lat;
        curr_long = placeDetail.geometry!.location.lng;
      });

      fullAddress = placeDetail.formattedAddress!;
      _locController.text = fullAddress;

      print(fullAddress);
    } catch (e) {
      return;
    }
  }
}

class Dialogs {
  static Future<void> showLoadingDialog(
      BuildContext context, GlobalKey key) async {
    return showDialog<void>(
        context: context,
        barrierDismissible: false,
        builder: (BuildContext context) {
          return new WillPopScope(
              onWillPop: () async => false,
              child: SimpleDialog(
                  key: key,
                  backgroundColor: Colors.black54,
                  children: <Widget>[
                    Center(
                      child: Column(children: [
                        CircularProgressIndicator(),
                        SizedBox(
                          height: 10,
                        ),
                        Text(
                          "Please Wait....",
                          style: TextStyle(color: Colors.blueAccent),
                        )
                      ]),
                    )
                  ]));
        });
  }
}
